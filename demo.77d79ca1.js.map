{"version":3,"sources":["webpack:///demo.77d79ca1.js","webpack:///./demo/src/App.js?cc05","webpack:///./~/localforage/dist/localforage.js","webpack:////Users/kye/npm/lib/~/nwb/~/object-assign/index.js","webpack:///./~/preact-smitty/dist/preact-smitty.js","webpack:///./~/preact/dist/preact.js","webpack:////Users/kye/npm/lib/~/nwb/~/asap/browser-raw.js","webpack:////Users/kye/npm/lib/~/nwb/~/promise/lib/core.js","webpack:///(webpack)/buildin/global.js","webpack:///./demo/src/index.js","webpack:////Users/kye/npm/lib/~/nwb/~/promise/lib/es6-extensions.js","webpack:////Users/kye/npm/lib/~/nwb/polyfills.js","webpack:///./demo/src/App.js","webpack:///./src/index.js","webpack:////Users/kye/npm/lib/~/nwb/~/whatwg-fetch/fetch.js","webpack:////Users/kye/npm/lib/~/nwb/~/promise/lib/rejection-tracking.js","webpack:///./~/mitt/dist/mitt.js"],"names":["webpackJsonp","+iyJ","module","exports","0","__webpack_require__","22C0","global","require","f","e","t","n","r","s","o","u","a","i","Error","code","l","call","length","1","_dereq_","nextTick","draining","oldQueue","len","queue","immediate","task","push","scheduleDrain","Mutation","MutationObserver","WebKitMutationObserver","called","observer","element","document","createTextNode","observe","characterData","data","setImmediate","MessageChannel","createElement","scriptEl","onreadystatechange","parentNode","removeChild","documentElement","appendChild","setTimeout","channel","port1","onmessage","port2","postMessage","this","self","window","2","INTERNAL","Promise","resolver","TypeError","state","PENDING","outcome","safelyResolveThenable","QueueItem","promise","onFulfilled","onRejected","callFulfilled","otherCallFulfilled","callRejected","otherCallRejected","unwrap","func","value","returnValue","handlers","reject","resolve","getThen","obj","then","apply","arguments","thenable","onError","onSuccess","tryToUnwrap","result","tryCatch","status","out","reason","all","iterable","allResolver","resolveFromAll","outValue","values","resolved","error","toString","Array","race","response","REJECTED","FULFILLED","prototype","constructor","3","4","_classCallCheck","instance","Constructor","getIDB","indexedDB","webkitIndexedDB","mozIndexedDB","OIndexedDB","msIndexedDB","isIndexedDBValid","idb","isSafari","openDatabase","test","navigator","userAgent","platform","hasFetch","fetch","indexOf","IDBKeyRange","isWebSQLValid","isLocalStorageValid","localStorage","setItem","createBlob","parts","properties","Blob","name","Builder","BlobBuilder","MSBlobBuilder","MozBlobBuilder","WebKitBlobBuilder","builder","append","getBlob","type","executeCallback","callback","executeTwoCallbacks","errorCallback","_binStringToArrayBuffer","bin","buf","ArrayBuffer","arr","Uint8Array","charCodeAt","_checkBlobSupportWithoutCaching","Promise$1","txn","transaction","DETECT_BLOB_SUPPORT_STORE","blob","objectStore","put","onabort","preventDefault","stopPropagation","oncomplete","matchedChrome","match","parseInt","_checkBlobSupport","supportsBlobs","_deferReadiness","dbInfo","dbContext","dbContexts","deferredOperation","deferredOperations","dbReady","_advanceReadiness","pop","_getConnection","upgradeNeeded","db","close","dbArgs","version","openreq","open","onupgradeneeded","createObjectStore","storeName","oldVersion","ex","onerror","onsuccess","_getOriginalConnection","_getUpgradedConnection","_isUpgradeNeeded","defaultVersion","isNewStore","objectStoreNames","contains","isDowngrade","isUpgrade","incVersion","_encodeBlob","reader","FileReader","onloadend","__local_forage_encoded_blob","btoa","target","readAsBinaryString","_decodeBlob","encodedBlob","atob","_isEncodedBlob","_fullyReady","_initReady","_dbInfo","_initStorage","options","ignoreErrors","forages","ready","initPromises","j","forage","slice","_defaultConfig","k","getItem","key","String","store","req","get","undefined","iterate","iterator","openCursor","iterationNumber","cursor","blobSupport","removeItem","clear","count","advanced","advance","keys","stringToBuffer","serializedString","encoded1","encoded2","encoded3","encoded4","bufferLength","p","buffer","bytes","BASE_CHARS","bufferToString","base64String","substring","serialize","valueType","toString$1","marker","SERIALIZED_MARKER","TYPE_ARRAYBUFFER","TYPE_INT8ARRAY","TYPE_UINT8ARRAY","TYPE_UINT8CLAMPEDARRAY","TYPE_INT16ARRAY","TYPE_UINT16ARRAY","TYPE_INT32ARRAY","TYPE_UINT32ARRAY","TYPE_FLOAT32ARRAY","TYPE_FLOAT64ARRAY","fileReader","onload","TYPE_BLOB","BLOB_TYPE_PREFIX","readAsArrayBuffer","JSON","stringify","deserialize","SERIALIZED_MARKER_LENGTH","parse","blobType","TYPE_SERIALIZED_MARKER_LENGTH","BLOB_TYPE_PREFIX_REGEX","matcher","Int8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","_initStorage$1","dbInfoPromise","description","size","executeSql","serializer","localforageSerializer","getItem$1","results","rows","item","iterate$1","_setItem","retriesLeft","originalValue","sqlError","QUOTA_ERR","setItem$1","removeItem$1","clear$1","length$1","c","key$1","keys$1","_initStorage$2","keyPrefix","clear$2","getItem$2","iterate$2","keyPrefixLength","key$2","keys$2","length$2","removeItem$2","setItem$2","callWhenReady","localForageInstance","libraryMethod","_args","extend","arg","hasOwnProperty","isArray","isLibraryDriver","driverName","driver","DriverType","_typeof","Symbol","asyncStorage","_driver","webSQLStorage","localStorageWrapper","CustomDrivers","INDEXEDDB","LOCALSTORAGE","WEBSQL","DefaultDriverOrder","LibraryMethods","DefaultConfig","driverSupport","LocalForage","_config","_driverSet","_initDriver","_ready","_wrapLibraryMethodsWithReady","setDriver","config","replace","defineDriver","driverObject","complianceError","namingError","customDriverMethods","concat","customDriverMethod","supportPromise","_support","supportResult","getDriver","getDriverPromise","getSerializer","serializerPromise","drivers","setDriverToConfig","extendSelfWithDriver","_extend","initDriver","supportedDrivers","driverPromiseLoop","currentDriverIndex","_getSupportedDrivers","oldDriverSetDone","supports","libraryMethodsAndProperties","createInstance","localforage_js","82LK","toObject","val","Object","shouldUseNative","assign","test1","getOwnPropertyNames","test2","fromCharCode","map","join","test3","split","forEach","letter","err","getOwnPropertySymbols","propIsEnumerable","propertyIsEnumerable","source","from","symbols","to","97Jz","handleStoreUpdate","updateAnimId","setState","props","context","on","__proto__","create","componentWillUnmount","clearTimeout","off","render","h","emit","Component","defineProperty","getChildContext","children","Provider","connect","EF6w","factory","VNode","nodeName","attributes","lastSimple","child","simple","stack","EMPTY_CHILDREN","vnode","clone","delve","isFunction","isString","hashToClassName","str","prop","cloneElement","createLinkedState","component","eventPath","path","v","checked","enqueueRender","_dirty","items","debounceRendering","defer","rerender","list","renderComponent","isFunctionalComponent","buildFunctionalComponent","getNodeProps","EMPTY","isSameNodeType","node","Text","_componentConstructor","isNamedNode","normalizedNodeName","toLowerCase","defaultProps","removeNode","setAccessor","old","isSvg","style","cssText","NON_DIMENSION_PROPS","innerHTML","__html","_listeners","addEventListener","eventProxy","NON_BUBBLING_EVENTS","removeEventListener","setProperty","removeAttribute","ns","removeAttributeNS","setAttributeNS","setAttribute","className","event","collectNode","Element","_component","_name","nodes","createNode","createElementNS","flushMounts","mounts","afterMount","componentDidMount","diff","dom","mountAll","parent","componentRoot","diffLevel","isSvgMode","ownerSVGElement","hydrating","ATTR_KEY","ret","idiff","ref","nodeValue","recollectNodeTree","buildComponentFromVNode","prevSvgMode","vchildren","firstChild","replaceChild","fc","nextSibling","innerDiffNode","dangerouslySetInnerHTML","diffAttributes","absorb","vchild","originalChildren","childNodes","keyed","keyedLen","min","childrenLen","vlen","_child","__key","insertBefore","unmountOnly","unmountComponent","lastChild","attrs","collectComponent","components","createComponent","Ctor","inst","nextBase","splice","setComponentProps","opts","_disable","__ref","base","componentWillMount","componentWillReceiveProps","prevContext","prevProps","syncComponentUpdates","isChild","skip","rendered","cbase","previousProps","previousState","prevState","previousContext","isUpdate","initialBase","initialChildComponent","shouldComponentUpdate","componentWillUpdate","toUnmount","childComponent","childProps","_parentComponent","baseParent","componentRef","unshift","componentDidUpdate","afterUpdate","fn","cb","_renderCallbacks","originalComponent","oldDom","isDirectOwner","isOwner","remove","beforeUnmount","inner","componentDidUnmount","merge","lcCache","for","boxFlex","boxFlexGroup","columnCount","fillOpacity","flex","flexGrow","flexPositive","flexShrink","flexNegative","fontWeight","lineClamp","lineHeight","opacity","order","orphans","strokeOpacity","widows","zIndex","zoom","blur","focus","load","resize","scroll","linkState","_linkedStates","forceUpdate","N5z5","rawAsap","requestFlush","flushing","flush","index","currentIndex","capacity","scan","newLength","makeRequestCallFromMutationObserver","toggle","BrowserMutationObserver","makeRequestCallFromTimer","handleTimer","timeoutHandle","clearInterval","intervalHandle","setInterval","scope","NNls","UPH/","noop","LAST_ERROR","IS_ERROR","tryCallOne","tryCallTwo","b","_45","_81","_65","_54","doResolve","safeThen","res","handle","Handler","deferred","_10","handleResolved","asap","newValue","finale","bind","_97","done","_61","b+29","g","Function","eval","ctQG","__webpack_exports__","run","Root","default","root","__WEBPACK_IMPORTED_MODULE_0_preact__","querySelector","e2MQ","valuePromise","TRUE","FALSE","NULL","UNDEFINED","ZERO","EMPTYSTRING","args","remaining","fWmM","enable","jFIt","_possibleConstructorReturn","ReferenceError","_inherits","subClass","superClass","enumerable","writable","configurable","setPrototypeOf","_asyncToGenerator","gen","step","info","Image","_ref5","image","onClick","selected","wrapperStyles","position","top","left","right","bottom","width","height","display","alignItems","justifyContent","background","paddingTop","paddingRight","paddingBottom","paddingLeft","imgStyles","maxHeight","borderRadius","__WEBPACK_IMPORTED_MODULE_1_preact__","href","url","src","GithubRibbon","frameborder","scrolling","marginLeft","_store$handleActions","__WEBPACK_IMPORTED_MODULE_0__style_css__","__WEBPACK_IMPORTED_MODULE_2_preact_smitty__","__WEBPACK_IMPORTED_MODULE_3__src__","__WEBPACK_IMPORTED_MODULE_4_raw_loader_App_js__","__WEBPACK_IMPORTED_MODULE_5_localforage__","__WEBPACK_IMPORTED_MODULE_5_localforage___default","_this","getId","Date","camera","recording","stream","MediaStream","images","ui","selectedImageId","createActions","startMediaStream","constraints","_ref","regeneratorRuntime","mark","_callee","wrap","_context","prev","next","mediaDevices","getUserMedia","sent","actions","mediaStreamSuccess","t0","mediaStreamError","stop","_x","addImages","saveImage","id","catch","selectImage","setSelectedImageById","history","pushState","handleActions","streamError","imageId","location","pathname","decodeURI","onpopstate","Camera","_Component","_temp","_this2","_ret","_len","_key","video","canvas","handleClick","ctx","getContext","videoWidth","videoHeight","fillRect","drawImage","toDataURL","audio","_ref2","_this3","marginBottom","textAlign","color","transition","URL","createObjectURL","autoplay","muted","marginTop","margin","fontSize","border","outline","boxShadow","disabled","ImageList","_ref3","_ref4","flexFlow","App","_ref6","overflow","WebkitOverflowScrolling","borderLeft","borderBottom","lVK7","Store","initialState","_state","events","__WEBPACK_IMPORTED_MODULE_0_mitt___default","set","createStore","__WEBPACK_IMPORTED_MODULE_0_mitt__","payload","actionMap","_loop","creatorName","actionCreator","handlerMap","_loop2","handler","eventType","loAf","normalizeName","normalizeValue","iteratorFor","shift","support","Headers","headers","consumed","body","bodyUsed","fileReaderReady","readBlobAsArrayBuffer","readBlobAsText","readAsText","readArrayBufferAsText","view","chars","bufferClone","byteLength","Body","_initBody","_bodyInit","_bodyText","isPrototypeOf","_bodyBlob","formData","FormData","_bodyFormData","searchParams","URLSearchParams","arrayBuffer","isDataView","_bodyArrayBuffer","isArrayBufferView","rejected","text","decode","json","normalizeMethod","method","upcased","toUpperCase","methods","Request","input","credentials","mode","referrer","form","trim","decodeURIComponent","parseHeaders","rawHeaders","line","Response","bodyInit","ok","statusText","viewClasses","DataView","isView","oldValue","has","thisArg","entries","redirectStatuses","redirect","RangeError","init","request","xhr","XMLHttpRequest","getAllResponseHeaders","responseURL","responseText","ontimeout","withCredentials","responseType","setRequestHeader","send","polyfill","qd0F","disable","enabled","onUnhandled","allRejections","matchWhitelist","rejections","whitelist","DEFAULT_WHITELIST","displayId","logged","logError","onHandled","_72","timeout","some","cls","tNdy"],"mappings":"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","file":"demo.77d79ca1.js","sourcesContent":["webpackJsonp([0,1],{\n\n/***/ \"+iyJ\":\n/***/ (function(module, exports) {\n\nmodule.exports = \"var _this = this,\\n    _store$handleActions;\\n\\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\\\"Cannot call a class as a function\\\"); } }\\n\\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\\\"this hasn't been initialised - super() hasn't been called\\\"); } return call && (typeof call === \\\"object\\\" || typeof call === \\\"function\\\") ? call : self; }\\n\\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \\\"function\\\" && superClass !== null) { throw new TypeError(\\\"Super expression must either be null or a function, not \\\" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\\n\\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step(\\\"next\\\", value); }, function (err) { step(\\\"throw\\\", err); }); } } return step(\\\"next\\\"); }); }; }\\n\\n/** @jsx h */\\nimport './style.css';\\nimport { render, h, Component } from 'preact';\\nimport { Provider, connect } from 'preact-smitty';\\nimport { createStore } from '../../src';\\nimport source from 'raw-loader!./App.js';\\nimport localforage from 'localforage';\\n\\nlocalforage.config({ name: 'smitty_photo_booth' });\\n\\nvar pp = function pp(obj) {\\n  return JSON.stringify(obj, null, 2);\\n};\\nvar getId = function getId() {\\n  return new Date().toString();\\n};\\n\\nvar store = createStore({\\n  camera: {\\n    recording: false,\\n    stream: new window.MediaStream(),\\n    images: []\\n  },\\n  ui: {\\n    selectedImageId: null\\n  }\\n});\\n\\nstore.createActions({\\n  startMediaStream: function startMediaStream(constraints) {\\n    return function () {\\n      var _ref = _asyncToGenerator(regeneratorRuntime.mark(function _callee(store) {\\n        var stream;\\n        return regeneratorRuntime.wrap(function _callee$(_context) {\\n          while (1) {\\n            switch (_context.prev = _context.next) {\\n              case 0:\\n                _context.prev = 0;\\n                _context.next = 3;\\n                return navigator.mediaDevices.getUserMedia(constraints);\\n\\n              case 3:\\n                stream = _context.sent;\\n\\n                store.actions.mediaStreamSuccess(stream);\\n                _context.next = 10;\\n                break;\\n\\n              case 7:\\n                _context.prev = 7;\\n                _context.t0 = _context['catch'](0);\\n\\n                store.actions.mediaStreamError(_context.t0);\\n\\n              case 10:\\n              case 'end':\\n                return _context.stop();\\n            }\\n          }\\n        }, _callee, _this, [[0, 7]]);\\n      }));\\n\\n      return function (_x) {\\n        return _ref.apply(this, arguments);\\n      };\\n    }();\\n  },\\n  mediaStreamSuccess: 'camera/STREAM_SUCCESS',\\n  mediaStreamError: 'camera/STREAM_ERROR',\\n  addImages: 'camera/ADD_IMAGES',\\n  saveImage: function saveImage(url) {\\n    return function (store) {\\n      var id = getId();\\n      var image = { id: id, url: url };\\n      store.actions.addImages([image]);\\n\\n      localforage.getItem('images').then(function (images) {\\n        images.push(image);\\n        localforage.setItem('images', images);\\n      }).catch(function (err) {\\n        return console.log('Could not save image to db', err);\\n      });\\n    };\\n  },\\n  selectImage: function selectImage(id) {\\n    return function (store) {\\n      store.actions.setSelectedImageById(id);\\n      window.history.pushState({}, '', id || '/');\\n    };\\n  },\\n  setSelectedImageById: 'ui/SELECT_IMAGE'\\n});\\n\\nstore.handleActions((_store$handleActions = {}, _store$handleActions[store.actions.mediaStreamSuccess] = function (state, stream) {\\n  state.camera.stream = stream;\\n}, _store$handleActions[store.actions.mediaStreamError] = function (state, error) {\\n  state.camera.streamError = error;\\n}, _store$handleActions[store.actions.addImages] = function (state, images) {\\n  state.camera.images = state.camera.images.concat(images);\\n}, _store$handleActions[store.actions.setSelectedImageById] = function (state, imageId) {\\n  state.ui.selectedImageId = imageId;\\n}, _store$handleActions));\\n\\nlocalforage.getItem('images').then(function (images) {\\n  if (images) {\\n    store.actions.addImages(images);\\n  } else {\\n    localforage.setItem('images', []);\\n  }\\n});\\n\\nif (window.location.pathname !== '/') {\\n  store.actions.setSelectedImageById(decodeURI(window.location.pathname).split('/')[1]);\\n}\\n\\nwindow.onpopstate = function (event) {\\n  store.actions.setSelectedImageById(decodeURI(window.location.pathname).split('/')[1]);\\n};\\n\\nvar Camera = connect(function (state) {\\n  return {\\n    stream: state.camera.stream,\\n    streamError: state.camera.streamError\\n  };\\n})(function (_Component) {\\n  _inherits(Camera, _Component);\\n\\n  function Camera() {\\n    var _temp, _this2, _ret;\\n\\n    _classCallCheck(this, Camera);\\n\\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\\n      args[_key] = arguments[_key];\\n    }\\n\\n    return _ret = (_temp = (_this2 = _possibleConstructorReturn(this, _Component.call.apply(_Component, [this].concat(args))), _this2), _this2.video = null, _this2.canvas = null, _this2.handleClick = function () {\\n      var canvas = _this2.canvas;\\n      var ctx = canvas.getContext('2d');\\n      var width = _this2.video.videoWidth;\\n      var height = _this2.video.videoHeight;\\n      canvas.width = width;\\n      canvas.height = height;\\n      ctx.fillRect(0, 0, width, height);\\n      ctx.drawImage(_this2.video, 0, 0, width, height);\\n\\n      _this2.context.store.actions.saveImage(canvas.toDataURL('image/webp'));\\n    }, _temp), _possibleConstructorReturn(_this2, _ret);\\n  }\\n\\n  Camera.prototype.componentDidMount = function componentDidMount() {\\n    this.context.store.actions.startMediaStream({\\n      audio: false,\\n      video: true\\n    });\\n  };\\n\\n  Camera.prototype.render = function render(_ref2) {\\n    var _this3 = this;\\n\\n    var streamError = _ref2.streamError;\\n\\n    return h(\\n      'div',\\n      {\\n        style: {\\n          paddingTop: 16,\\n          paddingRight: 16,\\n          paddingBottom: 16,\\n          paddingLeft: 16\\n        }\\n      },\\n      h(\\n        'h3',\\n        {\\n          style: {\\n            height: streamError ? 24 : 0,\\n            lineHeight: '1.2',\\n            marginBottom: 16,\\n            textAlign: 'center',\\n            color: '#ff6b6b',\\n            opacity: streamError ? 1 : 0,\\n            transition: 'all 250ms ease-in-out'\\n          }\\n        },\\n        streamError ? streamError.name : ''\\n      ),\\n      h('video', {\\n        ref: function ref(node) {\\n          _this3.video = node;\\n        },\\n        style: {\\n          width: '100%',\\n          maxHeight: 'calc(50vh - 16px)',\\n          background: '#212529',\\n          cursor: 'pointer'\\n        },\\n        src: window.URL ? window.URL.createObjectURL(this.props.stream) : this.props.stream,\\n        autoplay: true,\\n        muted: true,\\n        onClick: this.handleClick\\n      }),\\n      h('canvas', {\\n        ref: function ref(node) {\\n          _this3.canvas = node;\\n        },\\n        style: { display: 'none' }\\n      }),\\n      h(\\n        'div',\\n        {\\n          style: {\\n            display: 'flex',\\n            alignItems: 'center',\\n            justifyContent: 'center',\\n            width: '100%',\\n            marginTop: 16,\\n            marginBottom: 16\\n          }\\n        },\\n        h(\\n          'button',\\n          {\\n            style: {\\n              paddingTop: 8,\\n              paddingRight: 16,\\n              paddingBottom: 8,\\n              paddingLeft: 16,\\n              margin: '0 auto',\\n              fontSize: 20,\\n              lineHeight: '1.6',\\n              color: '#adb5bd',\\n              background: '#343a40',\\n              border: 'none',\\n              outline: 'none',\\n              boxShadow: 'none',\\n              borderRadius: 5,\\n              cursor: 'pointer',\\n              opacity: streamError ? 0 : 1,\\n              transition: 'all 250ms ease-in-out'\\n            },\\n            disabled: streamError,\\n            type: 'button',\\n            onClick: this.handleClick\\n          },\\n          'Take Picture'\\n        )\\n      )\\n    );\\n  };\\n\\n  return Camera;\\n}(Component));\\n\\nvar ImageList = connect(function (state) {\\n  return {\\n    images: state.camera.images,\\n    selectedImageId: state.ui.selectedImageId\\n  };\\n})(function ImageList(_ref3, _ref4) {\\n  var images = _ref3.images,\\n      selectedImageId = _ref3.selectedImageId;\\n  var store = _ref4.store;\\n\\n  return h(\\n    'div',\\n    {\\n      style: {\\n        display: 'flex',\\n        flexFlow: 'wrap'\\n      }\\n    },\\n    images.map(function (image, i) {\\n      return h(Image, {\\n        key: image.id,\\n        image: image,\\n        index: i,\\n        selected: image.id === selectedImageId,\\n        onClick: function onClick() {\\n          store.actions.selectImage(image.id === selectedImageId ? null : image.id);\\n        }\\n      });\\n    })\\n  );\\n});\\n\\nfunction Image(_ref5) {\\n  var image = _ref5.image,\\n      index = _ref5.index,\\n      _onClick = _ref5.onClick,\\n      selected = _ref5.selected;\\n\\n  var wrapperStyles = selected ? {\\n    position: 'fixed',\\n    top: 0,\\n    left: 0,\\n    right: 0,\\n    bottom: 0,\\n    width: '100%',\\n    height: '100%',\\n    display: 'flex',\\n    alignItems: 'center',\\n    justifyContent: 'center',\\n    background: '#f8f9fa',\\n    zIndex: 10\\n  } : {\\n    position: 'relative',\\n    flex: '0 1 auto',\\n    width: 'calc(33% - 4px)',\\n    order: index * -1,\\n    paddingTop: 2,\\n    paddingRight: 2,\\n    paddingBottom: 0,\\n    paddingLeft: 2\\n  };\\n\\n  var imgStyles = selected ? { width: '90%', maxHeight: '90%', borderRadius: 8 } : { width: '100%', borderRadius: 4 };\\n\\n  return h(\\n    'a',\\n    {\\n      style: wrapperStyles,\\n      href: image.url,\\n      target: '_blank',\\n      onClick: function onClick(e) {\\n        e.preventDefault();\\n        _onClick();\\n      }\\n    },\\n    h('img', { src: image.url, style: imgStyles })\\n  );\\n}\\n\\nfunction GithubRibbon() {\\n  return h('iframe', {\\n    src: 'https://ghbtns.com/github-btn.html?user=tkh44&repo=smitty&type=star&count=true&size=large',\\n    frameborder: '0',\\n    scrolling: '0',\\n    width: '160px',\\n    height: '30px',\\n    style: { marginLeft: 'auto' }\\n  });\\n}\\n\\nvar App = connect(function (state) {\\n  return state;\\n})(function (props) {\\n  var _ref6;\\n\\n  return h(\\n    'div',\\n    { style: { display: 'flex' } },\\n    h(\\n      'div',\\n      {\\n        style: (_ref6 = {\\n          flex: '1 0 50%',\\n          height: '100vh',\\n          background: '#212529',\\n          overflow: 'auto',\\n          WebkitOverflowScrolling: 'touch'\\n        }, _ref6['background'] = props.camera.streamError ? '#f8f9fa' : '#212529', _ref6.cursor = 'pointer', _ref6.transition = 'all 250ms ease-in-out', _ref6)\\n      },\\n      h(Camera, null)\\n    ),\\n    h(\\n      'div',\\n      {\\n        style: {\\n          flex: '1 0 50%',\\n          height: '100vh',\\n          background: '#f8f9fa',\\n          borderLeft: '1px solid #dee2e6',\\n          overflow: 'auto',\\n          WebkitOverflowScrolling: 'touch'\\n        }\\n      },\\n      h(\\n        'div',\\n        {\\n          style: {\\n            display: 'flex',\\n            alignItems: 'center',\\n            borderBottom: '1px solid #dee2e6',\\n            paddingRight: 8,\\n            paddingLeft: 8\\n          }\\n        },\\n        h(\\n          'h2',\\n          null,\\n          'Smitty Photo Booth Demo'\\n        ),\\n        h(\\n          'a',\\n          {\\n            href: 'https://github.com/tkh44/smitty/tree/master/demo/src',\\n            style: { fontSize: '1rem', color: '#329af0', marginLeft: 8 },\\n            target: '_blank'\\n          },\\n          'source'\\n        ),\\n        h(GithubRibbon, null)\\n      ),\\n      h(ImageList, null)\\n    )\\n  );\\n});\\n\\nvar Root = function Root(props) {\\n  return h(\\n    Provider,\\n    { store: store },\\n    h(App, null)\\n  );\\n};\\n\\nexport default Root;\"\n\n/***/ }),\n\n/***/ 0:\n/***/ (function(module, exports, __webpack_require__) {\n\n__webpack_require__(\"fWmM\");\nmodule.exports = __webpack_require__(\"ctQG\");\n\n\n/***/ }),\n\n/***/ \"22C0\":\n/***/ (function(module, exports, __webpack_require__) {\n\n/* WEBPACK VAR INJECTION */(function(global) {var require;var require;/*!\n    localForage -- Offline Storage, Improved\n    Version 1.5.0\n    https://localforage.github.io/localForage\n    (c) 2013-2017 Mozilla, Apache License 2.0\n*/\n(function(f){if(true){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g.localforage = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return require(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw (f.code=\"MODULE_NOT_FOUND\", f)}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(_dereq_,module,exports){\n(function (global){\n'use strict';\nvar Mutation = global.MutationObserver || global.WebKitMutationObserver;\n\nvar scheduleDrain;\n\n{\n  if (Mutation) {\n    var called = 0;\n    var observer = new Mutation(nextTick);\n    var element = global.document.createTextNode('');\n    observer.observe(element, {\n      characterData: true\n    });\n    scheduleDrain = function () {\n      element.data = (called = ++called % 2);\n    };\n  } else if (!global.setImmediate && typeof global.MessageChannel !== 'undefined') {\n    var channel = new global.MessageChannel();\n    channel.port1.onmessage = nextTick;\n    scheduleDrain = function () {\n      channel.port2.postMessage(0);\n    };\n  } else if ('document' in global && 'onreadystatechange' in global.document.createElement('script')) {\n    scheduleDrain = function () {\n\n      // Create a <script> element; its readystatechange event will be fired asynchronously once it is inserted\n      // into the document. Do so, thus queuing up the task. Remember to clean up once it's been called.\n      var scriptEl = global.document.createElement('script');\n      scriptEl.onreadystatechange = function () {\n        nextTick();\n\n        scriptEl.onreadystatechange = null;\n        scriptEl.parentNode.removeChild(scriptEl);\n        scriptEl = null;\n      };\n      global.document.documentElement.appendChild(scriptEl);\n    };\n  } else {\n    scheduleDrain = function () {\n      setTimeout(nextTick, 0);\n    };\n  }\n}\n\nvar draining;\nvar queue = [];\n//named nextTick for less confusing stack traces\nfunction nextTick() {\n  draining = true;\n  var i, oldQueue;\n  var len = queue.length;\n  while (len) {\n    oldQueue = queue;\n    queue = [];\n    i = -1;\n    while (++i < len) {\n      oldQueue[i]();\n    }\n    len = queue.length;\n  }\n  draining = false;\n}\n\nmodule.exports = immediate;\nfunction immediate(task) {\n  if (queue.push(task) === 1 && !draining) {\n    scheduleDrain();\n  }\n}\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{}],2:[function(_dereq_,module,exports){\n'use strict';\nvar immediate = _dereq_(1);\n\n/* istanbul ignore next */\nfunction INTERNAL() {}\n\nvar handlers = {};\n\nvar REJECTED = ['REJECTED'];\nvar FULFILLED = ['FULFILLED'];\nvar PENDING = ['PENDING'];\n\nmodule.exports = exports = Promise;\n\nfunction Promise(resolver) {\n  if (typeof resolver !== 'function') {\n    throw new TypeError('resolver must be a function');\n  }\n  this.state = PENDING;\n  this.queue = [];\n  this.outcome = void 0;\n  if (resolver !== INTERNAL) {\n    safelyResolveThenable(this, resolver);\n  }\n}\n\nPromise.prototype[\"catch\"] = function (onRejected) {\n  return this.then(null, onRejected);\n};\nPromise.prototype.then = function (onFulfilled, onRejected) {\n  if (typeof onFulfilled !== 'function' && this.state === FULFILLED ||\n    typeof onRejected !== 'function' && this.state === REJECTED) {\n    return this;\n  }\n  var promise = new this.constructor(INTERNAL);\n  if (this.state !== PENDING) {\n    var resolver = this.state === FULFILLED ? onFulfilled : onRejected;\n    unwrap(promise, resolver, this.outcome);\n  } else {\n    this.queue.push(new QueueItem(promise, onFulfilled, onRejected));\n  }\n\n  return promise;\n};\nfunction QueueItem(promise, onFulfilled, onRejected) {\n  this.promise = promise;\n  if (typeof onFulfilled === 'function') {\n    this.onFulfilled = onFulfilled;\n    this.callFulfilled = this.otherCallFulfilled;\n  }\n  if (typeof onRejected === 'function') {\n    this.onRejected = onRejected;\n    this.callRejected = this.otherCallRejected;\n  }\n}\nQueueItem.prototype.callFulfilled = function (value) {\n  handlers.resolve(this.promise, value);\n};\nQueueItem.prototype.otherCallFulfilled = function (value) {\n  unwrap(this.promise, this.onFulfilled, value);\n};\nQueueItem.prototype.callRejected = function (value) {\n  handlers.reject(this.promise, value);\n};\nQueueItem.prototype.otherCallRejected = function (value) {\n  unwrap(this.promise, this.onRejected, value);\n};\n\nfunction unwrap(promise, func, value) {\n  immediate(function () {\n    var returnValue;\n    try {\n      returnValue = func(value);\n    } catch (e) {\n      return handlers.reject(promise, e);\n    }\n    if (returnValue === promise) {\n      handlers.reject(promise, new TypeError('Cannot resolve promise with itself'));\n    } else {\n      handlers.resolve(promise, returnValue);\n    }\n  });\n}\n\nhandlers.resolve = function (self, value) {\n  var result = tryCatch(getThen, value);\n  if (result.status === 'error') {\n    return handlers.reject(self, result.value);\n  }\n  var thenable = result.value;\n\n  if (thenable) {\n    safelyResolveThenable(self, thenable);\n  } else {\n    self.state = FULFILLED;\n    self.outcome = value;\n    var i = -1;\n    var len = self.queue.length;\n    while (++i < len) {\n      self.queue[i].callFulfilled(value);\n    }\n  }\n  return self;\n};\nhandlers.reject = function (self, error) {\n  self.state = REJECTED;\n  self.outcome = error;\n  var i = -1;\n  var len = self.queue.length;\n  while (++i < len) {\n    self.queue[i].callRejected(error);\n  }\n  return self;\n};\n\nfunction getThen(obj) {\n  // Make sure we only access the accessor once as required by the spec\n  var then = obj && obj.then;\n  if (obj && typeof obj === 'object' && typeof then === 'function') {\n    return function appyThen() {\n      then.apply(obj, arguments);\n    };\n  }\n}\n\nfunction safelyResolveThenable(self, thenable) {\n  // Either fulfill, reject or reject with error\n  var called = false;\n  function onError(value) {\n    if (called) {\n      return;\n    }\n    called = true;\n    handlers.reject(self, value);\n  }\n\n  function onSuccess(value) {\n    if (called) {\n      return;\n    }\n    called = true;\n    handlers.resolve(self, value);\n  }\n\n  function tryToUnwrap() {\n    thenable(onSuccess, onError);\n  }\n\n  var result = tryCatch(tryToUnwrap);\n  if (result.status === 'error') {\n    onError(result.value);\n  }\n}\n\nfunction tryCatch(func, value) {\n  var out = {};\n  try {\n    out.value = func(value);\n    out.status = 'success';\n  } catch (e) {\n    out.status = 'error';\n    out.value = e;\n  }\n  return out;\n}\n\nexports.resolve = resolve;\nfunction resolve(value) {\n  if (value instanceof this) {\n    return value;\n  }\n  return handlers.resolve(new this(INTERNAL), value);\n}\n\nexports.reject = reject;\nfunction reject(reason) {\n  var promise = new this(INTERNAL);\n  return handlers.reject(promise, reason);\n}\n\nexports.all = all;\nfunction all(iterable) {\n  var self = this;\n  if (Object.prototype.toString.call(iterable) !== '[object Array]') {\n    return this.reject(new TypeError('must be an array'));\n  }\n\n  var len = iterable.length;\n  var called = false;\n  if (!len) {\n    return this.resolve([]);\n  }\n\n  var values = new Array(len);\n  var resolved = 0;\n  var i = -1;\n  var promise = new this(INTERNAL);\n\n  while (++i < len) {\n    allResolver(iterable[i], i);\n  }\n  return promise;\n  function allResolver(value, i) {\n    self.resolve(value).then(resolveFromAll, function (error) {\n      if (!called) {\n        called = true;\n        handlers.reject(promise, error);\n      }\n    });\n    function resolveFromAll(outValue) {\n      values[i] = outValue;\n      if (++resolved === len && !called) {\n        called = true;\n        handlers.resolve(promise, values);\n      }\n    }\n  }\n}\n\nexports.race = race;\nfunction race(iterable) {\n  var self = this;\n  if (Object.prototype.toString.call(iterable) !== '[object Array]') {\n    return this.reject(new TypeError('must be an array'));\n  }\n\n  var len = iterable.length;\n  var called = false;\n  if (!len) {\n    return this.resolve([]);\n  }\n\n  var i = -1;\n  var promise = new this(INTERNAL);\n\n  while (++i < len) {\n    resolver(iterable[i]);\n  }\n  return promise;\n  function resolver(value) {\n    self.resolve(value).then(function (response) {\n      if (!called) {\n        called = true;\n        handlers.resolve(promise, response);\n      }\n    }, function (error) {\n      if (!called) {\n        called = true;\n        handlers.reject(promise, error);\n      }\n    });\n  }\n}\n\n},{\"1\":1}],3:[function(_dereq_,module,exports){\n(function (global){\n'use strict';\nif (typeof global.Promise !== 'function') {\n  global.Promise = _dereq_(2);\n}\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{\"2\":2}],4:[function(_dereq_,module,exports){\n'use strict';\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction getIDB() {\n    /* global indexedDB,webkitIndexedDB,mozIndexedDB,OIndexedDB,msIndexedDB */\n    try {\n        if (typeof indexedDB !== 'undefined') {\n            return indexedDB;\n        }\n        if (typeof webkitIndexedDB !== 'undefined') {\n            return webkitIndexedDB;\n        }\n        if (typeof mozIndexedDB !== 'undefined') {\n            return mozIndexedDB;\n        }\n        if (typeof OIndexedDB !== 'undefined') {\n            return OIndexedDB;\n        }\n        if (typeof msIndexedDB !== 'undefined') {\n            return msIndexedDB;\n        }\n    } catch (e) {}\n}\n\nvar idb = getIDB();\n\nfunction isIndexedDBValid() {\n    try {\n        // Initialize IndexedDB; fall back to vendor-prefixed versions\n        // if needed.\n        if (!idb) {\n            return false;\n        }\n        // We mimic PouchDB here;\n        //\n        // We test for openDatabase because IE Mobile identifies itself\n        // as Safari. Oh the lulz...\n        var isSafari = typeof openDatabase !== 'undefined' && /(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent) && !/Chrome/.test(navigator.userAgent) && !/BlackBerry/.test(navigator.platform);\n\n        var hasFetch = typeof fetch === 'function' && fetch.toString().indexOf('[native code') !== -1;\n\n        // Safari <10.1 does not meet our requirements for IDB support (#5572)\n        // since Safari 10.1 shipped with fetch, we can use that to detect it\n        return (!isSafari || hasFetch) && typeof indexedDB !== 'undefined' &&\n        // some outdated implementations of IDB that appear on Samsung\n        // and HTC Android devices <4.4 are missing IDBKeyRange\n        typeof IDBKeyRange !== 'undefined';\n    } catch (e) {\n        return false;\n    }\n}\n\nfunction isWebSQLValid() {\n    return typeof openDatabase === 'function';\n}\n\nfunction isLocalStorageValid() {\n    try {\n        return typeof localStorage !== 'undefined' && 'setItem' in localStorage && localStorage.setItem;\n    } catch (e) {\n        return false;\n    }\n}\n\n// Abstracts constructing a Blob object, so it also works in older\n// browsers that don't support the native Blob constructor. (i.e.\n// old QtWebKit versions, at least).\n// Abstracts constructing a Blob object, so it also works in older\n// browsers that don't support the native Blob constructor. (i.e.\n// old QtWebKit versions, at least).\nfunction createBlob(parts, properties) {\n    /* global BlobBuilder,MSBlobBuilder,MozBlobBuilder,WebKitBlobBuilder */\n    parts = parts || [];\n    properties = properties || {};\n    try {\n        return new Blob(parts, properties);\n    } catch (e) {\n        if (e.name !== 'TypeError') {\n            throw e;\n        }\n        var Builder = typeof BlobBuilder !== 'undefined' ? BlobBuilder : typeof MSBlobBuilder !== 'undefined' ? MSBlobBuilder : typeof MozBlobBuilder !== 'undefined' ? MozBlobBuilder : WebKitBlobBuilder;\n        var builder = new Builder();\n        for (var i = 0; i < parts.length; i += 1) {\n            builder.append(parts[i]);\n        }\n        return builder.getBlob(properties.type);\n    }\n}\n\n// This is CommonJS because lie is an external dependency, so Rollup\n// can just ignore it.\nif (typeof Promise === 'undefined') {\n    // In the \"nopromises\" build this will just throw if you don't have\n    // a global promise object, but it would throw anyway later.\n    _dereq_(3);\n}\nvar Promise$1 = Promise;\n\nfunction executeCallback(promise, callback) {\n    if (callback) {\n        promise.then(function (result) {\n            callback(null, result);\n        }, function (error) {\n            callback(error);\n        });\n    }\n}\n\nfunction executeTwoCallbacks(promise, callback, errorCallback) {\n    if (typeof callback === 'function') {\n        promise.then(callback);\n    }\n\n    if (typeof errorCallback === 'function') {\n        promise[\"catch\"](errorCallback);\n    }\n}\n\n// Some code originally from async_storage.js in\n// [Gaia](https://github.com/mozilla-b2g/gaia).\n\nvar DETECT_BLOB_SUPPORT_STORE = 'local-forage-detect-blob-support';\nvar supportsBlobs;\nvar dbContexts;\nvar toString = Object.prototype.toString;\n\n// Transform a binary string to an array buffer, because otherwise\n// weird stuff happens when you try to work with the binary string directly.\n// It is known.\n// From http://stackoverflow.com/questions/14967647/ (continues on next line)\n// encode-decode-image-with-base64-breaks-image (2013-04-21)\nfunction _binStringToArrayBuffer(bin) {\n    var length = bin.length;\n    var buf = new ArrayBuffer(length);\n    var arr = new Uint8Array(buf);\n    for (var i = 0; i < length; i++) {\n        arr[i] = bin.charCodeAt(i);\n    }\n    return buf;\n}\n\n//\n// Blobs are not supported in all versions of IndexedDB, notably\n// Chrome <37 and Android <5. In those versions, storing a blob will throw.\n//\n// Various other blob bugs exist in Chrome v37-42 (inclusive).\n// Detecting them is expensive and confusing to users, and Chrome 37-42\n// is at very low usage worldwide, so we do a hacky userAgent check instead.\n//\n// content-type bug: https://code.google.com/p/chromium/issues/detail?id=408120\n// 404 bug: https://code.google.com/p/chromium/issues/detail?id=447916\n// FileReader bug: https://code.google.com/p/chromium/issues/detail?id=447836\n//\n// Code borrowed from PouchDB. See:\n// https://github.com/pouchdb/pouchdb/blob/master/packages/node_modules/pouchdb-adapter-idb/src/blobSupport.js\n//\nfunction _checkBlobSupportWithoutCaching(idb) {\n    return new Promise$1(function (resolve) {\n        var txn = idb.transaction(DETECT_BLOB_SUPPORT_STORE, 'readwrite');\n        var blob = createBlob(['']);\n        txn.objectStore(DETECT_BLOB_SUPPORT_STORE).put(blob, 'key');\n\n        txn.onabort = function (e) {\n            // If the transaction aborts now its due to not being able to\n            // write to the database, likely due to the disk being full\n            e.preventDefault();\n            e.stopPropagation();\n            resolve(false);\n        };\n\n        txn.oncomplete = function () {\n            var matchedChrome = navigator.userAgent.match(/Chrome\\/(\\d+)/);\n            var matchedEdge = navigator.userAgent.match(/Edge\\//);\n            // MS Edge pretends to be Chrome 42:\n            // https://msdn.microsoft.com/en-us/library/hh869301%28v=vs.85%29.aspx\n            resolve(matchedEdge || !matchedChrome || parseInt(matchedChrome[1], 10) >= 43);\n        };\n    })[\"catch\"](function () {\n        return false; // error, so assume unsupported\n    });\n}\n\nfunction _checkBlobSupport(idb) {\n    if (typeof supportsBlobs === 'boolean') {\n        return Promise$1.resolve(supportsBlobs);\n    }\n    return _checkBlobSupportWithoutCaching(idb).then(function (value) {\n        supportsBlobs = value;\n        return supportsBlobs;\n    });\n}\n\nfunction _deferReadiness(dbInfo) {\n    var dbContext = dbContexts[dbInfo.name];\n\n    // Create a deferred object representing the current database operation.\n    var deferredOperation = {};\n\n    deferredOperation.promise = new Promise$1(function (resolve) {\n        deferredOperation.resolve = resolve;\n    });\n\n    // Enqueue the deferred operation.\n    dbContext.deferredOperations.push(deferredOperation);\n\n    // Chain its promise to the database readiness.\n    if (!dbContext.dbReady) {\n        dbContext.dbReady = deferredOperation.promise;\n    } else {\n        dbContext.dbReady = dbContext.dbReady.then(function () {\n            return deferredOperation.promise;\n        });\n    }\n}\n\nfunction _advanceReadiness(dbInfo) {\n    var dbContext = dbContexts[dbInfo.name];\n\n    // Dequeue a deferred operation.\n    var deferredOperation = dbContext.deferredOperations.pop();\n\n    // Resolve its promise (which is part of the database readiness\n    // chain of promises).\n    if (deferredOperation) {\n        deferredOperation.resolve();\n    }\n}\n\nfunction _getConnection(dbInfo, upgradeNeeded) {\n    return new Promise$1(function (resolve, reject) {\n\n        if (dbInfo.db) {\n            if (upgradeNeeded) {\n                _deferReadiness(dbInfo);\n                dbInfo.db.close();\n            } else {\n                return resolve(dbInfo.db);\n            }\n        }\n\n        var dbArgs = [dbInfo.name];\n\n        if (upgradeNeeded) {\n            dbArgs.push(dbInfo.version);\n        }\n\n        var openreq = idb.open.apply(idb, dbArgs);\n\n        if (upgradeNeeded) {\n            openreq.onupgradeneeded = function (e) {\n                var db = openreq.result;\n                try {\n                    db.createObjectStore(dbInfo.storeName);\n                    if (e.oldVersion <= 1) {\n                        // Added when support for blob shims was added\n                        db.createObjectStore(DETECT_BLOB_SUPPORT_STORE);\n                    }\n                } catch (ex) {\n                    if (ex.name === 'ConstraintError') {\n                        console.warn('The database \"' + dbInfo.name + '\"' + ' has been upgraded from version ' + e.oldVersion + ' to version ' + e.newVersion + ', but the storage \"' + dbInfo.storeName + '\" already exists.');\n                    } else {\n                        throw ex;\n                    }\n                }\n            };\n        }\n\n        openreq.onerror = function (e) {\n            e.preventDefault();\n            reject(openreq.error);\n        };\n\n        openreq.onsuccess = function () {\n            resolve(openreq.result);\n            _advanceReadiness(dbInfo);\n        };\n    });\n}\n\nfunction _getOriginalConnection(dbInfo) {\n    return _getConnection(dbInfo, false);\n}\n\nfunction _getUpgradedConnection(dbInfo) {\n    return _getConnection(dbInfo, true);\n}\n\nfunction _isUpgradeNeeded(dbInfo, defaultVersion) {\n    if (!dbInfo.db) {\n        return true;\n    }\n\n    var isNewStore = !dbInfo.db.objectStoreNames.contains(dbInfo.storeName);\n    var isDowngrade = dbInfo.version < dbInfo.db.version;\n    var isUpgrade = dbInfo.version > dbInfo.db.version;\n\n    if (isDowngrade) {\n        // If the version is not the default one\n        // then warn for impossible downgrade.\n        if (dbInfo.version !== defaultVersion) {\n            console.warn('The database \"' + dbInfo.name + '\"' + ' can\\'t be downgraded from version ' + dbInfo.db.version + ' to version ' + dbInfo.version + '.');\n        }\n        // Align the versions to prevent errors.\n        dbInfo.version = dbInfo.db.version;\n    }\n\n    if (isUpgrade || isNewStore) {\n        // If the store is new then increment the version (if needed).\n        // This will trigger an \"upgradeneeded\" event which is required\n        // for creating a store.\n        if (isNewStore) {\n            var incVersion = dbInfo.db.version + 1;\n            if (incVersion > dbInfo.version) {\n                dbInfo.version = incVersion;\n            }\n        }\n\n        return true;\n    }\n\n    return false;\n}\n\n// encode a blob for indexeddb engines that don't support blobs\nfunction _encodeBlob(blob) {\n    return new Promise$1(function (resolve, reject) {\n        var reader = new FileReader();\n        reader.onerror = reject;\n        reader.onloadend = function (e) {\n            var base64 = btoa(e.target.result || '');\n            resolve({\n                __local_forage_encoded_blob: true,\n                data: base64,\n                type: blob.type\n            });\n        };\n        reader.readAsBinaryString(blob);\n    });\n}\n\n// decode an encoded blob\nfunction _decodeBlob(encodedBlob) {\n    var arrayBuff = _binStringToArrayBuffer(atob(encodedBlob.data));\n    return createBlob([arrayBuff], { type: encodedBlob.type });\n}\n\n// is this one of our fancy encoded blobs?\nfunction _isEncodedBlob(value) {\n    return value && value.__local_forage_encoded_blob;\n}\n\n// Specialize the default `ready()` function by making it dependent\n// on the current database operations. Thus, the driver will be actually\n// ready when it's been initialized (default) *and* there are no pending\n// operations on the database (initiated by some other instances).\nfunction _fullyReady(callback) {\n    var self = this;\n\n    var promise = self._initReady().then(function () {\n        var dbContext = dbContexts[self._dbInfo.name];\n\n        if (dbContext && dbContext.dbReady) {\n            return dbContext.dbReady;\n        }\n    });\n\n    executeTwoCallbacks(promise, callback, callback);\n    return promise;\n}\n\n// Open the IndexedDB database (automatically creates one if one didn't\n// previously exist), using any options set in the config.\nfunction _initStorage(options) {\n    var self = this;\n    var dbInfo = {\n        db: null\n    };\n\n    if (options) {\n        for (var i in options) {\n            dbInfo[i] = options[i];\n        }\n    }\n\n    // Initialize a singleton container for all running localForages.\n    if (!dbContexts) {\n        dbContexts = {};\n    }\n\n    // Get the current context of the database;\n    var dbContext = dbContexts[dbInfo.name];\n\n    // ...or create a new context.\n    if (!dbContext) {\n        dbContext = {\n            // Running localForages sharing a database.\n            forages: [],\n            // Shared database.\n            db: null,\n            // Database readiness (promise).\n            dbReady: null,\n            // Deferred operations on the database.\n            deferredOperations: []\n        };\n        // Register the new context in the global container.\n        dbContexts[dbInfo.name] = dbContext;\n    }\n\n    // Register itself as a running localForage in the current context.\n    dbContext.forages.push(self);\n\n    // Replace the default `ready()` function with the specialized one.\n    if (!self._initReady) {\n        self._initReady = self.ready;\n        self.ready = _fullyReady;\n    }\n\n    // Create an array of initialization states of the related localForages.\n    var initPromises = [];\n\n    function ignoreErrors() {\n        // Don't handle errors here,\n        // just makes sure related localForages aren't pending.\n        return Promise$1.resolve();\n    }\n\n    for (var j = 0; j < dbContext.forages.length; j++) {\n        var forage = dbContext.forages[j];\n        if (forage !== self) {\n            // Don't wait for itself...\n            initPromises.push(forage._initReady()[\"catch\"](ignoreErrors));\n        }\n    }\n\n    // Take a snapshot of the related localForages.\n    var forages = dbContext.forages.slice(0);\n\n    // Initialize the connection process only when\n    // all the related localForages aren't pending.\n    return Promise$1.all(initPromises).then(function () {\n        dbInfo.db = dbContext.db;\n        // Get the connection or open a new one without upgrade.\n        return _getOriginalConnection(dbInfo);\n    }).then(function (db) {\n        dbInfo.db = db;\n        if (_isUpgradeNeeded(dbInfo, self._defaultConfig.version)) {\n            // Reopen the database for upgrading.\n            return _getUpgradedConnection(dbInfo);\n        }\n        return db;\n    }).then(function (db) {\n        dbInfo.db = dbContext.db = db;\n        self._dbInfo = dbInfo;\n        // Share the final connection amongst related localForages.\n        for (var k = 0; k < forages.length; k++) {\n            var forage = forages[k];\n            if (forage !== self) {\n                // Self is already up-to-date.\n                forage._dbInfo.db = dbInfo.db;\n                forage._dbInfo.version = dbInfo.version;\n            }\n        }\n    });\n}\n\nfunction getItem(key, callback) {\n    var self = this;\n\n    // Cast the key to a string, as that's all we can set as a key.\n    if (typeof key !== 'string') {\n        console.warn(key + ' used as a key, but it is not a string.');\n        key = String(key);\n    }\n\n    var promise = new Promise$1(function (resolve, reject) {\n        self.ready().then(function () {\n            var dbInfo = self._dbInfo;\n            var store = dbInfo.db.transaction(dbInfo.storeName, 'readonly').objectStore(dbInfo.storeName);\n            var req = store.get(key);\n\n            req.onsuccess = function () {\n                var value = req.result;\n                if (value === undefined) {\n                    value = null;\n                }\n                if (_isEncodedBlob(value)) {\n                    value = _decodeBlob(value);\n                }\n                resolve(value);\n            };\n\n            req.onerror = function () {\n                reject(req.error);\n            };\n        })[\"catch\"](reject);\n    });\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\n// Iterate over all items stored in database.\nfunction iterate(iterator, callback) {\n    var self = this;\n\n    var promise = new Promise$1(function (resolve, reject) {\n        self.ready().then(function () {\n            var dbInfo = self._dbInfo;\n            var store = dbInfo.db.transaction(dbInfo.storeName, 'readonly').objectStore(dbInfo.storeName);\n\n            var req = store.openCursor();\n            var iterationNumber = 1;\n\n            req.onsuccess = function () {\n                var cursor = req.result;\n\n                if (cursor) {\n                    var value = cursor.value;\n                    if (_isEncodedBlob(value)) {\n                        value = _decodeBlob(value);\n                    }\n                    var result = iterator(value, cursor.key, iterationNumber++);\n\n                    if (result !== void 0) {\n                        resolve(result);\n                    } else {\n                        cursor[\"continue\"]();\n                    }\n                } else {\n                    resolve();\n                }\n            };\n\n            req.onerror = function () {\n                reject(req.error);\n            };\n        })[\"catch\"](reject);\n    });\n\n    executeCallback(promise, callback);\n\n    return promise;\n}\n\nfunction setItem(key, value, callback) {\n    var self = this;\n\n    // Cast the key to a string, as that's all we can set as a key.\n    if (typeof key !== 'string') {\n        console.warn(key + ' used as a key, but it is not a string.');\n        key = String(key);\n    }\n\n    var promise = new Promise$1(function (resolve, reject) {\n        var dbInfo;\n        self.ready().then(function () {\n            dbInfo = self._dbInfo;\n            if (toString.call(value) === '[object Blob]') {\n                return _checkBlobSupport(dbInfo.db).then(function (blobSupport) {\n                    if (blobSupport) {\n                        return value;\n                    }\n                    return _encodeBlob(value);\n                });\n            }\n            return value;\n        }).then(function (value) {\n            var transaction = dbInfo.db.transaction(dbInfo.storeName, 'readwrite');\n            var store = transaction.objectStore(dbInfo.storeName);\n            var req = store.put(value, key);\n\n            // The reason we don't _save_ null is because IE 10 does\n            // not support saving the `null` type in IndexedDB. How\n            // ironic, given the bug below!\n            // See: https://github.com/mozilla/localForage/issues/161\n            if (value === null) {\n                value = undefined;\n            }\n\n            transaction.oncomplete = function () {\n                // Cast to undefined so the value passed to\n                // callback/promise is the same as what one would get out\n                // of `getItem()` later. This leads to some weirdness\n                // (setItem('foo', undefined) will return `null`), but\n                // it's not my fault localStorage is our baseline and that\n                // it's weird.\n                if (value === undefined) {\n                    value = null;\n                }\n\n                resolve(value);\n            };\n            transaction.onabort = transaction.onerror = function () {\n                var err = req.error ? req.error : req.transaction.error;\n                reject(err);\n            };\n        })[\"catch\"](reject);\n    });\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\nfunction removeItem(key, callback) {\n    var self = this;\n\n    // Cast the key to a string, as that's all we can set as a key.\n    if (typeof key !== 'string') {\n        console.warn(key + ' used as a key, but it is not a string.');\n        key = String(key);\n    }\n\n    var promise = new Promise$1(function (resolve, reject) {\n        self.ready().then(function () {\n            var dbInfo = self._dbInfo;\n            var transaction = dbInfo.db.transaction(dbInfo.storeName, 'readwrite');\n            var store = transaction.objectStore(dbInfo.storeName);\n\n            // We use a Grunt task to make this safe for IE and some\n            // versions of Android (including those used by Cordova).\n            // Normally IE won't like `.delete()` and will insist on\n            // using `['delete']()`, but we have a build step that\n            // fixes this for us now.\n            var req = store[\"delete\"](key);\n            transaction.oncomplete = function () {\n                resolve();\n            };\n\n            transaction.onerror = function () {\n                reject(req.error);\n            };\n\n            // The request will be also be aborted if we've exceeded our storage\n            // space.\n            transaction.onabort = function () {\n                var err = req.error ? req.error : req.transaction.error;\n                reject(err);\n            };\n        })[\"catch\"](reject);\n    });\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\nfunction clear(callback) {\n    var self = this;\n\n    var promise = new Promise$1(function (resolve, reject) {\n        self.ready().then(function () {\n            var dbInfo = self._dbInfo;\n            var transaction = dbInfo.db.transaction(dbInfo.storeName, 'readwrite');\n            var store = transaction.objectStore(dbInfo.storeName);\n            var req = store.clear();\n\n            transaction.oncomplete = function () {\n                resolve();\n            };\n\n            transaction.onabort = transaction.onerror = function () {\n                var err = req.error ? req.error : req.transaction.error;\n                reject(err);\n            };\n        })[\"catch\"](reject);\n    });\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\nfunction length(callback) {\n    var self = this;\n\n    var promise = new Promise$1(function (resolve, reject) {\n        self.ready().then(function () {\n            var dbInfo = self._dbInfo;\n            var store = dbInfo.db.transaction(dbInfo.storeName, 'readonly').objectStore(dbInfo.storeName);\n            var req = store.count();\n\n            req.onsuccess = function () {\n                resolve(req.result);\n            };\n\n            req.onerror = function () {\n                reject(req.error);\n            };\n        })[\"catch\"](reject);\n    });\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\nfunction key(n, callback) {\n    var self = this;\n\n    var promise = new Promise$1(function (resolve, reject) {\n        if (n < 0) {\n            resolve(null);\n\n            return;\n        }\n\n        self.ready().then(function () {\n            var dbInfo = self._dbInfo;\n            var store = dbInfo.db.transaction(dbInfo.storeName, 'readonly').objectStore(dbInfo.storeName);\n\n            var advanced = false;\n            var req = store.openCursor();\n            req.onsuccess = function () {\n                var cursor = req.result;\n                if (!cursor) {\n                    // this means there weren't enough keys\n                    resolve(null);\n\n                    return;\n                }\n\n                if (n === 0) {\n                    // We have the first key, return it if that's what they\n                    // wanted.\n                    resolve(cursor.key);\n                } else {\n                    if (!advanced) {\n                        // Otherwise, ask the cursor to skip ahead n\n                        // records.\n                        advanced = true;\n                        cursor.advance(n);\n                    } else {\n                        // When we get here, we've got the nth key.\n                        resolve(cursor.key);\n                    }\n                }\n            };\n\n            req.onerror = function () {\n                reject(req.error);\n            };\n        })[\"catch\"](reject);\n    });\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\nfunction keys(callback) {\n    var self = this;\n\n    var promise = new Promise$1(function (resolve, reject) {\n        self.ready().then(function () {\n            var dbInfo = self._dbInfo;\n            var store = dbInfo.db.transaction(dbInfo.storeName, 'readonly').objectStore(dbInfo.storeName);\n\n            var req = store.openCursor();\n            var keys = [];\n\n            req.onsuccess = function () {\n                var cursor = req.result;\n\n                if (!cursor) {\n                    resolve(keys);\n                    return;\n                }\n\n                keys.push(cursor.key);\n                cursor[\"continue\"]();\n            };\n\n            req.onerror = function () {\n                reject(req.error);\n            };\n        })[\"catch\"](reject);\n    });\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\nvar asyncStorage = {\n    _driver: 'asyncStorage',\n    _initStorage: _initStorage,\n    iterate: iterate,\n    getItem: getItem,\n    setItem: setItem,\n    removeItem: removeItem,\n    clear: clear,\n    length: length,\n    key: key,\n    keys: keys\n};\n\n// Sadly, the best way to save binary data in WebSQL/localStorage is serializing\n// it to Base64, so this is how we store it to prevent very strange errors with less\n// verbose ways of binary <-> string data storage.\nvar BASE_CHARS = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\n\nvar BLOB_TYPE_PREFIX = '~~local_forage_type~';\nvar BLOB_TYPE_PREFIX_REGEX = /^~~local_forage_type~([^~]+)~/;\n\nvar SERIALIZED_MARKER = '__lfsc__:';\nvar SERIALIZED_MARKER_LENGTH = SERIALIZED_MARKER.length;\n\n// OMG the serializations!\nvar TYPE_ARRAYBUFFER = 'arbf';\nvar TYPE_BLOB = 'blob';\nvar TYPE_INT8ARRAY = 'si08';\nvar TYPE_UINT8ARRAY = 'ui08';\nvar TYPE_UINT8CLAMPEDARRAY = 'uic8';\nvar TYPE_INT16ARRAY = 'si16';\nvar TYPE_INT32ARRAY = 'si32';\nvar TYPE_UINT16ARRAY = 'ur16';\nvar TYPE_UINT32ARRAY = 'ui32';\nvar TYPE_FLOAT32ARRAY = 'fl32';\nvar TYPE_FLOAT64ARRAY = 'fl64';\nvar TYPE_SERIALIZED_MARKER_LENGTH = SERIALIZED_MARKER_LENGTH + TYPE_ARRAYBUFFER.length;\n\nvar toString$1 = Object.prototype.toString;\n\nfunction stringToBuffer(serializedString) {\n    // Fill the string into a ArrayBuffer.\n    var bufferLength = serializedString.length * 0.75;\n    var len = serializedString.length;\n    var i;\n    var p = 0;\n    var encoded1, encoded2, encoded3, encoded4;\n\n    if (serializedString[serializedString.length - 1] === '=') {\n        bufferLength--;\n        if (serializedString[serializedString.length - 2] === '=') {\n            bufferLength--;\n        }\n    }\n\n    var buffer = new ArrayBuffer(bufferLength);\n    var bytes = new Uint8Array(buffer);\n\n    for (i = 0; i < len; i += 4) {\n        encoded1 = BASE_CHARS.indexOf(serializedString[i]);\n        encoded2 = BASE_CHARS.indexOf(serializedString[i + 1]);\n        encoded3 = BASE_CHARS.indexOf(serializedString[i + 2]);\n        encoded4 = BASE_CHARS.indexOf(serializedString[i + 3]);\n\n        /*jslint bitwise: true */\n        bytes[p++] = encoded1 << 2 | encoded2 >> 4;\n        bytes[p++] = (encoded2 & 15) << 4 | encoded3 >> 2;\n        bytes[p++] = (encoded3 & 3) << 6 | encoded4 & 63;\n    }\n    return buffer;\n}\n\n// Converts a buffer to a string to store, serialized, in the backend\n// storage library.\nfunction bufferToString(buffer) {\n    // base64-arraybuffer\n    var bytes = new Uint8Array(buffer);\n    var base64String = '';\n    var i;\n\n    for (i = 0; i < bytes.length; i += 3) {\n        /*jslint bitwise: true */\n        base64String += BASE_CHARS[bytes[i] >> 2];\n        base64String += BASE_CHARS[(bytes[i] & 3) << 4 | bytes[i + 1] >> 4];\n        base64String += BASE_CHARS[(bytes[i + 1] & 15) << 2 | bytes[i + 2] >> 6];\n        base64String += BASE_CHARS[bytes[i + 2] & 63];\n    }\n\n    if (bytes.length % 3 === 2) {\n        base64String = base64String.substring(0, base64String.length - 1) + '=';\n    } else if (bytes.length % 3 === 1) {\n        base64String = base64String.substring(0, base64String.length - 2) + '==';\n    }\n\n    return base64String;\n}\n\n// Serialize a value, afterwards executing a callback (which usually\n// instructs the `setItem()` callback/promise to be executed). This is how\n// we store binary data with localStorage.\nfunction serialize(value, callback) {\n    var valueType = '';\n    if (value) {\n        valueType = toString$1.call(value);\n    }\n\n    // Cannot use `value instanceof ArrayBuffer` or such here, as these\n    // checks fail when running the tests using casper.js...\n    //\n    // TODO: See why those tests fail and use a better solution.\n    if (value && (valueType === '[object ArrayBuffer]' || value.buffer && toString$1.call(value.buffer) === '[object ArrayBuffer]')) {\n        // Convert binary arrays to a string and prefix the string with\n        // a special marker.\n        var buffer;\n        var marker = SERIALIZED_MARKER;\n\n        if (value instanceof ArrayBuffer) {\n            buffer = value;\n            marker += TYPE_ARRAYBUFFER;\n        } else {\n            buffer = value.buffer;\n\n            if (valueType === '[object Int8Array]') {\n                marker += TYPE_INT8ARRAY;\n            } else if (valueType === '[object Uint8Array]') {\n                marker += TYPE_UINT8ARRAY;\n            } else if (valueType === '[object Uint8ClampedArray]') {\n                marker += TYPE_UINT8CLAMPEDARRAY;\n            } else if (valueType === '[object Int16Array]') {\n                marker += TYPE_INT16ARRAY;\n            } else if (valueType === '[object Uint16Array]') {\n                marker += TYPE_UINT16ARRAY;\n            } else if (valueType === '[object Int32Array]') {\n                marker += TYPE_INT32ARRAY;\n            } else if (valueType === '[object Uint32Array]') {\n                marker += TYPE_UINT32ARRAY;\n            } else if (valueType === '[object Float32Array]') {\n                marker += TYPE_FLOAT32ARRAY;\n            } else if (valueType === '[object Float64Array]') {\n                marker += TYPE_FLOAT64ARRAY;\n            } else {\n                callback(new Error('Failed to get type for BinaryArray'));\n            }\n        }\n\n        callback(marker + bufferToString(buffer));\n    } else if (valueType === '[object Blob]') {\n        // Conver the blob to a binaryArray and then to a string.\n        var fileReader = new FileReader();\n\n        fileReader.onload = function () {\n            // Backwards-compatible prefix for the blob type.\n            var str = BLOB_TYPE_PREFIX + value.type + '~' + bufferToString(this.result);\n\n            callback(SERIALIZED_MARKER + TYPE_BLOB + str);\n        };\n\n        fileReader.readAsArrayBuffer(value);\n    } else {\n        try {\n            callback(JSON.stringify(value));\n        } catch (e) {\n            console.error(\"Couldn't convert value into a JSON string: \", value);\n\n            callback(null, e);\n        }\n    }\n}\n\n// Deserialize data we've inserted into a value column/field. We place\n// special markers into our strings to mark them as encoded; this isn't\n// as nice as a meta field, but it's the only sane thing we can do whilst\n// keeping localStorage support intact.\n//\n// Oftentimes this will just deserialize JSON content, but if we have a\n// special marker (SERIALIZED_MARKER, defined above), we will extract\n// some kind of arraybuffer/binary data/typed array out of the string.\nfunction deserialize(value) {\n    // If we haven't marked this string as being specially serialized (i.e.\n    // something other than serialized JSON), we can just return it and be\n    // done with it.\n    if (value.substring(0, SERIALIZED_MARKER_LENGTH) !== SERIALIZED_MARKER) {\n        return JSON.parse(value);\n    }\n\n    // The following code deals with deserializing some kind of Blob or\n    // TypedArray. First we separate out the type of data we're dealing\n    // with from the data itself.\n    var serializedString = value.substring(TYPE_SERIALIZED_MARKER_LENGTH);\n    var type = value.substring(SERIALIZED_MARKER_LENGTH, TYPE_SERIALIZED_MARKER_LENGTH);\n\n    var blobType;\n    // Backwards-compatible blob type serialization strategy.\n    // DBs created with older versions of localForage will simply not have the blob type.\n    if (type === TYPE_BLOB && BLOB_TYPE_PREFIX_REGEX.test(serializedString)) {\n        var matcher = serializedString.match(BLOB_TYPE_PREFIX_REGEX);\n        blobType = matcher[1];\n        serializedString = serializedString.substring(matcher[0].length);\n    }\n    var buffer = stringToBuffer(serializedString);\n\n    // Return the right type based on the code/type set during\n    // serialization.\n    switch (type) {\n        case TYPE_ARRAYBUFFER:\n            return buffer;\n        case TYPE_BLOB:\n            return createBlob([buffer], { type: blobType });\n        case TYPE_INT8ARRAY:\n            return new Int8Array(buffer);\n        case TYPE_UINT8ARRAY:\n            return new Uint8Array(buffer);\n        case TYPE_UINT8CLAMPEDARRAY:\n            return new Uint8ClampedArray(buffer);\n        case TYPE_INT16ARRAY:\n            return new Int16Array(buffer);\n        case TYPE_UINT16ARRAY:\n            return new Uint16Array(buffer);\n        case TYPE_INT32ARRAY:\n            return new Int32Array(buffer);\n        case TYPE_UINT32ARRAY:\n            return new Uint32Array(buffer);\n        case TYPE_FLOAT32ARRAY:\n            return new Float32Array(buffer);\n        case TYPE_FLOAT64ARRAY:\n            return new Float64Array(buffer);\n        default:\n            throw new Error('Unkown type: ' + type);\n    }\n}\n\nvar localforageSerializer = {\n    serialize: serialize,\n    deserialize: deserialize,\n    stringToBuffer: stringToBuffer,\n    bufferToString: bufferToString\n};\n\n/*\n * Includes code from:\n *\n * base64-arraybuffer\n * https://github.com/niklasvh/base64-arraybuffer\n *\n * Copyright (c) 2012 Niklas von Hertzen\n * Licensed under the MIT license.\n */\n// Open the WebSQL database (automatically creates one if one didn't\n// previously exist), using any options set in the config.\nfunction _initStorage$1(options) {\n    var self = this;\n    var dbInfo = {\n        db: null\n    };\n\n    if (options) {\n        for (var i in options) {\n            dbInfo[i] = typeof options[i] !== 'string' ? options[i].toString() : options[i];\n        }\n    }\n\n    var dbInfoPromise = new Promise$1(function (resolve, reject) {\n        // Open the database; the openDatabase API will automatically\n        // create it for us if it doesn't exist.\n        try {\n            dbInfo.db = openDatabase(dbInfo.name, String(dbInfo.version), dbInfo.description, dbInfo.size);\n        } catch (e) {\n            return reject(e);\n        }\n\n        // Create our key/value table if it doesn't exist.\n        dbInfo.db.transaction(function (t) {\n            t.executeSql('CREATE TABLE IF NOT EXISTS ' + dbInfo.storeName + ' (id INTEGER PRIMARY KEY, key unique, value)', [], function () {\n                self._dbInfo = dbInfo;\n                resolve();\n            }, function (t, error) {\n                reject(error);\n            });\n        });\n    });\n\n    dbInfo.serializer = localforageSerializer;\n    return dbInfoPromise;\n}\n\nfunction getItem$1(key, callback) {\n    var self = this;\n\n    // Cast the key to a string, as that's all we can set as a key.\n    if (typeof key !== 'string') {\n        console.warn(key + ' used as a key, but it is not a string.');\n        key = String(key);\n    }\n\n    var promise = new Promise$1(function (resolve, reject) {\n        self.ready().then(function () {\n            var dbInfo = self._dbInfo;\n            dbInfo.db.transaction(function (t) {\n                t.executeSql('SELECT * FROM ' + dbInfo.storeName + ' WHERE key = ? LIMIT 1', [key], function (t, results) {\n                    var result = results.rows.length ? results.rows.item(0).value : null;\n\n                    // Check to see if this is serialized content we need to\n                    // unpack.\n                    if (result) {\n                        result = dbInfo.serializer.deserialize(result);\n                    }\n\n                    resolve(result);\n                }, function (t, error) {\n\n                    reject(error);\n                });\n            });\n        })[\"catch\"](reject);\n    });\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\nfunction iterate$1(iterator, callback) {\n    var self = this;\n\n    var promise = new Promise$1(function (resolve, reject) {\n        self.ready().then(function () {\n            var dbInfo = self._dbInfo;\n\n            dbInfo.db.transaction(function (t) {\n                t.executeSql('SELECT * FROM ' + dbInfo.storeName, [], function (t, results) {\n                    var rows = results.rows;\n                    var length = rows.length;\n\n                    for (var i = 0; i < length; i++) {\n                        var item = rows.item(i);\n                        var result = item.value;\n\n                        // Check to see if this is serialized content\n                        // we need to unpack.\n                        if (result) {\n                            result = dbInfo.serializer.deserialize(result);\n                        }\n\n                        result = iterator(result, item.key, i + 1);\n\n                        // void(0) prevents problems with redefinition\n                        // of `undefined`.\n                        if (result !== void 0) {\n                            resolve(result);\n                            return;\n                        }\n                    }\n\n                    resolve();\n                }, function (t, error) {\n                    reject(error);\n                });\n            });\n        })[\"catch\"](reject);\n    });\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\nfunction _setItem(key, value, callback, retriesLeft) {\n    var self = this;\n\n    // Cast the key to a string, as that's all we can set as a key.\n    if (typeof key !== 'string') {\n        console.warn(key + ' used as a key, but it is not a string.');\n        key = String(key);\n    }\n\n    var promise = new Promise$1(function (resolve, reject) {\n        self.ready().then(function () {\n            // The localStorage API doesn't return undefined values in an\n            // \"expected\" way, so undefined is always cast to null in all\n            // drivers. See: https://github.com/mozilla/localForage/pull/42\n            if (value === undefined) {\n                value = null;\n            }\n\n            // Save the original value to pass to the callback.\n            var originalValue = value;\n\n            var dbInfo = self._dbInfo;\n            dbInfo.serializer.serialize(value, function (value, error) {\n                if (error) {\n                    reject(error);\n                } else {\n                    dbInfo.db.transaction(function (t) {\n                        t.executeSql('INSERT OR REPLACE INTO ' + dbInfo.storeName + ' (key, value) VALUES (?, ?)', [key, value], function () {\n                            resolve(originalValue);\n                        }, function (t, error) {\n                            reject(error);\n                        });\n                    }, function (sqlError) {\n                        // The transaction failed; check\n                        // to see if it's a quota error.\n                        if (sqlError.code === sqlError.QUOTA_ERR) {\n                            // We reject the callback outright for now, but\n                            // it's worth trying to re-run the transaction.\n                            // Even if the user accepts the prompt to use\n                            // more storage on Safari, this error will\n                            // be called.\n                            //\n                            // Try to re-run the transaction.\n                            if (retriesLeft > 0) {\n                                resolve(_setItem.apply(self, [key, originalValue, callback, retriesLeft - 1]));\n                                return;\n                            }\n                            reject(sqlError);\n                        }\n                    });\n                }\n            });\n        })[\"catch\"](reject);\n    });\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\nfunction setItem$1(key, value, callback) {\n    return _setItem.apply(this, [key, value, callback, 1]);\n}\n\nfunction removeItem$1(key, callback) {\n    var self = this;\n\n    // Cast the key to a string, as that's all we can set as a key.\n    if (typeof key !== 'string') {\n        console.warn(key + ' used as a key, but it is not a string.');\n        key = String(key);\n    }\n\n    var promise = new Promise$1(function (resolve, reject) {\n        self.ready().then(function () {\n            var dbInfo = self._dbInfo;\n            dbInfo.db.transaction(function (t) {\n                t.executeSql('DELETE FROM ' + dbInfo.storeName + ' WHERE key = ?', [key], function () {\n                    resolve();\n                }, function (t, error) {\n\n                    reject(error);\n                });\n            });\n        })[\"catch\"](reject);\n    });\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\n// Deletes every item in the table.\n// TODO: Find out if this resets the AUTO_INCREMENT number.\nfunction clear$1(callback) {\n    var self = this;\n\n    var promise = new Promise$1(function (resolve, reject) {\n        self.ready().then(function () {\n            var dbInfo = self._dbInfo;\n            dbInfo.db.transaction(function (t) {\n                t.executeSql('DELETE FROM ' + dbInfo.storeName, [], function () {\n                    resolve();\n                }, function (t, error) {\n                    reject(error);\n                });\n            });\n        })[\"catch\"](reject);\n    });\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\n// Does a simple `COUNT(key)` to get the number of items stored in\n// localForage.\nfunction length$1(callback) {\n    var self = this;\n\n    var promise = new Promise$1(function (resolve, reject) {\n        self.ready().then(function () {\n            var dbInfo = self._dbInfo;\n            dbInfo.db.transaction(function (t) {\n                // Ahhh, SQL makes this one soooooo easy.\n                t.executeSql('SELECT COUNT(key) as c FROM ' + dbInfo.storeName, [], function (t, results) {\n                    var result = results.rows.item(0).c;\n\n                    resolve(result);\n                }, function (t, error) {\n\n                    reject(error);\n                });\n            });\n        })[\"catch\"](reject);\n    });\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\n// Return the key located at key index X; essentially gets the key from a\n// `WHERE id = ?`. This is the most efficient way I can think to implement\n// this rarely-used (in my experience) part of the API, but it can seem\n// inconsistent, because we do `INSERT OR REPLACE INTO` on `setItem()`, so\n// the ID of each key will change every time it's updated. Perhaps a stored\n// procedure for the `setItem()` SQL would solve this problem?\n// TODO: Don't change ID on `setItem()`.\nfunction key$1(n, callback) {\n    var self = this;\n\n    var promise = new Promise$1(function (resolve, reject) {\n        self.ready().then(function () {\n            var dbInfo = self._dbInfo;\n            dbInfo.db.transaction(function (t) {\n                t.executeSql('SELECT key FROM ' + dbInfo.storeName + ' WHERE id = ? LIMIT 1', [n + 1], function (t, results) {\n                    var result = results.rows.length ? results.rows.item(0).key : null;\n                    resolve(result);\n                }, function (t, error) {\n                    reject(error);\n                });\n            });\n        })[\"catch\"](reject);\n    });\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\nfunction keys$1(callback) {\n    var self = this;\n\n    var promise = new Promise$1(function (resolve, reject) {\n        self.ready().then(function () {\n            var dbInfo = self._dbInfo;\n            dbInfo.db.transaction(function (t) {\n                t.executeSql('SELECT key FROM ' + dbInfo.storeName, [], function (t, results) {\n                    var keys = [];\n\n                    for (var i = 0; i < results.rows.length; i++) {\n                        keys.push(results.rows.item(i).key);\n                    }\n\n                    resolve(keys);\n                }, function (t, error) {\n\n                    reject(error);\n                });\n            });\n        })[\"catch\"](reject);\n    });\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\nvar webSQLStorage = {\n    _driver: 'webSQLStorage',\n    _initStorage: _initStorage$1,\n    iterate: iterate$1,\n    getItem: getItem$1,\n    setItem: setItem$1,\n    removeItem: removeItem$1,\n    clear: clear$1,\n    length: length$1,\n    key: key$1,\n    keys: keys$1\n};\n\n// Config the localStorage backend, using options set in the config.\nfunction _initStorage$2(options) {\n    var self = this;\n    var dbInfo = {};\n    if (options) {\n        for (var i in options) {\n            dbInfo[i] = options[i];\n        }\n    }\n\n    dbInfo.keyPrefix = dbInfo.name + '/';\n\n    if (dbInfo.storeName !== self._defaultConfig.storeName) {\n        dbInfo.keyPrefix += dbInfo.storeName + '/';\n    }\n\n    self._dbInfo = dbInfo;\n    dbInfo.serializer = localforageSerializer;\n\n    return Promise$1.resolve();\n}\n\n// Remove all keys from the datastore, effectively destroying all data in\n// the app's key/value store!\nfunction clear$2(callback) {\n    var self = this;\n    var promise = self.ready().then(function () {\n        var keyPrefix = self._dbInfo.keyPrefix;\n\n        for (var i = localStorage.length - 1; i >= 0; i--) {\n            var key = localStorage.key(i);\n\n            if (key.indexOf(keyPrefix) === 0) {\n                localStorage.removeItem(key);\n            }\n        }\n    });\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\n// Retrieve an item from the store. Unlike the original async_storage\n// library in Gaia, we don't modify return values at all. If a key's value\n// is `undefined`, we pass that value to the callback function.\nfunction getItem$2(key, callback) {\n    var self = this;\n\n    // Cast the key to a string, as that's all we can set as a key.\n    if (typeof key !== 'string') {\n        console.warn(key + ' used as a key, but it is not a string.');\n        key = String(key);\n    }\n\n    var promise = self.ready().then(function () {\n        var dbInfo = self._dbInfo;\n        var result = localStorage.getItem(dbInfo.keyPrefix + key);\n\n        // If a result was found, parse it from the serialized\n        // string into a JS object. If result isn't truthy, the key\n        // is likely undefined and we'll pass it straight to the\n        // callback.\n        if (result) {\n            result = dbInfo.serializer.deserialize(result);\n        }\n\n        return result;\n    });\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\n// Iterate over all items in the store.\nfunction iterate$2(iterator, callback) {\n    var self = this;\n\n    var promise = self.ready().then(function () {\n        var dbInfo = self._dbInfo;\n        var keyPrefix = dbInfo.keyPrefix;\n        var keyPrefixLength = keyPrefix.length;\n        var length = localStorage.length;\n\n        // We use a dedicated iterator instead of the `i` variable below\n        // so other keys we fetch in localStorage aren't counted in\n        // the `iterationNumber` argument passed to the `iterate()`\n        // callback.\n        //\n        // See: github.com/mozilla/localForage/pull/435#discussion_r38061530\n        var iterationNumber = 1;\n\n        for (var i = 0; i < length; i++) {\n            var key = localStorage.key(i);\n            if (key.indexOf(keyPrefix) !== 0) {\n                continue;\n            }\n            var value = localStorage.getItem(key);\n\n            // If a result was found, parse it from the serialized\n            // string into a JS object. If result isn't truthy, the\n            // key is likely undefined and we'll pass it straight\n            // to the iterator.\n            if (value) {\n                value = dbInfo.serializer.deserialize(value);\n            }\n\n            value = iterator(value, key.substring(keyPrefixLength), iterationNumber++);\n\n            if (value !== void 0) {\n                return value;\n            }\n        }\n    });\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\n// Same as localStorage's key() method, except takes a callback.\nfunction key$2(n, callback) {\n    var self = this;\n    var promise = self.ready().then(function () {\n        var dbInfo = self._dbInfo;\n        var result;\n        try {\n            result = localStorage.key(n);\n        } catch (error) {\n            result = null;\n        }\n\n        // Remove the prefix from the key, if a key is found.\n        if (result) {\n            result = result.substring(dbInfo.keyPrefix.length);\n        }\n\n        return result;\n    });\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\nfunction keys$2(callback) {\n    var self = this;\n    var promise = self.ready().then(function () {\n        var dbInfo = self._dbInfo;\n        var length = localStorage.length;\n        var keys = [];\n\n        for (var i = 0; i < length; i++) {\n            if (localStorage.key(i).indexOf(dbInfo.keyPrefix) === 0) {\n                keys.push(localStorage.key(i).substring(dbInfo.keyPrefix.length));\n            }\n        }\n\n        return keys;\n    });\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\n// Supply the number of keys in the datastore to the callback function.\nfunction length$2(callback) {\n    var self = this;\n    var promise = self.keys().then(function (keys) {\n        return keys.length;\n    });\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\n// Remove an item from the store, nice and simple.\nfunction removeItem$2(key, callback) {\n    var self = this;\n\n    // Cast the key to a string, as that's all we can set as a key.\n    if (typeof key !== 'string') {\n        console.warn(key + ' used as a key, but it is not a string.');\n        key = String(key);\n    }\n\n    var promise = self.ready().then(function () {\n        var dbInfo = self._dbInfo;\n        localStorage.removeItem(dbInfo.keyPrefix + key);\n    });\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\n// Set a key's value and run an optional callback once the value is set.\n// Unlike Gaia's implementation, the callback function is passed the value,\n// in case you want to operate on that value only after you're sure it\n// saved, or something like that.\nfunction setItem$2(key, value, callback) {\n    var self = this;\n\n    // Cast the key to a string, as that's all we can set as a key.\n    if (typeof key !== 'string') {\n        console.warn(key + ' used as a key, but it is not a string.');\n        key = String(key);\n    }\n\n    var promise = self.ready().then(function () {\n        // Convert undefined values to null.\n        // https://github.com/mozilla/localForage/pull/42\n        if (value === undefined) {\n            value = null;\n        }\n\n        // Save the original value to pass to the callback.\n        var originalValue = value;\n\n        return new Promise$1(function (resolve, reject) {\n            var dbInfo = self._dbInfo;\n            dbInfo.serializer.serialize(value, function (value, error) {\n                if (error) {\n                    reject(error);\n                } else {\n                    try {\n                        localStorage.setItem(dbInfo.keyPrefix + key, value);\n                        resolve(originalValue);\n                    } catch (e) {\n                        // localStorage capacity exceeded.\n                        // TODO: Make this a specific error/event.\n                        if (e.name === 'QuotaExceededError' || e.name === 'NS_ERROR_DOM_QUOTA_REACHED') {\n                            reject(e);\n                        }\n                        reject(e);\n                    }\n                }\n            });\n        });\n    });\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\nvar localStorageWrapper = {\n    _driver: 'localStorageWrapper',\n    _initStorage: _initStorage$2,\n    // Default API, from Gaia/localStorage.\n    iterate: iterate$2,\n    getItem: getItem$2,\n    setItem: setItem$2,\n    removeItem: removeItem$2,\n    clear: clear$2,\n    length: length$2,\n    key: key$2,\n    keys: keys$2\n};\n\n// Custom drivers are stored here when `defineDriver()` is called.\n// They are shared across all instances of localForage.\nvar CustomDrivers = {};\n\nvar DriverType = {\n    INDEXEDDB: 'asyncStorage',\n    LOCALSTORAGE: 'localStorageWrapper',\n    WEBSQL: 'webSQLStorage'\n};\n\nvar DefaultDriverOrder = [DriverType.INDEXEDDB, DriverType.WEBSQL, DriverType.LOCALSTORAGE];\n\nvar LibraryMethods = ['clear', 'getItem', 'iterate', 'key', 'keys', 'length', 'removeItem', 'setItem'];\n\nvar DefaultConfig = {\n    description: '',\n    driver: DefaultDriverOrder.slice(),\n    name: 'localforage',\n    // Default DB size is _JUST UNDER_ 5MB, as it's the highest size\n    // we can use without a prompt.\n    size: 4980736,\n    storeName: 'keyvaluepairs',\n    version: 1.0\n};\n\nvar driverSupport = {};\n// Check to see if IndexedDB is available and if it is the latest\n// implementation; it's our preferred backend library. We use \"_spec_test\"\n// as the name of the database because it's not the one we'll operate on,\n// but it's useful to make sure its using the right spec.\n// See: https://github.com/mozilla/localForage/issues/128\ndriverSupport[DriverType.INDEXEDDB] = isIndexedDBValid();\n\ndriverSupport[DriverType.WEBSQL] = isWebSQLValid();\n\ndriverSupport[DriverType.LOCALSTORAGE] = isLocalStorageValid();\n\nvar isArray = Array.isArray || function (arg) {\n    return Object.prototype.toString.call(arg) === '[object Array]';\n};\n\nfunction callWhenReady(localForageInstance, libraryMethod) {\n    localForageInstance[libraryMethod] = function () {\n        var _args = arguments;\n        return localForageInstance.ready().then(function () {\n            return localForageInstance[libraryMethod].apply(localForageInstance, _args);\n        });\n    };\n}\n\nfunction extend() {\n    for (var i = 1; i < arguments.length; i++) {\n        var arg = arguments[i];\n\n        if (arg) {\n            for (var key in arg) {\n                if (arg.hasOwnProperty(key)) {\n                    if (isArray(arg[key])) {\n                        arguments[0][key] = arg[key].slice();\n                    } else {\n                        arguments[0][key] = arg[key];\n                    }\n                }\n            }\n        }\n    }\n\n    return arguments[0];\n}\n\nfunction isLibraryDriver(driverName) {\n    for (var driver in DriverType) {\n        if (DriverType.hasOwnProperty(driver) && DriverType[driver] === driverName) {\n            return true;\n        }\n    }\n\n    return false;\n}\n\nvar LocalForage = function () {\n    function LocalForage(options) {\n        _classCallCheck(this, LocalForage);\n\n        this.INDEXEDDB = DriverType.INDEXEDDB;\n        this.LOCALSTORAGE = DriverType.LOCALSTORAGE;\n        this.WEBSQL = DriverType.WEBSQL;\n\n        this._defaultConfig = extend({}, DefaultConfig);\n        this._config = extend({}, this._defaultConfig, options);\n        this._driverSet = null;\n        this._initDriver = null;\n        this._ready = false;\n        this._dbInfo = null;\n\n        this._wrapLibraryMethodsWithReady();\n        this.setDriver(this._config.driver)[\"catch\"](function () {});\n    }\n\n    // Set any config values for localForage; can be called anytime before\n    // the first API call (e.g. `getItem`, `setItem`).\n    // We loop through options so we don't overwrite existing config\n    // values.\n\n\n    LocalForage.prototype.config = function config(options) {\n        // If the options argument is an object, we use it to set values.\n        // Otherwise, we return either a specified config value or all\n        // config values.\n        if ((typeof options === 'undefined' ? 'undefined' : _typeof(options)) === 'object') {\n            // If localforage is ready and fully initialized, we can't set\n            // any new configuration values. Instead, we return an error.\n            if (this._ready) {\n                return new Error(\"Can't call config() after localforage \" + 'has been used.');\n            }\n\n            for (var i in options) {\n                if (i === 'storeName') {\n                    options[i] = options[i].replace(/\\W/g, '_');\n                }\n\n                if (i === 'version' && typeof options[i] !== 'number') {\n                    return new Error('Database version must be a number.');\n                }\n\n                this._config[i] = options[i];\n            }\n\n            // after all config options are set and\n            // the driver option is used, try setting it\n            if ('driver' in options && options.driver) {\n                return this.setDriver(this._config.driver);\n            }\n\n            return true;\n        } else if (typeof options === 'string') {\n            return this._config[options];\n        } else {\n            return this._config;\n        }\n    };\n\n    // Used to define a custom driver, shared across all instances of\n    // localForage.\n\n\n    LocalForage.prototype.defineDriver = function defineDriver(driverObject, callback, errorCallback) {\n        var promise = new Promise$1(function (resolve, reject) {\n            try {\n                var driverName = driverObject._driver;\n                var complianceError = new Error('Custom driver not compliant; see ' + 'https://mozilla.github.io/localForage/#definedriver');\n                var namingError = new Error('Custom driver name already in use: ' + driverObject._driver);\n\n                // A driver name should be defined and not overlap with the\n                // library-defined, default drivers.\n                if (!driverObject._driver) {\n                    reject(complianceError);\n                    return;\n                }\n                if (isLibraryDriver(driverObject._driver)) {\n                    reject(namingError);\n                    return;\n                }\n\n                var customDriverMethods = LibraryMethods.concat('_initStorage');\n                for (var i = 0; i < customDriverMethods.length; i++) {\n                    var customDriverMethod = customDriverMethods[i];\n                    if (!customDriverMethod || !driverObject[customDriverMethod] || typeof driverObject[customDriverMethod] !== 'function') {\n                        reject(complianceError);\n                        return;\n                    }\n                }\n\n                var supportPromise = Promise$1.resolve(true);\n                if ('_support' in driverObject) {\n                    if (driverObject._support && typeof driverObject._support === 'function') {\n                        supportPromise = driverObject._support();\n                    } else {\n                        supportPromise = Promise$1.resolve(!!driverObject._support);\n                    }\n                }\n\n                supportPromise.then(function (supportResult) {\n                    driverSupport[driverName] = supportResult;\n                    CustomDrivers[driverName] = driverObject;\n                    resolve();\n                }, reject);\n            } catch (e) {\n                reject(e);\n            }\n        });\n\n        executeTwoCallbacks(promise, callback, errorCallback);\n        return promise;\n    };\n\n    LocalForage.prototype.driver = function driver() {\n        return this._driver || null;\n    };\n\n    LocalForage.prototype.getDriver = function getDriver(driverName, callback, errorCallback) {\n        var self = this;\n        var getDriverPromise = Promise$1.resolve().then(function () {\n            if (isLibraryDriver(driverName)) {\n                switch (driverName) {\n                    case self.INDEXEDDB:\n                        return asyncStorage;\n                    case self.LOCALSTORAGE:\n                        return localStorageWrapper;\n                    case self.WEBSQL:\n                        return webSQLStorage;\n                }\n            } else if (CustomDrivers[driverName]) {\n                return CustomDrivers[driverName];\n            } else {\n                throw new Error('Driver not found.');\n            }\n        });\n        executeTwoCallbacks(getDriverPromise, callback, errorCallback);\n        return getDriverPromise;\n    };\n\n    LocalForage.prototype.getSerializer = function getSerializer(callback) {\n        var serializerPromise = Promise$1.resolve(localforageSerializer);\n        executeTwoCallbacks(serializerPromise, callback);\n        return serializerPromise;\n    };\n\n    LocalForage.prototype.ready = function ready(callback) {\n        var self = this;\n\n        var promise = self._driverSet.then(function () {\n            if (self._ready === null) {\n                self._ready = self._initDriver();\n            }\n\n            return self._ready;\n        });\n\n        executeTwoCallbacks(promise, callback, callback);\n        return promise;\n    };\n\n    LocalForage.prototype.setDriver = function setDriver(drivers, callback, errorCallback) {\n        var self = this;\n\n        if (!isArray(drivers)) {\n            drivers = [drivers];\n        }\n\n        var supportedDrivers = this._getSupportedDrivers(drivers);\n\n        function setDriverToConfig() {\n            self._config.driver = self.driver();\n        }\n\n        function extendSelfWithDriver(driver) {\n            self._extend(driver);\n            setDriverToConfig();\n\n            self._ready = self._initStorage(self._config);\n            return self._ready;\n        }\n\n        function initDriver(supportedDrivers) {\n            return function () {\n                var currentDriverIndex = 0;\n\n                function driverPromiseLoop() {\n                    while (currentDriverIndex < supportedDrivers.length) {\n                        var driverName = supportedDrivers[currentDriverIndex];\n                        currentDriverIndex++;\n\n                        self._dbInfo = null;\n                        self._ready = null;\n\n                        return self.getDriver(driverName).then(extendSelfWithDriver)[\"catch\"](driverPromiseLoop);\n                    }\n\n                    setDriverToConfig();\n                    var error = new Error('No available storage method found.');\n                    self._driverSet = Promise$1.reject(error);\n                    return self._driverSet;\n                }\n\n                return driverPromiseLoop();\n            };\n        }\n\n        // There might be a driver initialization in progress\n        // so wait for it to finish in order to avoid a possible\n        // race condition to set _dbInfo\n        var oldDriverSetDone = this._driverSet !== null ? this._driverSet[\"catch\"](function () {\n            return Promise$1.resolve();\n        }) : Promise$1.resolve();\n\n        this._driverSet = oldDriverSetDone.then(function () {\n            var driverName = supportedDrivers[0];\n            self._dbInfo = null;\n            self._ready = null;\n\n            return self.getDriver(driverName).then(function (driver) {\n                self._driver = driver._driver;\n                setDriverToConfig();\n                self._wrapLibraryMethodsWithReady();\n                self._initDriver = initDriver(supportedDrivers);\n            });\n        })[\"catch\"](function () {\n            setDriverToConfig();\n            var error = new Error('No available storage method found.');\n            self._driverSet = Promise$1.reject(error);\n            return self._driverSet;\n        });\n\n        executeTwoCallbacks(this._driverSet, callback, errorCallback);\n        return this._driverSet;\n    };\n\n    LocalForage.prototype.supports = function supports(driverName) {\n        return !!driverSupport[driverName];\n    };\n\n    LocalForage.prototype._extend = function _extend(libraryMethodsAndProperties) {\n        extend(this, libraryMethodsAndProperties);\n    };\n\n    LocalForage.prototype._getSupportedDrivers = function _getSupportedDrivers(drivers) {\n        var supportedDrivers = [];\n        for (var i = 0, len = drivers.length; i < len; i++) {\n            var driverName = drivers[i];\n            if (this.supports(driverName)) {\n                supportedDrivers.push(driverName);\n            }\n        }\n        return supportedDrivers;\n    };\n\n    LocalForage.prototype._wrapLibraryMethodsWithReady = function _wrapLibraryMethodsWithReady() {\n        // Add a stub for each driver API method that delays the call to the\n        // corresponding driver method until localForage is ready. These stubs\n        // will be replaced by the driver methods as soon as the driver is\n        // loaded, so there is no performance impact.\n        for (var i = 0; i < LibraryMethods.length; i++) {\n            callWhenReady(this, LibraryMethods[i]);\n        }\n    };\n\n    LocalForage.prototype.createInstance = function createInstance(options) {\n        return new LocalForage(options);\n    };\n\n    return LocalForage;\n}();\n\n// The actual localForage object that we expose as a module or via a\n// global. It's extended by pulling in one of our other libraries.\n\n\nvar localforage_js = new LocalForage();\n\nmodule.exports = localforage_js;\n\n},{\"3\":3}]},{},[4])(4)\n});\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(\"b+29\")))\n\n/***/ }),\n\n/***/ \"82LK\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/*\nobject-assign\n(c) Sindre Sorhus\n@license MIT\n*/\n\n\n/* eslint-disable no-unused-vars */\nvar getOwnPropertySymbols = Object.getOwnPropertySymbols;\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\nfunction toObject(val) {\n\tif (val === null || val === undefined) {\n\t\tthrow new TypeError('Object.assign cannot be called with null or undefined');\n\t}\n\n\treturn Object(val);\n}\n\nfunction shouldUseNative() {\n\ttry {\n\t\tif (!Object.assign) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Detect buggy property enumeration order in older V8 versions.\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=4118\n\t\tvar test1 = new String('abc');  // eslint-disable-line no-new-wrappers\n\t\ttest1[5] = 'de';\n\t\tif (Object.getOwnPropertyNames(test1)[0] === '5') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test2 = {};\n\t\tfor (var i = 0; i < 10; i++) {\n\t\t\ttest2['_' + String.fromCharCode(i)] = i;\n\t\t}\n\t\tvar order2 = Object.getOwnPropertyNames(test2).map(function (n) {\n\t\t\treturn test2[n];\n\t\t});\n\t\tif (order2.join('') !== '0123456789') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test3 = {};\n\t\t'abcdefghijklmnopqrst'.split('').forEach(function (letter) {\n\t\t\ttest3[letter] = letter;\n\t\t});\n\t\tif (Object.keys(Object.assign({}, test3)).join('') !==\n\t\t\t\t'abcdefghijklmnopqrst') {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t} catch (err) {\n\t\t// We don't expect any of the above to throw, but better to be safe.\n\t\treturn false;\n\t}\n}\n\nmodule.exports = shouldUseNative() ? Object.assign : function (target, source) {\n\tvar from;\n\tvar to = toObject(target);\n\tvar symbols;\n\n\tfor (var s = 1; s < arguments.length; s++) {\n\t\tfrom = Object(arguments[s]);\n\n\t\tfor (var key in from) {\n\t\t\tif (hasOwnProperty.call(from, key)) {\n\t\t\t\tto[key] = from[key];\n\t\t\t}\n\t\t}\n\n\t\tif (getOwnPropertySymbols) {\n\t\t\tsymbols = getOwnPropertySymbols(from);\n\t\t\tfor (var i = 0; i < symbols.length; i++) {\n\t\t\t\tif (propIsEnumerable.call(from, symbols[i])) {\n\t\t\t\t\tto[symbols[i]] = from[symbols[i]];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn to;\n};\n\n\n/***/ }),\n\n/***/ \"97Jz\":\n/***/ (function(module, exports, __webpack_require__) {\n\nfunction t(t){function o(e,o){if(\"function\"==typeof t)return t(o.store.state,e)}return function(t){return function(n){function r(t,e){var r=this;n.call(this,t,e),this.state=o(t,e),this.handleStoreUpdate=function(){r.updateAnimId=setTimeout(function(){r.setState(o(r.props,r.context))})},e.store.on('*',this.handleStoreUpdate)}return n&&(r.__proto__=n),r.prototype=Object.create(n&&n.prototype),r.prototype.constructor=r,r.prototype.componentWillUnmount=function(){window.clearTimeout(this.updateAnimId),this.context.store.off('*',this.handleStoreUpdate)},r.prototype.render=function(o, n){return e.h(t,Object.assign({},Object.assign({},o),n,{emit:this.context.store.emit}))},r}(e.Component)}}Object.defineProperty(exports,\"__esModule\",{value:!0});var e=__webpack_require__(\"EF6w\"),o=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getChildContext=function(){return{store:this.props.store}},e.prototype.render=function(t){return t.children[0]},e}(e.Component);exports.Provider=o,exports.connect=t;\n//# sourceMappingURL=preact-smitty.js.map\n\n\n/***/ }),\n\n/***/ \"EF6w\":\n/***/ (function(module, exports, __webpack_require__) {\n\n!function(global, factory) {\n     true ? factory(exports) : 'function' == typeof define && define.amd ? define([ 'exports' ], factory) : factory(global.preact = global.preact || {});\n}(this, function(exports) {\n    function VNode(nodeName, attributes, children) {\n        this.nodeName = nodeName;\n        this.attributes = attributes;\n        this.children = children;\n        this.key = attributes && attributes.key;\n    }\n    function h(nodeName, attributes) {\n        var children, lastSimple, child, simple, i;\n        for (i = arguments.length; i-- > 2; ) stack.push(arguments[i]);\n        if (attributes && attributes.children) {\n            if (!stack.length) stack.push(attributes.children);\n            delete attributes.children;\n        }\n        while (stack.length) if ((child = stack.pop()) instanceof Array) for (i = child.length; i--; ) stack.push(child[i]); else if (null != child && child !== !0 && child !== !1) {\n            if ('number' == typeof child) child = String(child);\n            simple = 'string' == typeof child;\n            if (simple && lastSimple) children[children.length - 1] += child; else {\n                (children || (children = [])).push(child);\n                lastSimple = simple;\n            }\n        }\n        var p = new VNode(nodeName, attributes || void 0, children || EMPTY_CHILDREN);\n        if (options.vnode) options.vnode(p);\n        return p;\n    }\n    function extend(obj, props) {\n        if (props) for (var i in props) obj[i] = props[i];\n        return obj;\n    }\n    function clone(obj) {\n        return extend({}, obj);\n    }\n    function delve(obj, key) {\n        for (var p = key.split('.'), i = 0; i < p.length && obj; i++) obj = obj[p[i]];\n        return obj;\n    }\n    function isFunction(obj) {\n        return 'function' == typeof obj;\n    }\n    function isString(obj) {\n        return 'string' == typeof obj;\n    }\n    function hashToClassName(c) {\n        var str = '';\n        for (var prop in c) if (c[prop]) {\n            if (str) str += ' ';\n            str += prop;\n        }\n        return str;\n    }\n    function cloneElement(vnode, props) {\n        return h(vnode.nodeName, extend(clone(vnode.attributes), props), arguments.length > 2 ? [].slice.call(arguments, 2) : vnode.children);\n    }\n    function createLinkedState(component, key, eventPath) {\n        var path = key.split('.');\n        return function(e) {\n            var t = e && e.target || this, state = {}, obj = state, v = isString(eventPath) ? delve(e, eventPath) : t.nodeName ? t.type.match(/^che|rad/) ? t.checked : t.value : e, i = 0;\n            for (;i < path.length - 1; i++) obj = obj[path[i]] || (obj[path[i]] = !i && component.state[path[i]] || {});\n            obj[path[i]] = v;\n            component.setState(state);\n        };\n    }\n    function enqueueRender(component) {\n        if (!component._dirty && (component._dirty = !0) && 1 == items.push(component)) (options.debounceRendering || defer)(rerender);\n    }\n    function rerender() {\n        var p, list = items;\n        items = [];\n        while (p = list.pop()) if (p._dirty) renderComponent(p);\n    }\n    function isFunctionalComponent(vnode) {\n        var nodeName = vnode && vnode.nodeName;\n        return nodeName && isFunction(nodeName) && !(nodeName.prototype && nodeName.prototype.render);\n    }\n    function buildFunctionalComponent(vnode, context) {\n        return vnode.nodeName(getNodeProps(vnode), context || EMPTY);\n    }\n    function isSameNodeType(node, vnode) {\n        if (isString(vnode)) return node instanceof Text;\n        if (isString(vnode.nodeName)) return !node._componentConstructor && isNamedNode(node, vnode.nodeName);\n        if (isFunction(vnode.nodeName)) return (node._componentConstructor ? node._componentConstructor === vnode.nodeName : !0) || isFunctionalComponent(vnode); else ;\n    }\n    function isNamedNode(node, nodeName) {\n        return node.normalizedNodeName === nodeName || toLowerCase(node.nodeName) === toLowerCase(nodeName);\n    }\n    function getNodeProps(vnode) {\n        var props = clone(vnode.attributes);\n        props.children = vnode.children;\n        var defaultProps = vnode.nodeName.defaultProps;\n        if (defaultProps) for (var i in defaultProps) if (void 0 === props[i]) props[i] = defaultProps[i];\n        return props;\n    }\n    function removeNode(node) {\n        var p = node.parentNode;\n        if (p) p.removeChild(node);\n    }\n    function setAccessor(node, name, old, value, isSvg) {\n        if ('className' === name) name = 'class';\n        if ('class' === name && value && 'object' == typeof value) value = hashToClassName(value);\n        if ('key' === name) ; else if ('class' === name && !isSvg) node.className = value || ''; else if ('style' === name) {\n            if (!value || isString(value) || isString(old)) node.style.cssText = value || '';\n            if (value && 'object' == typeof value) {\n                if (!isString(old)) for (var i in old) if (!(i in value)) node.style[i] = '';\n                for (var i in value) node.style[i] = 'number' == typeof value[i] && !NON_DIMENSION_PROPS[i] ? value[i] + 'px' : value[i];\n            }\n        } else if ('dangerouslySetInnerHTML' === name) {\n            if (value) node.innerHTML = value.__html || '';\n        } else if ('o' == name[0] && 'n' == name[1]) {\n            var l = node._listeners || (node._listeners = {});\n            name = toLowerCase(name.substring(2));\n            if (value) {\n                if (!l[name]) node.addEventListener(name, eventProxy, !!NON_BUBBLING_EVENTS[name]);\n            } else if (l[name]) node.removeEventListener(name, eventProxy, !!NON_BUBBLING_EVENTS[name]);\n            l[name] = value;\n        } else if ('list' !== name && 'type' !== name && !isSvg && name in node) {\n            setProperty(node, name, null == value ? '' : value);\n            if (null == value || value === !1) node.removeAttribute(name);\n        } else {\n            var ns = isSvg && name.match(/^xlink\\:?(.+)/);\n            if (null == value || value === !1) if (ns) node.removeAttributeNS('http://www.w3.org/1999/xlink', toLowerCase(ns[1])); else node.removeAttribute(name); else if ('object' != typeof value && !isFunction(value)) if (ns) node.setAttributeNS('http://www.w3.org/1999/xlink', toLowerCase(ns[1]), value); else node.setAttribute(name, value);\n        }\n    }\n    function setProperty(node, name, value) {\n        try {\n            node[name] = value;\n        } catch (e) {}\n    }\n    function eventProxy(e) {\n        return this._listeners[e.type](options.event && options.event(e) || e);\n    }\n    function collectNode(node) {\n        removeNode(node);\n        if (node instanceof Element) {\n            node._component = node._componentConstructor = null;\n            var _name = node.normalizedNodeName || toLowerCase(node.nodeName);\n            (nodes[_name] || (nodes[_name] = [])).push(node);\n        }\n    }\n    function createNode(nodeName, isSvg) {\n        var name = toLowerCase(nodeName), node = nodes[name] && nodes[name].pop() || (isSvg ? document.createElementNS('http://www.w3.org/2000/svg', nodeName) : document.createElement(nodeName));\n        node.normalizedNodeName = name;\n        return node;\n    }\n    function flushMounts() {\n        var c;\n        while (c = mounts.pop()) {\n            if (options.afterMount) options.afterMount(c);\n            if (c.componentDidMount) c.componentDidMount();\n        }\n    }\n    function diff(dom, vnode, context, mountAll, parent, componentRoot) {\n        if (!diffLevel++) {\n            isSvgMode = parent && 'undefined' != typeof parent.ownerSVGElement;\n            hydrating = dom && !(ATTR_KEY in dom);\n        }\n        var ret = idiff(dom, vnode, context, mountAll);\n        if (parent && ret.parentNode !== parent) parent.appendChild(ret);\n        if (!--diffLevel) {\n            hydrating = !1;\n            if (!componentRoot) flushMounts();\n        }\n        return ret;\n    }\n    function idiff(dom, vnode, context, mountAll) {\n        var ref = vnode && vnode.attributes && vnode.attributes.ref;\n        while (isFunctionalComponent(vnode)) vnode = buildFunctionalComponent(vnode, context);\n        if (null == vnode) vnode = '';\n        if (isString(vnode)) {\n            if (dom && dom instanceof Text && dom.parentNode) {\n                if (dom.nodeValue != vnode) dom.nodeValue = vnode;\n            } else {\n                if (dom) recollectNodeTree(dom);\n                dom = document.createTextNode(vnode);\n            }\n            return dom;\n        }\n        if (isFunction(vnode.nodeName)) return buildComponentFromVNode(dom, vnode, context, mountAll);\n        var out = dom, nodeName = String(vnode.nodeName), prevSvgMode = isSvgMode, vchildren = vnode.children;\n        isSvgMode = 'svg' === nodeName ? !0 : 'foreignObject' === nodeName ? !1 : isSvgMode;\n        if (!dom) out = createNode(nodeName, isSvgMode); else if (!isNamedNode(dom, nodeName)) {\n            out = createNode(nodeName, isSvgMode);\n            while (dom.firstChild) out.appendChild(dom.firstChild);\n            if (dom.parentNode) dom.parentNode.replaceChild(out, dom);\n            recollectNodeTree(dom);\n        }\n        var fc = out.firstChild, props = out[ATTR_KEY];\n        if (!props) {\n            out[ATTR_KEY] = props = {};\n            for (var a = out.attributes, i = a.length; i--; ) props[a[i].name] = a[i].value;\n        }\n        if (!hydrating && vchildren && 1 === vchildren.length && 'string' == typeof vchildren[0] && fc && fc instanceof Text && !fc.nextSibling) {\n            if (fc.nodeValue != vchildren[0]) fc.nodeValue = vchildren[0];\n        } else if (vchildren && vchildren.length || fc) innerDiffNode(out, vchildren, context, mountAll, !!props.dangerouslySetInnerHTML);\n        diffAttributes(out, vnode.attributes, props);\n        if (ref) (props.ref = ref)(out);\n        isSvgMode = prevSvgMode;\n        return out;\n    }\n    function innerDiffNode(dom, vchildren, context, mountAll, absorb) {\n        var j, c, vchild, child, originalChildren = dom.childNodes, children = [], keyed = {}, keyedLen = 0, min = 0, len = originalChildren.length, childrenLen = 0, vlen = vchildren && vchildren.length;\n        if (len) for (var i = 0; i < len; i++) {\n            var _child = originalChildren[i], props = _child[ATTR_KEY], key = vlen ? (c = _child._component) ? c.__key : props ? props.key : null : null;\n            if (null != key) {\n                keyedLen++;\n                keyed[key] = _child;\n            } else if (hydrating || absorb || props || _child instanceof Text) children[childrenLen++] = _child;\n        }\n        if (vlen) for (var i = 0; i < vlen; i++) {\n            vchild = vchildren[i];\n            child = null;\n            var key = vchild.key;\n            if (null != key) {\n                if (keyedLen && key in keyed) {\n                    child = keyed[key];\n                    keyed[key] = void 0;\n                    keyedLen--;\n                }\n            } else if (!child && min < childrenLen) for (j = min; j < childrenLen; j++) {\n                c = children[j];\n                if (c && isSameNodeType(c, vchild)) {\n                    child = c;\n                    children[j] = void 0;\n                    if (j === childrenLen - 1) childrenLen--;\n                    if (j === min) min++;\n                    break;\n                }\n            }\n            child = idiff(child, vchild, context, mountAll);\n            if (child && child !== dom) if (i >= len) dom.appendChild(child); else if (child !== originalChildren[i]) {\n                if (child === originalChildren[i + 1]) removeNode(originalChildren[i]);\n                dom.insertBefore(child, originalChildren[i] || null);\n            }\n        }\n        if (keyedLen) for (var i in keyed) if (keyed[i]) recollectNodeTree(keyed[i]);\n        while (min <= childrenLen) {\n            child = children[childrenLen--];\n            if (child) recollectNodeTree(child);\n        }\n    }\n    function recollectNodeTree(node, unmountOnly) {\n        var component = node._component;\n        if (component) unmountComponent(component, !unmountOnly); else {\n            if (node[ATTR_KEY] && node[ATTR_KEY].ref) node[ATTR_KEY].ref(null);\n            if (!unmountOnly) collectNode(node);\n            var c;\n            while (c = node.lastChild) recollectNodeTree(c, unmountOnly);\n        }\n    }\n    function diffAttributes(dom, attrs, old) {\n        var name;\n        for (name in old) if (!(attrs && name in attrs) && null != old[name]) setAccessor(dom, name, old[name], old[name] = void 0, isSvgMode);\n        if (attrs) for (name in attrs) if (!('children' === name || 'innerHTML' === name || name in old && attrs[name] === ('value' === name || 'checked' === name ? dom[name] : old[name]))) setAccessor(dom, name, old[name], old[name] = attrs[name], isSvgMode);\n    }\n    function collectComponent(component) {\n        var name = component.constructor.name, list = components[name];\n        if (list) list.push(component); else components[name] = [ component ];\n    }\n    function createComponent(Ctor, props, context) {\n        var inst = new Ctor(props, context), list = components[Ctor.name];\n        Component.call(inst, props, context);\n        if (list) for (var i = list.length; i--; ) if (list[i].constructor === Ctor) {\n            inst.nextBase = list[i].nextBase;\n            list.splice(i, 1);\n            break;\n        }\n        return inst;\n    }\n    function setComponentProps(component, props, opts, context, mountAll) {\n        if (!component._disable) {\n            component._disable = !0;\n            if (component.__ref = props.ref) delete props.ref;\n            if (component.__key = props.key) delete props.key;\n            if (!component.base || mountAll) {\n                if (component.componentWillMount) component.componentWillMount();\n            } else if (component.componentWillReceiveProps) component.componentWillReceiveProps(props, context);\n            if (context && context !== component.context) {\n                if (!component.prevContext) component.prevContext = component.context;\n                component.context = context;\n            }\n            if (!component.prevProps) component.prevProps = component.props;\n            component.props = props;\n            component._disable = !1;\n            if (0 !== opts) if (1 === opts || options.syncComponentUpdates !== !1 || !component.base) renderComponent(component, 1, mountAll); else enqueueRender(component);\n            if (component.__ref) component.__ref(component);\n        }\n    }\n    function renderComponent(component, opts, mountAll, isChild) {\n        if (!component._disable) {\n            var skip, rendered, inst, cbase, props = component.props, state = component.state, context = component.context, previousProps = component.prevProps || props, previousState = component.prevState || state, previousContext = component.prevContext || context, isUpdate = component.base, nextBase = component.nextBase, initialBase = isUpdate || nextBase, initialChildComponent = component._component;\n            if (isUpdate) {\n                component.props = previousProps;\n                component.state = previousState;\n                component.context = previousContext;\n                if (2 !== opts && component.shouldComponentUpdate && component.shouldComponentUpdate(props, state, context) === !1) skip = !0; else if (component.componentWillUpdate) component.componentWillUpdate(props, state, context);\n                component.props = props;\n                component.state = state;\n                component.context = context;\n            }\n            component.prevProps = component.prevState = component.prevContext = component.nextBase = null;\n            component._dirty = !1;\n            if (!skip) {\n                if (component.render) rendered = component.render(props, state, context);\n                if (component.getChildContext) context = extend(clone(context), component.getChildContext());\n                while (isFunctionalComponent(rendered)) rendered = buildFunctionalComponent(rendered, context);\n                var toUnmount, base, childComponent = rendered && rendered.nodeName;\n                if (isFunction(childComponent)) {\n                    var childProps = getNodeProps(rendered);\n                    inst = initialChildComponent;\n                    if (inst && inst.constructor === childComponent && childProps.key == inst.__key) setComponentProps(inst, childProps, 1, context); else {\n                        toUnmount = inst;\n                        inst = createComponent(childComponent, childProps, context);\n                        inst.nextBase = inst.nextBase || nextBase;\n                        inst._parentComponent = component;\n                        component._component = inst;\n                        setComponentProps(inst, childProps, 0, context);\n                        renderComponent(inst, 1, mountAll, !0);\n                    }\n                    base = inst.base;\n                } else {\n                    cbase = initialBase;\n                    toUnmount = initialChildComponent;\n                    if (toUnmount) cbase = component._component = null;\n                    if (initialBase || 1 === opts) {\n                        if (cbase) cbase._component = null;\n                        base = diff(cbase, rendered, context, mountAll || !isUpdate, initialBase && initialBase.parentNode, !0);\n                    }\n                }\n                if (initialBase && base !== initialBase && inst !== initialChildComponent) {\n                    var baseParent = initialBase.parentNode;\n                    if (baseParent && base !== baseParent) {\n                        baseParent.replaceChild(base, initialBase);\n                        if (!toUnmount) {\n                            initialBase._component = null;\n                            recollectNodeTree(initialBase);\n                        }\n                    }\n                }\n                if (toUnmount) unmountComponent(toUnmount, base !== initialBase);\n                component.base = base;\n                if (base && !isChild) {\n                    var componentRef = component, t = component;\n                    while (t = t._parentComponent) (componentRef = t).base = base;\n                    base._component = componentRef;\n                    base._componentConstructor = componentRef.constructor;\n                }\n            }\n            if (!isUpdate || mountAll) mounts.unshift(component); else if (!skip) {\n                if (component.componentDidUpdate) component.componentDidUpdate(previousProps, previousState, previousContext);\n                if (options.afterUpdate) options.afterUpdate(component);\n            }\n            var fn, cb = component._renderCallbacks;\n            if (cb) while (fn = cb.pop()) fn.call(component);\n            if (!diffLevel && !isChild) flushMounts();\n        }\n    }\n    function buildComponentFromVNode(dom, vnode, context, mountAll) {\n        var c = dom && dom._component, originalComponent = c, oldDom = dom, isDirectOwner = c && dom._componentConstructor === vnode.nodeName, isOwner = isDirectOwner, props = getNodeProps(vnode);\n        while (c && !isOwner && (c = c._parentComponent)) isOwner = c.constructor === vnode.nodeName;\n        if (c && isOwner && (!mountAll || c._component)) {\n            setComponentProps(c, props, 3, context, mountAll);\n            dom = c.base;\n        } else {\n            if (originalComponent && !isDirectOwner) {\n                unmountComponent(originalComponent, !0);\n                dom = oldDom = null;\n            }\n            c = createComponent(vnode.nodeName, props, context);\n            if (dom && !c.nextBase) {\n                c.nextBase = dom;\n                oldDom = null;\n            }\n            setComponentProps(c, props, 1, context, mountAll);\n            dom = c.base;\n            if (oldDom && dom !== oldDom) {\n                oldDom._component = null;\n                recollectNodeTree(oldDom);\n            }\n        }\n        return dom;\n    }\n    function unmountComponent(component, remove) {\n        if (options.beforeUnmount) options.beforeUnmount(component);\n        var base = component.base;\n        component._disable = !0;\n        if (component.componentWillUnmount) component.componentWillUnmount();\n        component.base = null;\n        var inner = component._component;\n        if (inner) unmountComponent(inner, remove); else if (base) {\n            if (base[ATTR_KEY] && base[ATTR_KEY].ref) base[ATTR_KEY].ref(null);\n            component.nextBase = base;\n            if (remove) {\n                removeNode(base);\n                collectComponent(component);\n            }\n            var c;\n            while (c = base.lastChild) recollectNodeTree(c, !remove);\n        }\n        if (component.__ref) component.__ref(null);\n        if (component.componentDidUnmount) component.componentDidUnmount();\n    }\n    function Component(props, context) {\n        this._dirty = !0;\n        this.context = context;\n        this.props = props;\n        if (!this.state) this.state = {};\n    }\n    function render(vnode, parent, merge) {\n        return diff(merge, vnode, {}, !1, parent);\n    }\n    var options = {};\n    var stack = [];\n    var EMPTY_CHILDREN = [];\n    var lcCache = {};\n    var toLowerCase = function(s) {\n        return lcCache[s] || (lcCache[s] = s.toLowerCase());\n    };\n    var resolved = 'undefined' != typeof Promise && Promise.resolve();\n    var defer = resolved ? function(f) {\n        resolved.then(f);\n    } : setTimeout;\n    var EMPTY = {};\n    var ATTR_KEY = 'undefined' != typeof Symbol ? Symbol.for('preactattr') : '__preactattr_';\n    var NON_DIMENSION_PROPS = {\n        boxFlex: 1,\n        boxFlexGroup: 1,\n        columnCount: 1,\n        fillOpacity: 1,\n        flex: 1,\n        flexGrow: 1,\n        flexPositive: 1,\n        flexShrink: 1,\n        flexNegative: 1,\n        fontWeight: 1,\n        lineClamp: 1,\n        lineHeight: 1,\n        opacity: 1,\n        order: 1,\n        orphans: 1,\n        strokeOpacity: 1,\n        widows: 1,\n        zIndex: 1,\n        zoom: 1\n    };\n    var NON_BUBBLING_EVENTS = {\n        blur: 1,\n        error: 1,\n        focus: 1,\n        load: 1,\n        resize: 1,\n        scroll: 1\n    };\n    var items = [];\n    var nodes = {};\n    var mounts = [];\n    var diffLevel = 0;\n    var isSvgMode = !1;\n    var hydrating = !1;\n    var components = {};\n    extend(Component.prototype, {\n        linkState: function(key, eventPath) {\n            var c = this._linkedStates || (this._linkedStates = {});\n            return c[key + eventPath] || (c[key + eventPath] = createLinkedState(this, key, eventPath));\n        },\n        setState: function(state, callback) {\n            var s = this.state;\n            if (!this.prevState) this.prevState = clone(s);\n            extend(s, isFunction(state) ? state(s, this.props) : state);\n            if (callback) (this._renderCallbacks = this._renderCallbacks || []).push(callback);\n            enqueueRender(this);\n        },\n        forceUpdate: function() {\n            renderComponent(this, 2);\n        },\n        render: function() {}\n    });\n    exports.h = h;\n    exports.cloneElement = cloneElement;\n    exports.Component = Component;\n    exports.render = render;\n    exports.rerender = rerender;\n    exports.options = options;\n});\n//# sourceMappingURL=preact.js.map\n\n/***/ }),\n\n/***/ \"N5z5\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(global) {\n\n// Use the fastest means possible to execute a task in its own turn, with\n// priority over other events including IO, animation, reflow, and redraw\n// events in browsers.\n//\n// An exception thrown by a task will permanently interrupt the processing of\n// subsequent tasks. The higher level `asap` function ensures that if an\n// exception is thrown by a task, that the task queue will continue flushing as\n// soon as possible, but if you use `rawAsap` directly, you are responsible to\n// either ensure that no exceptions are thrown from your task, or to manually\n// call `rawAsap.requestFlush` if an exception is thrown.\nmodule.exports = rawAsap;\nfunction rawAsap(task) {\n    if (!queue.length) {\n        requestFlush();\n        flushing = true;\n    }\n    // Equivalent to push, but avoids a function call.\n    queue[queue.length] = task;\n}\n\nvar queue = [];\n// Once a flush has been requested, no further calls to `requestFlush` are\n// necessary until the next `flush` completes.\nvar flushing = false;\n// `requestFlush` is an implementation-specific method that attempts to kick\n// off a `flush` event as quickly as possible. `flush` will attempt to exhaust\n// the event queue before yielding to the browser's own event loop.\nvar requestFlush;\n// The position of the next task to execute in the task queue. This is\n// preserved between calls to `flush` so that it can be resumed if\n// a task throws an exception.\nvar index = 0;\n// If a task schedules additional tasks recursively, the task queue can grow\n// unbounded. To prevent memory exhaustion, the task queue will periodically\n// truncate already-completed tasks.\nvar capacity = 1024;\n\n// The flush function processes all tasks that have been scheduled with\n// `rawAsap` unless and until one of those tasks throws an exception.\n// If a task throws an exception, `flush` ensures that its state will remain\n// consistent and will resume where it left off when called again.\n// However, `flush` does not make any arrangements to be called again if an\n// exception is thrown.\nfunction flush() {\n    while (index < queue.length) {\n        var currentIndex = index;\n        // Advance the index before calling the task. This ensures that we will\n        // begin flushing on the next task the task throws an error.\n        index = index + 1;\n        queue[currentIndex].call();\n        // Prevent leaking memory for long chains of recursive calls to `asap`.\n        // If we call `asap` within tasks scheduled by `asap`, the queue will\n        // grow, but to avoid an O(n) walk for every task we execute, we don't\n        // shift tasks off the queue after they have been executed.\n        // Instead, we periodically shift 1024 tasks off the queue.\n        if (index > capacity) {\n            // Manually shift all values starting at the index back to the\n            // beginning of the queue.\n            for (var scan = 0, newLength = queue.length - index; scan < newLength; scan++) {\n                queue[scan] = queue[scan + index];\n            }\n            queue.length -= index;\n            index = 0;\n        }\n    }\n    queue.length = 0;\n    index = 0;\n    flushing = false;\n}\n\n// `requestFlush` is implemented using a strategy based on data collected from\n// every available SauceLabs Selenium web driver worker at time of writing.\n// https://docs.google.com/spreadsheets/d/1mG-5UYGup5qxGdEMWkhP6BWCz053NUb2E1QoUTU16uA/edit#gid=783724593\n\n// Safari 6 and 6.1 for desktop, iPad, and iPhone are the only browsers that\n// have WebKitMutationObserver but not un-prefixed MutationObserver.\n// Must use `global` or `self` instead of `window` to work in both frames and web\n// workers. `global` is a provision of Browserify, Mr, Mrs, or Mop.\n\n/* globals self */\nvar scope = typeof global !== \"undefined\" ? global : self;\nvar BrowserMutationObserver = scope.MutationObserver || scope.WebKitMutationObserver;\n\n// MutationObservers are desirable because they have high priority and work\n// reliably everywhere they are implemented.\n// They are implemented in all modern browsers.\n//\n// - Android 4-4.3\n// - Chrome 26-34\n// - Firefox 14-29\n// - Internet Explorer 11\n// - iPad Safari 6-7.1\n// - iPhone Safari 7-7.1\n// - Safari 6-7\nif (typeof BrowserMutationObserver === \"function\") {\n    requestFlush = makeRequestCallFromMutationObserver(flush);\n\n// MessageChannels are desirable because they give direct access to the HTML\n// task queue, are implemented in Internet Explorer 10, Safari 5.0-1, and Opera\n// 11-12, and in web workers in many engines.\n// Although message channels yield to any queued rendering and IO tasks, they\n// would be better than imposing the 4ms delay of timers.\n// However, they do not work reliably in Internet Explorer or Safari.\n\n// Internet Explorer 10 is the only browser that has setImmediate but does\n// not have MutationObservers.\n// Although setImmediate yields to the browser's renderer, it would be\n// preferrable to falling back to setTimeout since it does not have\n// the minimum 4ms penalty.\n// Unfortunately there appears to be a bug in Internet Explorer 10 Mobile (and\n// Desktop to a lesser extent) that renders both setImmediate and\n// MessageChannel useless for the purposes of ASAP.\n// https://github.com/kriskowal/q/issues/396\n\n// Timers are implemented universally.\n// We fall back to timers in workers in most engines, and in foreground\n// contexts in the following browsers.\n// However, note that even this simple case requires nuances to operate in a\n// broad spectrum of browsers.\n//\n// - Firefox 3-13\n// - Internet Explorer 6-9\n// - iPad Safari 4.3\n// - Lynx 2.8.7\n} else {\n    requestFlush = makeRequestCallFromTimer(flush);\n}\n\n// `requestFlush` requests that the high priority event queue be flushed as\n// soon as possible.\n// This is useful to prevent an error thrown in a task from stalling the event\n// queue if the exception handled by Node.jss\n// `process.on(\"uncaughtException\")` or by a domain.\nrawAsap.requestFlush = requestFlush;\n\n// To request a high priority event, we induce a mutation observer by toggling\n// the text of a text node between \"1\" and \"-1\".\nfunction makeRequestCallFromMutationObserver(callback) {\n    var toggle = 1;\n    var observer = new BrowserMutationObserver(callback);\n    var node = document.createTextNode(\"\");\n    observer.observe(node, {characterData: true});\n    return function requestCall() {\n        toggle = -toggle;\n        node.data = toggle;\n    };\n}\n\n// The message channel technique was discovered by Malte Ubl and was the\n// original foundation for this library.\n// http://www.nonblocking.io/2011/06/windownexttick.html\n\n// Safari 6.0.5 (at least) intermittently fails to create message ports on a\n// page's first load. Thankfully, this version of Safari supports\n// MutationObservers, so we don't need to fall back in that case.\n\n// function makeRequestCallFromMessageChannel(callback) {\n//     var channel = new MessageChannel();\n//     channel.port1.onmessage = callback;\n//     return function requestCall() {\n//         channel.port2.postMessage(0);\n//     };\n// }\n\n// For reasons explained above, we are also unable to use `setImmediate`\n// under any circumstances.\n// Even if we were, there is another bug in Internet Explorer 10.\n// It is not sufficient to assign `setImmediate` to `requestFlush` because\n// `setImmediate` must be called *by name* and therefore must be wrapped in a\n// closure.\n// Never forget.\n\n// function makeRequestCallFromSetImmediate(callback) {\n//     return function requestCall() {\n//         setImmediate(callback);\n//     };\n// }\n\n// Safari 6.0 has a problem where timers will get lost while the user is\n// scrolling. This problem does not impact ASAP because Safari 6.0 supports\n// mutation observers, so that implementation is used instead.\n// However, if we ever elect to use timers in Safari, the prevalent work-around\n// is to add a scroll event listener that calls for a flush.\n\n// `setTimeout` does not call the passed callback if the delay is less than\n// approximately 7 in web workers in Firefox 8 through 18, and sometimes not\n// even then.\n\nfunction makeRequestCallFromTimer(callback) {\n    return function requestCall() {\n        // We dispatch a timeout with a specified delay of 0 for engines that\n        // can reliably accommodate that request. This will usually be snapped\n        // to a 4 milisecond delay, but once we're flushing, there's no delay\n        // between events.\n        var timeoutHandle = setTimeout(handleTimer, 0);\n        // However, since this timer gets frequently dropped in Firefox\n        // workers, we enlist an interval handle that will try to fire\n        // an event 20 times per second until it succeeds.\n        var intervalHandle = setInterval(handleTimer, 50);\n\n        function handleTimer() {\n            // Whichever timer succeeds will cancel both timers and\n            // execute the callback.\n            clearTimeout(timeoutHandle);\n            clearInterval(intervalHandle);\n            callback();\n        }\n    };\n}\n\n// This is for `asap.js` only.\n// Its name will be periodically randomized to break any code that depends on\n// its existence.\nrawAsap.makeRequestCallFromTimer = makeRequestCallFromTimer;\n\n// ASAP was originally a nextTick shim included in Q. This was factored out\n// into this ASAP package. It was later adapted to RSVP which made further\n// amendments. These decisions, particularly to marginalize MessageChannel and\n// to capture the MutationObserver implementation in a closure, were integrated\n// back into ASAP proper.\n// https://github.com/tildeio/rsvp.js/blob/cddf7232546a9cf858524b75cde6f9edf72620a7/lib/rsvp/asap.js\n\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(\"b+29\")))\n\n/***/ }),\n\n/***/ \"NNls\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"UPH/\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar asap = __webpack_require__(\"N5z5\");\n\nfunction noop() {}\n\n// States:\n//\n// 0 - pending\n// 1 - fulfilled with _value\n// 2 - rejected with _value\n// 3 - adopted the state of another promise, _value\n//\n// once the state is no longer pending (0) it is immutable\n\n// All `_` prefixed properties will be reduced to `_{random number}`\n// at build time to obfuscate them and discourage their use.\n// We don't use symbols or Object.defineProperty to fully hide them\n// because the performance isn't good enough.\n\n\n// to avoid using try/catch inside critical functions, we\n// extract them to here.\nvar LAST_ERROR = null;\nvar IS_ERROR = {};\nfunction getThen(obj) {\n  try {\n    return obj.then;\n  } catch (ex) {\n    LAST_ERROR = ex;\n    return IS_ERROR;\n  }\n}\n\nfunction tryCallOne(fn, a) {\n  try {\n    return fn(a);\n  } catch (ex) {\n    LAST_ERROR = ex;\n    return IS_ERROR;\n  }\n}\nfunction tryCallTwo(fn, a, b) {\n  try {\n    fn(a, b);\n  } catch (ex) {\n    LAST_ERROR = ex;\n    return IS_ERROR;\n  }\n}\n\nmodule.exports = Promise;\n\nfunction Promise(fn) {\n  if (typeof this !== 'object') {\n    throw new TypeError('Promises must be constructed via new');\n  }\n  if (typeof fn !== 'function') {\n    throw new TypeError('not a function');\n  }\n  this._45 = 0;\n  this._81 = 0;\n  this._65 = null;\n  this._54 = null;\n  if (fn === noop) return;\n  doResolve(fn, this);\n}\nPromise._10 = null;\nPromise._97 = null;\nPromise._61 = noop;\n\nPromise.prototype.then = function(onFulfilled, onRejected) {\n  if (this.constructor !== Promise) {\n    return safeThen(this, onFulfilled, onRejected);\n  }\n  var res = new Promise(noop);\n  handle(this, new Handler(onFulfilled, onRejected, res));\n  return res;\n};\n\nfunction safeThen(self, onFulfilled, onRejected) {\n  return new self.constructor(function (resolve, reject) {\n    var res = new Promise(noop);\n    res.then(resolve, reject);\n    handle(self, new Handler(onFulfilled, onRejected, res));\n  });\n};\nfunction handle(self, deferred) {\n  while (self._81 === 3) {\n    self = self._65;\n  }\n  if (Promise._10) {\n    Promise._10(self);\n  }\n  if (self._81 === 0) {\n    if (self._45 === 0) {\n      self._45 = 1;\n      self._54 = deferred;\n      return;\n    }\n    if (self._45 === 1) {\n      self._45 = 2;\n      self._54 = [self._54, deferred];\n      return;\n    }\n    self._54.push(deferred);\n    return;\n  }\n  handleResolved(self, deferred);\n}\n\nfunction handleResolved(self, deferred) {\n  asap(function() {\n    var cb = self._81 === 1 ? deferred.onFulfilled : deferred.onRejected;\n    if (cb === null) {\n      if (self._81 === 1) {\n        resolve(deferred.promise, self._65);\n      } else {\n        reject(deferred.promise, self._65);\n      }\n      return;\n    }\n    var ret = tryCallOne(cb, self._65);\n    if (ret === IS_ERROR) {\n      reject(deferred.promise, LAST_ERROR);\n    } else {\n      resolve(deferred.promise, ret);\n    }\n  });\n}\nfunction resolve(self, newValue) {\n  // Promise Resolution Procedure: https://github.com/promises-aplus/promises-spec#the-promise-resolution-procedure\n  if (newValue === self) {\n    return reject(\n      self,\n      new TypeError('A promise cannot be resolved with itself.')\n    );\n  }\n  if (\n    newValue &&\n    (typeof newValue === 'object' || typeof newValue === 'function')\n  ) {\n    var then = getThen(newValue);\n    if (then === IS_ERROR) {\n      return reject(self, LAST_ERROR);\n    }\n    if (\n      then === self.then &&\n      newValue instanceof Promise\n    ) {\n      self._81 = 3;\n      self._65 = newValue;\n      finale(self);\n      return;\n    } else if (typeof then === 'function') {\n      doResolve(then.bind(newValue), self);\n      return;\n    }\n  }\n  self._81 = 1;\n  self._65 = newValue;\n  finale(self);\n}\n\nfunction reject(self, newValue) {\n  self._81 = 2;\n  self._65 = newValue;\n  if (Promise._97) {\n    Promise._97(self, newValue);\n  }\n  finale(self);\n}\nfunction finale(self) {\n  if (self._45 === 1) {\n    handle(self, self._54);\n    self._54 = null;\n  }\n  if (self._45 === 2) {\n    for (var i = 0; i < self._54.length; i++) {\n      handle(self, self._54[i]);\n    }\n    self._54 = null;\n  }\n}\n\nfunction Handler(onFulfilled, onRejected, promise){\n  this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;\n  this.onRejected = typeof onRejected === 'function' ? onRejected : null;\n  this.promise = promise;\n}\n\n/**\n * Take a potentially misbehaving resolver function and make sure\n * onFulfilled and onRejected are only called once.\n *\n * Makes no guarantees about asynchrony.\n */\nfunction doResolve(fn, promise) {\n  var done = false;\n  var res = tryCallTwo(fn, function (value) {\n    if (done) return;\n    done = true;\n    resolve(promise, value);\n  }, function (reason) {\n    if (done) return;\n    done = true;\n    reject(promise, reason);\n  })\n  if (!done && res === IS_ERROR) {\n    done = true;\n    reject(promise, LAST_ERROR);\n  }\n}\n\n\n/***/ }),\n\n/***/ \"b+29\":\n/***/ (function(module, exports) {\n\nvar g;\r\n\r\n// This works in non-strict mode\r\ng = (function() {\r\n\treturn this;\r\n})();\r\n\r\ntry {\r\n\t// This works if eval is allowed (see CSP)\r\n\tg = g || Function(\"return this\")() || (1,eval)(\"this\");\r\n} catch(e) {\r\n\t// This works if the window reference is available\r\n\tif(typeof window === \"object\")\r\n\t\tg = window;\r\n}\r\n\r\n// g can still be undefined, but nothing to do about it...\r\n// We return undefined, instead of nothing here, so it's\r\n// easier to handle this case. if(!global) { ...}\r\n\r\nmodule.exports = g;\r\n\n\n/***/ }),\n\n/***/ \"ctQG\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_preact__ = __webpack_require__(\"EF6w\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_preact___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_preact__);\n// eslint-disable-next-line no-unused-vars\n/** @jsx h */\n\n\nvar root = void 0;\nfunction run() {\n  var Root = __webpack_require__(\"jFIt\").default;\n  root = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_preact__[\"render\"])(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(Root, { test: 'foo' }), document.querySelector('#demo'), root);\n}\n\nrun();\n\nif (false) {\n  // Whenever a new version of App.js is available\n  module.hot.accept('./App', function () {\n    // Require the new version and render it instead\n    run();\n  });\n}\n\n/***/ }),\n\n/***/ \"e2MQ\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n//This file contains the ES6 extensions to the core Promises/A+ API\n\nvar Promise = __webpack_require__(\"UPH/\");\n\nmodule.exports = Promise;\n\n/* Static Functions */\n\nvar TRUE = valuePromise(true);\nvar FALSE = valuePromise(false);\nvar NULL = valuePromise(null);\nvar UNDEFINED = valuePromise(undefined);\nvar ZERO = valuePromise(0);\nvar EMPTYSTRING = valuePromise('');\n\nfunction valuePromise(value) {\n  var p = new Promise(Promise._61);\n  p._81 = 1;\n  p._65 = value;\n  return p;\n}\nPromise.resolve = function (value) {\n  if (value instanceof Promise) return value;\n\n  if (value === null) return NULL;\n  if (value === undefined) return UNDEFINED;\n  if (value === true) return TRUE;\n  if (value === false) return FALSE;\n  if (value === 0) return ZERO;\n  if (value === '') return EMPTYSTRING;\n\n  if (typeof value === 'object' || typeof value === 'function') {\n    try {\n      var then = value.then;\n      if (typeof then === 'function') {\n        return new Promise(then.bind(value));\n      }\n    } catch (ex) {\n      return new Promise(function (resolve, reject) {\n        reject(ex);\n      });\n    }\n  }\n  return valuePromise(value);\n};\n\nPromise.all = function (arr) {\n  var args = Array.prototype.slice.call(arr);\n\n  return new Promise(function (resolve, reject) {\n    if (args.length === 0) return resolve([]);\n    var remaining = args.length;\n    function res(i, val) {\n      if (val && (typeof val === 'object' || typeof val === 'function')) {\n        if (val instanceof Promise && val.then === Promise.prototype.then) {\n          while (val._81 === 3) {\n            val = val._65;\n          }\n          if (val._81 === 1) return res(i, val._65);\n          if (val._81 === 2) reject(val._65);\n          val.then(function (val) {\n            res(i, val);\n          }, reject);\n          return;\n        } else {\n          var then = val.then;\n          if (typeof then === 'function') {\n            var p = new Promise(then.bind(val));\n            p.then(function (val) {\n              res(i, val);\n            }, reject);\n            return;\n          }\n        }\n      }\n      args[i] = val;\n      if (--remaining === 0) {\n        resolve(args);\n      }\n    }\n    for (var i = 0; i < args.length; i++) {\n      res(i, args[i]);\n    }\n  });\n};\n\nPromise.reject = function (value) {\n  return new Promise(function (resolve, reject) {\n    reject(value);\n  });\n};\n\nPromise.race = function (values) {\n  return new Promise(function (resolve, reject) {\n    values.forEach(function(value){\n      Promise.resolve(value).then(resolve, reject);\n    });\n  });\n};\n\n/* Prototype Methods */\n\nPromise.prototype['catch'] = function (onRejected) {\n  return this.then(null, onRejected);\n};\n\n\n/***/ }),\n\n/***/ \"fWmM\":\n/***/ (function(module, exports, __webpack_require__) {\n\n// Ensure polyfill compatibility between create-react-app and zero-config nwb apps.\n// This is from https://github.com/facebookincubator/create-react-app/blob/master/config/polyfills.js\n\nif (typeof Promise === 'undefined') {\n  // Rejection tracking prevents a common issue where React gets into an\n  // inconsistent state due to an error, but it gets swallowed by a Promise,\n  // and the user has no idea what causes React's erratic future behaviour.\n  __webpack_require__(\"qd0F\").enable()\n  window.Promise = __webpack_require__(\"e2MQ\")\n}\n\n// fetch() polyfill for making API calls\n__webpack_require__(\"loAf\")\n\n// Object.assign() is commonly used with React.\n// It will use the native implementation if it's present and isn't buggy.\nObject.assign = __webpack_require__(\"82LK\")\n\n\n/***/ }),\n\n/***/ \"jFIt\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__style_css__ = __webpack_require__(\"NNls\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__style_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__style_css__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_preact__ = __webpack_require__(\"EF6w\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_preact___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_preact__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_preact_smitty__ = __webpack_require__(\"97Jz\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_preact_smitty___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_preact_smitty__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__src__ = __webpack_require__(\"lVK7\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_raw_loader_App_js__ = __webpack_require__(\"+iyJ\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_raw_loader_App_js___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_raw_loader_App_js__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_localforage__ = __webpack_require__(\"22C0\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_localforage___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5_localforage__);\nvar _this = this,\n    _store$handleActions;\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step(\"next\", value); }, function (err) { step(\"throw\", err); }); } } return step(\"next\"); }); }; }\n\n/** @jsx h */\n\n\n\n\n\n\n\n__WEBPACK_IMPORTED_MODULE_5_localforage___default.a.config({ name: 'smitty_photo_booth' });\n\nvar pp = function pp(obj) {\n  return JSON.stringify(obj, null, 2);\n};\nvar getId = function getId() {\n  return new Date().toString();\n};\n\nvar store = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__src__[\"a\" /* createStore */])({\n  camera: {\n    recording: false,\n    stream: new window.MediaStream(),\n    images: []\n  },\n  ui: {\n    selectedImageId: null\n  }\n});\n\nstore.createActions({\n  startMediaStream: function startMediaStream(constraints) {\n    return function () {\n      var _ref = _asyncToGenerator(regeneratorRuntime.mark(function _callee(store) {\n        var stream;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.prev = 0;\n                _context.next = 3;\n                return navigator.mediaDevices.getUserMedia(constraints);\n\n              case 3:\n                stream = _context.sent;\n\n                store.actions.mediaStreamSuccess(stream);\n                _context.next = 10;\n                break;\n\n              case 7:\n                _context.prev = 7;\n                _context.t0 = _context['catch'](0);\n\n                store.actions.mediaStreamError(_context.t0);\n\n              case 10:\n              case 'end':\n                return _context.stop();\n            }\n          }\n        }, _callee, _this, [[0, 7]]);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }();\n  },\n  mediaStreamSuccess: 'camera/STREAM_SUCCESS',\n  mediaStreamError: 'camera/STREAM_ERROR',\n  addImages: 'camera/ADD_IMAGES',\n  saveImage: function saveImage(url) {\n    return function (store) {\n      var id = getId();\n      var image = { id: id, url: url };\n      store.actions.addImages([image]);\n\n      __WEBPACK_IMPORTED_MODULE_5_localforage___default.a.getItem('images').then(function (images) {\n        images.push(image);\n        __WEBPACK_IMPORTED_MODULE_5_localforage___default.a.setItem('images', images);\n      }).catch(function (err) {\n        return console.log('Could not save image to db', err);\n      });\n    };\n  },\n  selectImage: function selectImage(id) {\n    return function (store) {\n      store.actions.setSelectedImageById(id);\n      window.history.pushState({}, '', id || '/');\n    };\n  },\n  setSelectedImageById: 'ui/SELECT_IMAGE'\n});\n\nstore.handleActions((_store$handleActions = {}, _store$handleActions[store.actions.mediaStreamSuccess] = function (state, stream) {\n  state.camera.stream = stream;\n}, _store$handleActions[store.actions.mediaStreamError] = function (state, error) {\n  state.camera.streamError = error;\n}, _store$handleActions[store.actions.addImages] = function (state, images) {\n  state.camera.images = state.camera.images.concat(images);\n}, _store$handleActions[store.actions.setSelectedImageById] = function (state, imageId) {\n  state.ui.selectedImageId = imageId;\n}, _store$handleActions));\n\n__WEBPACK_IMPORTED_MODULE_5_localforage___default.a.getItem('images').then(function (images) {\n  if (images) {\n    store.actions.addImages(images);\n  } else {\n    __WEBPACK_IMPORTED_MODULE_5_localforage___default.a.setItem('images', []);\n  }\n});\n\nif (window.location.pathname !== '/') {\n  store.actions.setSelectedImageById(decodeURI(window.location.pathname).split('/')[1]);\n}\n\nwindow.onpopstate = function (event) {\n  store.actions.setSelectedImageById(decodeURI(window.location.pathname).split('/')[1]);\n};\n\nvar Camera = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2_preact_smitty__[\"connect\"])(function (state) {\n  return {\n    stream: state.camera.stream,\n    streamError: state.camera.streamError\n  };\n})(function (_Component) {\n  _inherits(Camera, _Component);\n\n  function Camera() {\n    var _temp, _this2, _ret;\n\n    _classCallCheck(this, Camera);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this2 = _possibleConstructorReturn(this, _Component.call.apply(_Component, [this].concat(args))), _this2), _this2.video = null, _this2.canvas = null, _this2.handleClick = function () {\n      var canvas = _this2.canvas;\n      var ctx = canvas.getContext('2d');\n      var width = _this2.video.videoWidth;\n      var height = _this2.video.videoHeight;\n      canvas.width = width;\n      canvas.height = height;\n      ctx.fillRect(0, 0, width, height);\n      ctx.drawImage(_this2.video, 0, 0, width, height);\n\n      _this2.context.store.actions.saveImage(canvas.toDataURL('image/webp'));\n    }, _temp), _possibleConstructorReturn(_this2, _ret);\n  }\n\n  Camera.prototype.componentDidMount = function componentDidMount() {\n    this.context.store.actions.startMediaStream({\n      audio: false,\n      video: true\n    });\n  };\n\n  Camera.prototype.render = function render(_ref2) {\n    var _this3 = this;\n\n    var streamError = _ref2.streamError;\n\n    return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1_preact__[\"h\"])(\n      'div',\n      {\n        style: {\n          paddingTop: 16,\n          paddingRight: 16,\n          paddingBottom: 16,\n          paddingLeft: 16\n        }\n      },\n      __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1_preact__[\"h\"])(\n        'h3',\n        {\n          style: {\n            height: streamError ? 24 : 0,\n            lineHeight: '1.2',\n            marginBottom: 16,\n            textAlign: 'center',\n            color: '#ff6b6b',\n            opacity: streamError ? 1 : 0,\n            transition: 'all 250ms ease-in-out'\n          }\n        },\n        streamError ? streamError.name : ''\n      ),\n      __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1_preact__[\"h\"])('video', {\n        ref: function ref(node) {\n          _this3.video = node;\n        },\n        style: {\n          width: '100%',\n          maxHeight: 'calc(50vh - 16px)',\n          background: '#212529',\n          cursor: 'pointer'\n        },\n        src: window.URL ? window.URL.createObjectURL(this.props.stream) : this.props.stream,\n        autoplay: true,\n        muted: true,\n        onClick: this.handleClick\n      }),\n      __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1_preact__[\"h\"])('canvas', {\n        ref: function ref(node) {\n          _this3.canvas = node;\n        },\n        style: { display: 'none' }\n      }),\n      __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1_preact__[\"h\"])(\n        'div',\n        {\n          style: {\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'center',\n            width: '100%',\n            marginTop: 16,\n            marginBottom: 16\n          }\n        },\n        __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1_preact__[\"h\"])(\n          'button',\n          {\n            style: {\n              paddingTop: 8,\n              paddingRight: 16,\n              paddingBottom: 8,\n              paddingLeft: 16,\n              margin: '0 auto',\n              fontSize: 20,\n              lineHeight: '1.6',\n              color: '#adb5bd',\n              background: '#343a40',\n              border: 'none',\n              outline: 'none',\n              boxShadow: 'none',\n              borderRadius: 5,\n              cursor: 'pointer',\n              opacity: streamError ? 0 : 1,\n              transition: 'all 250ms ease-in-out'\n            },\n            disabled: streamError,\n            type: 'button',\n            onClick: this.handleClick\n          },\n          'Take Picture'\n        )\n      )\n    );\n  };\n\n  return Camera;\n}(__WEBPACK_IMPORTED_MODULE_1_preact__[\"Component\"]));\n\nvar ImageList = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2_preact_smitty__[\"connect\"])(function (state) {\n  return {\n    images: state.camera.images,\n    selectedImageId: state.ui.selectedImageId\n  };\n})(function ImageList(_ref3, _ref4) {\n  var images = _ref3.images,\n      selectedImageId = _ref3.selectedImageId;\n  var store = _ref4.store;\n\n  return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1_preact__[\"h\"])(\n    'div',\n    {\n      style: {\n        display: 'flex',\n        flexFlow: 'wrap'\n      }\n    },\n    images.map(function (image, i) {\n      return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1_preact__[\"h\"])(Image, {\n        key: image.id,\n        image: image,\n        index: i,\n        selected: image.id === selectedImageId,\n        onClick: function onClick() {\n          store.actions.selectImage(image.id === selectedImageId ? null : image.id);\n        }\n      });\n    })\n  );\n});\n\nfunction Image(_ref5) {\n  var image = _ref5.image,\n      index = _ref5.index,\n      _onClick = _ref5.onClick,\n      selected = _ref5.selected;\n\n  var wrapperStyles = selected ? {\n    position: 'fixed',\n    top: 0,\n    left: 0,\n    right: 0,\n    bottom: 0,\n    width: '100%',\n    height: '100%',\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n    background: '#f8f9fa',\n    zIndex: 10\n  } : {\n    position: 'relative',\n    flex: '0 1 auto',\n    width: 'calc(33% - 4px)',\n    order: index * -1,\n    paddingTop: 2,\n    paddingRight: 2,\n    paddingBottom: 0,\n    paddingLeft: 2\n  };\n\n  var imgStyles = selected ? { width: '90%', maxHeight: '90%', borderRadius: 8 } : { width: '100%', borderRadius: 4 };\n\n  return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1_preact__[\"h\"])(\n    'a',\n    {\n      style: wrapperStyles,\n      href: image.url,\n      target: '_blank',\n      onClick: function onClick(e) {\n        e.preventDefault();\n        _onClick();\n      }\n    },\n    __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1_preact__[\"h\"])('img', { src: image.url, style: imgStyles })\n  );\n}\n\nfunction GithubRibbon() {\n  return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1_preact__[\"h\"])('iframe', {\n    src: 'https://ghbtns.com/github-btn.html?user=tkh44&repo=smitty&type=star&count=true&size=large',\n    frameborder: '0',\n    scrolling: '0',\n    width: '160px',\n    height: '30px',\n    style: { marginLeft: 'auto' }\n  });\n}\n\nvar App = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2_preact_smitty__[\"connect\"])(function (state) {\n  return state;\n})(function (props) {\n  var _ref6;\n\n  return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1_preact__[\"h\"])(\n    'div',\n    { style: { display: 'flex' } },\n    __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1_preact__[\"h\"])(\n      'div',\n      {\n        style: (_ref6 = {\n          flex: '1 0 50%',\n          height: '100vh',\n          background: '#212529',\n          overflow: 'auto',\n          WebkitOverflowScrolling: 'touch'\n        }, _ref6['background'] = props.camera.streamError ? '#f8f9fa' : '#212529', _ref6.cursor = 'pointer', _ref6.transition = 'all 250ms ease-in-out', _ref6)\n      },\n      __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1_preact__[\"h\"])(Camera, null)\n    ),\n    __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1_preact__[\"h\"])(\n      'div',\n      {\n        style: {\n          flex: '1 0 50%',\n          height: '100vh',\n          background: '#f8f9fa',\n          borderLeft: '1px solid #dee2e6',\n          overflow: 'auto',\n          WebkitOverflowScrolling: 'touch'\n        }\n      },\n      __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1_preact__[\"h\"])(\n        'div',\n        {\n          style: {\n            display: 'flex',\n            alignItems: 'center',\n            borderBottom: '1px solid #dee2e6',\n            paddingRight: 8,\n            paddingLeft: 8\n          }\n        },\n        __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1_preact__[\"h\"])(\n          'h2',\n          null,\n          'Smitty Photo Booth Demo'\n        ),\n        __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1_preact__[\"h\"])(\n          'a',\n          {\n            href: 'https://github.com/tkh44/smitty/tree/master/demo/src',\n            style: { fontSize: '1rem', color: '#329af0', marginLeft: 8 },\n            target: '_blank'\n          },\n          'source'\n        ),\n        __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1_preact__[\"h\"])(GithubRibbon, null)\n      ),\n      __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1_preact__[\"h\"])(ImageList, null)\n    )\n  );\n});\n\nvar Root = function Root(props) {\n  return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1_preact__[\"h\"])(\n    __WEBPACK_IMPORTED_MODULE_2_preact_smitty__[\"Provider\"],\n    { store: store },\n    __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1_preact__[\"h\"])(App, null)\n  );\n};\n\n/* harmony default export */ __webpack_exports__[\"default\"] = Root;\n\n/***/ }),\n\n/***/ \"lVK7\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_mitt__ = __webpack_require__(\"tNdy\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_mitt___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_mitt__);\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = createStore;\n\n\nfunction Store(initialState) {\n  var _state = initialState;\n  this.actions = {};\n  this.events = __WEBPACK_IMPORTED_MODULE_0_mitt___default()();\n  this.on = this.events.on;\n  this.off = this.events.off;\n  this.emit = this.emit.bind(this);\n  this.handleActions = this.handleActions.bind(this);\n\n  Object.defineProperty(this, 'state', {\n    get: function get() {\n      return _state;\n    },\n    set: function set(value) {\n      _state = value;\n    }\n  });\n}\n\nObject.assign(Store.prototype, {\n  emit: function emit(type, payload) {\n    if (typeof type === 'function') return type(this);\n    this.events.emit(type, payload);\n  },\n  createActions: function createActions(actionMap) {\n    var _this = this;\n\n    var _loop = function _loop(creatorName) {\n      var type = actionMap[creatorName];\n      var actionCreator = void 0;\n      if (typeof type === 'function') {\n        actionCreator = function actionCreator(payload) {\n          return _this.emit(type(payload));\n        };\n      } else {\n        actionCreator = function actionCreator(payload) {\n          return _this.emit(type, payload);\n        };\n        actionCreator.toString = function () {\n          return type.toString();\n        };\n      }\n      _this.actions[creatorName] = actionCreator;\n    };\n\n    for (var creatorName in actionMap) {\n      _loop(creatorName);\n    }\n  },\n  handleActions: function handleActions(handlerMap) {\n    var _this2 = this;\n\n    var _loop2 = function _loop2(_type) {\n      var handler = function handler(eventType, e) {\n        if (eventType.substring(0, 8) === '$$store:') return;\n        _this2.state = handlerMap[_type](_this2.state, e, eventType) || _this2.state;\n        _this2.events.emit('$$store:state:change', _this2.state);\n      };\n      if (_type !== '*') {\n        handler = handler.bind(null, _type);\n      }\n      _this2.events.on(_type, handler);\n    };\n\n    for (var _type in handlerMap) {\n      _loop2(_type);\n    }\n  }\n});\n\nfunction createStore(initialState) {\n  return new Store(initialState);\n}\n\n/***/ }),\n\n/***/ \"loAf\":\n/***/ (function(module, exports) {\n\n(function(self) {\n  'use strict';\n\n  if (self.fetch) {\n    return\n  }\n\n  var support = {\n    searchParams: 'URLSearchParams' in self,\n    iterable: 'Symbol' in self && 'iterator' in Symbol,\n    blob: 'FileReader' in self && 'Blob' in self && (function() {\n      try {\n        new Blob()\n        return true\n      } catch(e) {\n        return false\n      }\n    })(),\n    formData: 'FormData' in self,\n    arrayBuffer: 'ArrayBuffer' in self\n  }\n\n  if (support.arrayBuffer) {\n    var viewClasses = [\n      '[object Int8Array]',\n      '[object Uint8Array]',\n      '[object Uint8ClampedArray]',\n      '[object Int16Array]',\n      '[object Uint16Array]',\n      '[object Int32Array]',\n      '[object Uint32Array]',\n      '[object Float32Array]',\n      '[object Float64Array]'\n    ]\n\n    var isDataView = function(obj) {\n      return obj && DataView.prototype.isPrototypeOf(obj)\n    }\n\n    var isArrayBufferView = ArrayBuffer.isView || function(obj) {\n      return obj && viewClasses.indexOf(Object.prototype.toString.call(obj)) > -1\n    }\n  }\n\n  function normalizeName(name) {\n    if (typeof name !== 'string') {\n      name = String(name)\n    }\n    if (/[^a-z0-9\\-#$%&'*+.\\^_`|~]/i.test(name)) {\n      throw new TypeError('Invalid character in header field name')\n    }\n    return name.toLowerCase()\n  }\n\n  function normalizeValue(value) {\n    if (typeof value !== 'string') {\n      value = String(value)\n    }\n    return value\n  }\n\n  // Build a destructive iterator for the value list\n  function iteratorFor(items) {\n    var iterator = {\n      next: function() {\n        var value = items.shift()\n        return {done: value === undefined, value: value}\n      }\n    }\n\n    if (support.iterable) {\n      iterator[Symbol.iterator] = function() {\n        return iterator\n      }\n    }\n\n    return iterator\n  }\n\n  function Headers(headers) {\n    this.map = {}\n\n    if (headers instanceof Headers) {\n      headers.forEach(function(value, name) {\n        this.append(name, value)\n      }, this)\n\n    } else if (headers) {\n      Object.getOwnPropertyNames(headers).forEach(function(name) {\n        this.append(name, headers[name])\n      }, this)\n    }\n  }\n\n  Headers.prototype.append = function(name, value) {\n    name = normalizeName(name)\n    value = normalizeValue(value)\n    var oldValue = this.map[name]\n    this.map[name] = oldValue ? oldValue+','+value : value\n  }\n\n  Headers.prototype['delete'] = function(name) {\n    delete this.map[normalizeName(name)]\n  }\n\n  Headers.prototype.get = function(name) {\n    name = normalizeName(name)\n    return this.has(name) ? this.map[name] : null\n  }\n\n  Headers.prototype.has = function(name) {\n    return this.map.hasOwnProperty(normalizeName(name))\n  }\n\n  Headers.prototype.set = function(name, value) {\n    this.map[normalizeName(name)] = normalizeValue(value)\n  }\n\n  Headers.prototype.forEach = function(callback, thisArg) {\n    for (var name in this.map) {\n      if (this.map.hasOwnProperty(name)) {\n        callback.call(thisArg, this.map[name], name, this)\n      }\n    }\n  }\n\n  Headers.prototype.keys = function() {\n    var items = []\n    this.forEach(function(value, name) { items.push(name) })\n    return iteratorFor(items)\n  }\n\n  Headers.prototype.values = function() {\n    var items = []\n    this.forEach(function(value) { items.push(value) })\n    return iteratorFor(items)\n  }\n\n  Headers.prototype.entries = function() {\n    var items = []\n    this.forEach(function(value, name) { items.push([name, value]) })\n    return iteratorFor(items)\n  }\n\n  if (support.iterable) {\n    Headers.prototype[Symbol.iterator] = Headers.prototype.entries\n  }\n\n  function consumed(body) {\n    if (body.bodyUsed) {\n      return Promise.reject(new TypeError('Already read'))\n    }\n    body.bodyUsed = true\n  }\n\n  function fileReaderReady(reader) {\n    return new Promise(function(resolve, reject) {\n      reader.onload = function() {\n        resolve(reader.result)\n      }\n      reader.onerror = function() {\n        reject(reader.error)\n      }\n    })\n  }\n\n  function readBlobAsArrayBuffer(blob) {\n    var reader = new FileReader()\n    var promise = fileReaderReady(reader)\n    reader.readAsArrayBuffer(blob)\n    return promise\n  }\n\n  function readBlobAsText(blob) {\n    var reader = new FileReader()\n    var promise = fileReaderReady(reader)\n    reader.readAsText(blob)\n    return promise\n  }\n\n  function readArrayBufferAsText(buf) {\n    var view = new Uint8Array(buf)\n    var chars = new Array(view.length)\n\n    for (var i = 0; i < view.length; i++) {\n      chars[i] = String.fromCharCode(view[i])\n    }\n    return chars.join('')\n  }\n\n  function bufferClone(buf) {\n    if (buf.slice) {\n      return buf.slice(0)\n    } else {\n      var view = new Uint8Array(buf.byteLength)\n      view.set(new Uint8Array(buf))\n      return view.buffer\n    }\n  }\n\n  function Body() {\n    this.bodyUsed = false\n\n    this._initBody = function(body) {\n      this._bodyInit = body\n      if (!body) {\n        this._bodyText = ''\n      } else if (typeof body === 'string') {\n        this._bodyText = body\n      } else if (support.blob && Blob.prototype.isPrototypeOf(body)) {\n        this._bodyBlob = body\n      } else if (support.formData && FormData.prototype.isPrototypeOf(body)) {\n        this._bodyFormData = body\n      } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n        this._bodyText = body.toString()\n      } else if (support.arrayBuffer && support.blob && isDataView(body)) {\n        this._bodyArrayBuffer = bufferClone(body.buffer)\n        // IE 10-11 can't handle a DataView body.\n        this._bodyInit = new Blob([this._bodyArrayBuffer])\n      } else if (support.arrayBuffer && (ArrayBuffer.prototype.isPrototypeOf(body) || isArrayBufferView(body))) {\n        this._bodyArrayBuffer = bufferClone(body)\n      } else {\n        throw new Error('unsupported BodyInit type')\n      }\n\n      if (!this.headers.get('content-type')) {\n        if (typeof body === 'string') {\n          this.headers.set('content-type', 'text/plain;charset=UTF-8')\n        } else if (this._bodyBlob && this._bodyBlob.type) {\n          this.headers.set('content-type', this._bodyBlob.type)\n        } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n          this.headers.set('content-type', 'application/x-www-form-urlencoded;charset=UTF-8')\n        }\n      }\n    }\n\n    if (support.blob) {\n      this.blob = function() {\n        var rejected = consumed(this)\n        if (rejected) {\n          return rejected\n        }\n\n        if (this._bodyBlob) {\n          return Promise.resolve(this._bodyBlob)\n        } else if (this._bodyArrayBuffer) {\n          return Promise.resolve(new Blob([this._bodyArrayBuffer]))\n        } else if (this._bodyFormData) {\n          throw new Error('could not read FormData body as blob')\n        } else {\n          return Promise.resolve(new Blob([this._bodyText]))\n        }\n      }\n\n      this.arrayBuffer = function() {\n        if (this._bodyArrayBuffer) {\n          return consumed(this) || Promise.resolve(this._bodyArrayBuffer)\n        } else {\n          return this.blob().then(readBlobAsArrayBuffer)\n        }\n      }\n    }\n\n    this.text = function() {\n      var rejected = consumed(this)\n      if (rejected) {\n        return rejected\n      }\n\n      if (this._bodyBlob) {\n        return readBlobAsText(this._bodyBlob)\n      } else if (this._bodyArrayBuffer) {\n        return Promise.resolve(readArrayBufferAsText(this._bodyArrayBuffer))\n      } else if (this._bodyFormData) {\n        throw new Error('could not read FormData body as text')\n      } else {\n        return Promise.resolve(this._bodyText)\n      }\n    }\n\n    if (support.formData) {\n      this.formData = function() {\n        return this.text().then(decode)\n      }\n    }\n\n    this.json = function() {\n      return this.text().then(JSON.parse)\n    }\n\n    return this\n  }\n\n  // HTTP methods whose capitalization should be normalized\n  var methods = ['DELETE', 'GET', 'HEAD', 'OPTIONS', 'POST', 'PUT']\n\n  function normalizeMethod(method) {\n    var upcased = method.toUpperCase()\n    return (methods.indexOf(upcased) > -1) ? upcased : method\n  }\n\n  function Request(input, options) {\n    options = options || {}\n    var body = options.body\n\n    if (input instanceof Request) {\n      if (input.bodyUsed) {\n        throw new TypeError('Already read')\n      }\n      this.url = input.url\n      this.credentials = input.credentials\n      if (!options.headers) {\n        this.headers = new Headers(input.headers)\n      }\n      this.method = input.method\n      this.mode = input.mode\n      if (!body && input._bodyInit != null) {\n        body = input._bodyInit\n        input.bodyUsed = true\n      }\n    } else {\n      this.url = String(input)\n    }\n\n    this.credentials = options.credentials || this.credentials || 'omit'\n    if (options.headers || !this.headers) {\n      this.headers = new Headers(options.headers)\n    }\n    this.method = normalizeMethod(options.method || this.method || 'GET')\n    this.mode = options.mode || this.mode || null\n    this.referrer = null\n\n    if ((this.method === 'GET' || this.method === 'HEAD') && body) {\n      throw new TypeError('Body not allowed for GET or HEAD requests')\n    }\n    this._initBody(body)\n  }\n\n  Request.prototype.clone = function() {\n    return new Request(this, { body: this._bodyInit })\n  }\n\n  function decode(body) {\n    var form = new FormData()\n    body.trim().split('&').forEach(function(bytes) {\n      if (bytes) {\n        var split = bytes.split('=')\n        var name = split.shift().replace(/\\+/g, ' ')\n        var value = split.join('=').replace(/\\+/g, ' ')\n        form.append(decodeURIComponent(name), decodeURIComponent(value))\n      }\n    })\n    return form\n  }\n\n  function parseHeaders(rawHeaders) {\n    var headers = new Headers()\n    rawHeaders.split(/\\r?\\n/).forEach(function(line) {\n      var parts = line.split(':')\n      var key = parts.shift().trim()\n      if (key) {\n        var value = parts.join(':').trim()\n        headers.append(key, value)\n      }\n    })\n    return headers\n  }\n\n  Body.call(Request.prototype)\n\n  function Response(bodyInit, options) {\n    if (!options) {\n      options = {}\n    }\n\n    this.type = 'default'\n    this.status = 'status' in options ? options.status : 200\n    this.ok = this.status >= 200 && this.status < 300\n    this.statusText = 'statusText' in options ? options.statusText : 'OK'\n    this.headers = new Headers(options.headers)\n    this.url = options.url || ''\n    this._initBody(bodyInit)\n  }\n\n  Body.call(Response.prototype)\n\n  Response.prototype.clone = function() {\n    return new Response(this._bodyInit, {\n      status: this.status,\n      statusText: this.statusText,\n      headers: new Headers(this.headers),\n      url: this.url\n    })\n  }\n\n  Response.error = function() {\n    var response = new Response(null, {status: 0, statusText: ''})\n    response.type = 'error'\n    return response\n  }\n\n  var redirectStatuses = [301, 302, 303, 307, 308]\n\n  Response.redirect = function(url, status) {\n    if (redirectStatuses.indexOf(status) === -1) {\n      throw new RangeError('Invalid status code')\n    }\n\n    return new Response(null, {status: status, headers: {location: url}})\n  }\n\n  self.Headers = Headers\n  self.Request = Request\n  self.Response = Response\n\n  self.fetch = function(input, init) {\n    return new Promise(function(resolve, reject) {\n      var request = new Request(input, init)\n      var xhr = new XMLHttpRequest()\n\n      xhr.onload = function() {\n        var options = {\n          status: xhr.status,\n          statusText: xhr.statusText,\n          headers: parseHeaders(xhr.getAllResponseHeaders() || '')\n        }\n        options.url = 'responseURL' in xhr ? xhr.responseURL : options.headers.get('X-Request-URL')\n        var body = 'response' in xhr ? xhr.response : xhr.responseText\n        resolve(new Response(body, options))\n      }\n\n      xhr.onerror = function() {\n        reject(new TypeError('Network request failed'))\n      }\n\n      xhr.ontimeout = function() {\n        reject(new TypeError('Network request failed'))\n      }\n\n      xhr.open(request.method, request.url, true)\n\n      if (request.credentials === 'include') {\n        xhr.withCredentials = true\n      }\n\n      if ('responseType' in xhr && support.blob) {\n        xhr.responseType = 'blob'\n      }\n\n      request.headers.forEach(function(value, name) {\n        xhr.setRequestHeader(name, value)\n      })\n\n      xhr.send(typeof request._bodyInit === 'undefined' ? null : request._bodyInit)\n    })\n  }\n  self.fetch.polyfill = true\n})(typeof self !== 'undefined' ? self : this);\n\n\n/***/ }),\n\n/***/ \"qd0F\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar Promise = __webpack_require__(\"UPH/\");\n\nvar DEFAULT_WHITELIST = [\n  ReferenceError,\n  TypeError,\n  RangeError\n];\n\nvar enabled = false;\nexports.disable = disable;\nfunction disable() {\n  enabled = false;\n  Promise._10 = null;\n  Promise._97 = null;\n}\n\nexports.enable = enable;\nfunction enable(options) {\n  options = options || {};\n  if (enabled) disable();\n  enabled = true;\n  var id = 0;\n  var displayId = 0;\n  var rejections = {};\n  Promise._10 = function (promise) {\n    if (\n      promise._81 === 2 && // IS REJECTED\n      rejections[promise._72]\n    ) {\n      if (rejections[promise._72].logged) {\n        onHandled(promise._72);\n      } else {\n        clearTimeout(rejections[promise._72].timeout);\n      }\n      delete rejections[promise._72];\n    }\n  };\n  Promise._97 = function (promise, err) {\n    if (promise._45 === 0) { // not yet handled\n      promise._72 = id++;\n      rejections[promise._72] = {\n        displayId: null,\n        error: err,\n        timeout: setTimeout(\n          onUnhandled.bind(null, promise._72),\n          // For reference errors and type errors, this almost always\n          // means the programmer made a mistake, so log them after just\n          // 100ms\n          // otherwise, wait 2 seconds to see if they get handled\n          matchWhitelist(err, DEFAULT_WHITELIST)\n            ? 100\n            : 2000\n        ),\n        logged: false\n      };\n    }\n  };\n  function onUnhandled(id) {\n    if (\n      options.allRejections ||\n      matchWhitelist(\n        rejections[id].error,\n        options.whitelist || DEFAULT_WHITELIST\n      )\n    ) {\n      rejections[id].displayId = displayId++;\n      if (options.onUnhandled) {\n        rejections[id].logged = true;\n        options.onUnhandled(\n          rejections[id].displayId,\n          rejections[id].error\n        );\n      } else {\n        rejections[id].logged = true;\n        logError(\n          rejections[id].displayId,\n          rejections[id].error\n        );\n      }\n    }\n  }\n  function onHandled(id) {\n    if (rejections[id].logged) {\n      if (options.onHandled) {\n        options.onHandled(rejections[id].displayId, rejections[id].error);\n      } else if (!rejections[id].onUnhandled) {\n        console.warn(\n          'Promise Rejection Handled (id: ' + rejections[id].displayId + '):'\n        );\n        console.warn(\n          '  This means you can ignore any previous messages of the form \"Possible Unhandled Promise Rejection\" with id ' +\n          rejections[id].displayId + '.'\n        );\n      }\n    }\n  }\n}\n\nfunction logError(id, error) {\n  console.warn('Possible Unhandled Promise Rejection (id: ' + id + '):');\n  var errStr = (error && (error.stack || error)) + '';\n  errStr.split('\\n').forEach(function (line) {\n    console.warn('  ' + line);\n  });\n}\n\nfunction matchWhitelist(error, list) {\n  return list.some(function (cls) {\n    return error instanceof cls;\n  });\n}\n\n/***/ }),\n\n/***/ \"tNdy\":\n/***/ (function(module, exports) {\n\nfunction n(n){return n=n||Object.create(null),{on:function(t,o){(n[t]||(n[t]=[])).push(o)},off:function(t,o){var u=n[t]||(n[t]=[]);u.splice(u.indexOf(o)>>>0,1)},emit:function(t,o){(n[t]||[]).map(function(n){n(o)}),(n[\"*\"]||[]).map(function(n){n(t,o)})}}}module.exports=n;\n//# sourceMappingURL=mitt.js.map\n\n/***/ })\n\n},[0]);\n\n\n// WEBPACK FOOTER //\n// demo.77d79ca1.js","module.exports = \"var _this = this,\\n    _store$handleActions;\\n\\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\\\"Cannot call a class as a function\\\"); } }\\n\\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\\\"this hasn't been initialised - super() hasn't been called\\\"); } return call && (typeof call === \\\"object\\\" || typeof call === \\\"function\\\") ? call : self; }\\n\\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \\\"function\\\" && superClass !== null) { throw new TypeError(\\\"Super expression must either be null or a function, not \\\" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\\n\\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step(\\\"next\\\", value); }, function (err) { step(\\\"throw\\\", err); }); } } return step(\\\"next\\\"); }); }; }\\n\\n/** @jsx h */\\nimport './style.css';\\nimport { render, h, Component } from 'preact';\\nimport { Provider, connect } from 'preact-smitty';\\nimport { createStore } from '../../src';\\nimport source from 'raw-loader!./App.js';\\nimport localforage from 'localforage';\\n\\nlocalforage.config({ name: 'smitty_photo_booth' });\\n\\nvar pp = function pp(obj) {\\n  return JSON.stringify(obj, null, 2);\\n};\\nvar getId = function getId() {\\n  return new Date().toString();\\n};\\n\\nvar store = createStore({\\n  camera: {\\n    recording: false,\\n    stream: new window.MediaStream(),\\n    images: []\\n  },\\n  ui: {\\n    selectedImageId: null\\n  }\\n});\\n\\nstore.createActions({\\n  startMediaStream: function startMediaStream(constraints) {\\n    return function () {\\n      var _ref = _asyncToGenerator(regeneratorRuntime.mark(function _callee(store) {\\n        var stream;\\n        return regeneratorRuntime.wrap(function _callee$(_context) {\\n          while (1) {\\n            switch (_context.prev = _context.next) {\\n              case 0:\\n                _context.prev = 0;\\n                _context.next = 3;\\n                return navigator.mediaDevices.getUserMedia(constraints);\\n\\n              case 3:\\n                stream = _context.sent;\\n\\n                store.actions.mediaStreamSuccess(stream);\\n                _context.next = 10;\\n                break;\\n\\n              case 7:\\n                _context.prev = 7;\\n                _context.t0 = _context['catch'](0);\\n\\n                store.actions.mediaStreamError(_context.t0);\\n\\n              case 10:\\n              case 'end':\\n                return _context.stop();\\n            }\\n          }\\n        }, _callee, _this, [[0, 7]]);\\n      }));\\n\\n      return function (_x) {\\n        return _ref.apply(this, arguments);\\n      };\\n    }();\\n  },\\n  mediaStreamSuccess: 'camera/STREAM_SUCCESS',\\n  mediaStreamError: 'camera/STREAM_ERROR',\\n  addImages: 'camera/ADD_IMAGES',\\n  saveImage: function saveImage(url) {\\n    return function (store) {\\n      var id = getId();\\n      var image = { id: id, url: url };\\n      store.actions.addImages([image]);\\n\\n      localforage.getItem('images').then(function (images) {\\n        images.push(image);\\n        localforage.setItem('images', images);\\n      }).catch(function (err) {\\n        return console.log('Could not save image to db', err);\\n      });\\n    };\\n  },\\n  selectImage: function selectImage(id) {\\n    return function (store) {\\n      store.actions.setSelectedImageById(id);\\n      window.history.pushState({}, '', id || '/');\\n    };\\n  },\\n  setSelectedImageById: 'ui/SELECT_IMAGE'\\n});\\n\\nstore.handleActions((_store$handleActions = {}, _store$handleActions[store.actions.mediaStreamSuccess] = function (state, stream) {\\n  state.camera.stream = stream;\\n}, _store$handleActions[store.actions.mediaStreamError] = function (state, error) {\\n  state.camera.streamError = error;\\n}, _store$handleActions[store.actions.addImages] = function (state, images) {\\n  state.camera.images = state.camera.images.concat(images);\\n}, _store$handleActions[store.actions.setSelectedImageById] = function (state, imageId) {\\n  state.ui.selectedImageId = imageId;\\n}, _store$handleActions));\\n\\nlocalforage.getItem('images').then(function (images) {\\n  if (images) {\\n    store.actions.addImages(images);\\n  } else {\\n    localforage.setItem('images', []);\\n  }\\n});\\n\\nif (window.location.pathname !== '/') {\\n  store.actions.setSelectedImageById(decodeURI(window.location.pathname).split('/')[1]);\\n}\\n\\nwindow.onpopstate = function (event) {\\n  store.actions.setSelectedImageById(decodeURI(window.location.pathname).split('/')[1]);\\n};\\n\\nvar Camera = connect(function (state) {\\n  return {\\n    stream: state.camera.stream,\\n    streamError: state.camera.streamError\\n  };\\n})(function (_Component) {\\n  _inherits(Camera, _Component);\\n\\n  function Camera() {\\n    var _temp, _this2, _ret;\\n\\n    _classCallCheck(this, Camera);\\n\\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\\n      args[_key] = arguments[_key];\\n    }\\n\\n    return _ret = (_temp = (_this2 = _possibleConstructorReturn(this, _Component.call.apply(_Component, [this].concat(args))), _this2), _this2.video = null, _this2.canvas = null, _this2.handleClick = function () {\\n      var canvas = _this2.canvas;\\n      var ctx = canvas.getContext('2d');\\n      var width = _this2.video.videoWidth;\\n      var height = _this2.video.videoHeight;\\n      canvas.width = width;\\n      canvas.height = height;\\n      ctx.fillRect(0, 0, width, height);\\n      ctx.drawImage(_this2.video, 0, 0, width, height);\\n\\n      _this2.context.store.actions.saveImage(canvas.toDataURL('image/webp'));\\n    }, _temp), _possibleConstructorReturn(_this2, _ret);\\n  }\\n\\n  Camera.prototype.componentDidMount = function componentDidMount() {\\n    this.context.store.actions.startMediaStream({\\n      audio: false,\\n      video: true\\n    });\\n  };\\n\\n  Camera.prototype.render = function render(_ref2) {\\n    var _this3 = this;\\n\\n    var streamError = _ref2.streamError;\\n\\n    return h(\\n      'div',\\n      {\\n        style: {\\n          paddingTop: 16,\\n          paddingRight: 16,\\n          paddingBottom: 16,\\n          paddingLeft: 16\\n        }\\n      },\\n      h(\\n        'h3',\\n        {\\n          style: {\\n            height: streamError ? 24 : 0,\\n            lineHeight: '1.2',\\n            marginBottom: 16,\\n            textAlign: 'center',\\n            color: '#ff6b6b',\\n            opacity: streamError ? 1 : 0,\\n            transition: 'all 250ms ease-in-out'\\n          }\\n        },\\n        streamError ? streamError.name : ''\\n      ),\\n      h('video', {\\n        ref: function ref(node) {\\n          _this3.video = node;\\n        },\\n        style: {\\n          width: '100%',\\n          maxHeight: 'calc(50vh - 16px)',\\n          background: '#212529',\\n          cursor: 'pointer'\\n        },\\n        src: window.URL ? window.URL.createObjectURL(this.props.stream) : this.props.stream,\\n        autoplay: true,\\n        muted: true,\\n        onClick: this.handleClick\\n      }),\\n      h('canvas', {\\n        ref: function ref(node) {\\n          _this3.canvas = node;\\n        },\\n        style: { display: 'none' }\\n      }),\\n      h(\\n        'div',\\n        {\\n          style: {\\n            display: 'flex',\\n            alignItems: 'center',\\n            justifyContent: 'center',\\n            width: '100%',\\n            marginTop: 16,\\n            marginBottom: 16\\n          }\\n        },\\n        h(\\n          'button',\\n          {\\n            style: {\\n              paddingTop: 8,\\n              paddingRight: 16,\\n              paddingBottom: 8,\\n              paddingLeft: 16,\\n              margin: '0 auto',\\n              fontSize: 20,\\n              lineHeight: '1.6',\\n              color: '#adb5bd',\\n              background: '#343a40',\\n              border: 'none',\\n              outline: 'none',\\n              boxShadow: 'none',\\n              borderRadius: 5,\\n              cursor: 'pointer',\\n              opacity: streamError ? 0 : 1,\\n              transition: 'all 250ms ease-in-out'\\n            },\\n            disabled: streamError,\\n            type: 'button',\\n            onClick: this.handleClick\\n          },\\n          'Take Picture'\\n        )\\n      )\\n    );\\n  };\\n\\n  return Camera;\\n}(Component));\\n\\nvar ImageList = connect(function (state) {\\n  return {\\n    images: state.camera.images,\\n    selectedImageId: state.ui.selectedImageId\\n  };\\n})(function ImageList(_ref3, _ref4) {\\n  var images = _ref3.images,\\n      selectedImageId = _ref3.selectedImageId;\\n  var store = _ref4.store;\\n\\n  return h(\\n    'div',\\n    {\\n      style: {\\n        display: 'flex',\\n        flexFlow: 'wrap'\\n      }\\n    },\\n    images.map(function (image, i) {\\n      return h(Image, {\\n        key: image.id,\\n        image: image,\\n        index: i,\\n        selected: image.id === selectedImageId,\\n        onClick: function onClick() {\\n          store.actions.selectImage(image.id === selectedImageId ? null : image.id);\\n        }\\n      });\\n    })\\n  );\\n});\\n\\nfunction Image(_ref5) {\\n  var image = _ref5.image,\\n      index = _ref5.index,\\n      _onClick = _ref5.onClick,\\n      selected = _ref5.selected;\\n\\n  var wrapperStyles = selected ? {\\n    position: 'fixed',\\n    top: 0,\\n    left: 0,\\n    right: 0,\\n    bottom: 0,\\n    width: '100%',\\n    height: '100%',\\n    display: 'flex',\\n    alignItems: 'center',\\n    justifyContent: 'center',\\n    background: '#f8f9fa',\\n    zIndex: 10\\n  } : {\\n    position: 'relative',\\n    flex: '0 1 auto',\\n    width: 'calc(33% - 4px)',\\n    order: index * -1,\\n    paddingTop: 2,\\n    paddingRight: 2,\\n    paddingBottom: 0,\\n    paddingLeft: 2\\n  };\\n\\n  var imgStyles = selected ? { width: '90%', maxHeight: '90%', borderRadius: 8 } : { width: '100%', borderRadius: 4 };\\n\\n  return h(\\n    'a',\\n    {\\n      style: wrapperStyles,\\n      href: image.url,\\n      target: '_blank',\\n      onClick: function onClick(e) {\\n        e.preventDefault();\\n        _onClick();\\n      }\\n    },\\n    h('img', { src: image.url, style: imgStyles })\\n  );\\n}\\n\\nfunction GithubRibbon() {\\n  return h('iframe', {\\n    src: 'https://ghbtns.com/github-btn.html?user=tkh44&repo=smitty&type=star&count=true&size=large',\\n    frameborder: '0',\\n    scrolling: '0',\\n    width: '160px',\\n    height: '30px',\\n    style: { marginLeft: 'auto' }\\n  });\\n}\\n\\nvar App = connect(function (state) {\\n  return state;\\n})(function (props) {\\n  var _ref6;\\n\\n  return h(\\n    'div',\\n    { style: { display: 'flex' } },\\n    h(\\n      'div',\\n      {\\n        style: (_ref6 = {\\n          flex: '1 0 50%',\\n          height: '100vh',\\n          background: '#212529',\\n          overflow: 'auto',\\n          WebkitOverflowScrolling: 'touch'\\n        }, _ref6['background'] = props.camera.streamError ? '#f8f9fa' : '#212529', _ref6.cursor = 'pointer', _ref6.transition = 'all 250ms ease-in-out', _ref6)\\n      },\\n      h(Camera, null)\\n    ),\\n    h(\\n      'div',\\n      {\\n        style: {\\n          flex: '1 0 50%',\\n          height: '100vh',\\n          background: '#f8f9fa',\\n          borderLeft: '1px solid #dee2e6',\\n          overflow: 'auto',\\n          WebkitOverflowScrolling: 'touch'\\n        }\\n      },\\n      h(\\n        'div',\\n        {\\n          style: {\\n            display: 'flex',\\n            alignItems: 'center',\\n            borderBottom: '1px solid #dee2e6',\\n            paddingRight: 8,\\n            paddingLeft: 8\\n          }\\n        },\\n        h(\\n          'h2',\\n          null,\\n          'Smitty Photo Booth Demo'\\n        ),\\n        h(\\n          'a',\\n          {\\n            href: 'https://github.com/tkh44/smitty/tree/master/demo/src',\\n            style: { fontSize: '1rem', color: '#329af0', marginLeft: 8 },\\n            target: '_blank'\\n          },\\n          'source'\\n        ),\\n        h(GithubRibbon, null)\\n      ),\\n      h(ImageList, null)\\n    )\\n  );\\n});\\n\\nvar Root = function Root(props) {\\n  return h(\\n    Provider,\\n    { store: store },\\n    h(App, null)\\n  );\\n};\\n\\nexport default Root;\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/raw-loader!./demo/src/App.js\n// module id = +iyJ\n// module chunks = 0","/*!\n    localForage -- Offline Storage, Improved\n    Version 1.5.0\n    https://localforage.github.io/localForage\n    (c) 2013-2017 Mozilla, Apache License 2.0\n*/\n(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g.localforage = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw (f.code=\"MODULE_NOT_FOUND\", f)}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(_dereq_,module,exports){\n(function (global){\n'use strict';\nvar Mutation = global.MutationObserver || global.WebKitMutationObserver;\n\nvar scheduleDrain;\n\n{\n  if (Mutation) {\n    var called = 0;\n    var observer = new Mutation(nextTick);\n    var element = global.document.createTextNode('');\n    observer.observe(element, {\n      characterData: true\n    });\n    scheduleDrain = function () {\n      element.data = (called = ++called % 2);\n    };\n  } else if (!global.setImmediate && typeof global.MessageChannel !== 'undefined') {\n    var channel = new global.MessageChannel();\n    channel.port1.onmessage = nextTick;\n    scheduleDrain = function () {\n      channel.port2.postMessage(0);\n    };\n  } else if ('document' in global && 'onreadystatechange' in global.document.createElement('script')) {\n    scheduleDrain = function () {\n\n      // Create a <script> element; its readystatechange event will be fired asynchronously once it is inserted\n      // into the document. Do so, thus queuing up the task. Remember to clean up once it's been called.\n      var scriptEl = global.document.createElement('script');\n      scriptEl.onreadystatechange = function () {\n        nextTick();\n\n        scriptEl.onreadystatechange = null;\n        scriptEl.parentNode.removeChild(scriptEl);\n        scriptEl = null;\n      };\n      global.document.documentElement.appendChild(scriptEl);\n    };\n  } else {\n    scheduleDrain = function () {\n      setTimeout(nextTick, 0);\n    };\n  }\n}\n\nvar draining;\nvar queue = [];\n//named nextTick for less confusing stack traces\nfunction nextTick() {\n  draining = true;\n  var i, oldQueue;\n  var len = queue.length;\n  while (len) {\n    oldQueue = queue;\n    queue = [];\n    i = -1;\n    while (++i < len) {\n      oldQueue[i]();\n    }\n    len = queue.length;\n  }\n  draining = false;\n}\n\nmodule.exports = immediate;\nfunction immediate(task) {\n  if (queue.push(task) === 1 && !draining) {\n    scheduleDrain();\n  }\n}\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{}],2:[function(_dereq_,module,exports){\n'use strict';\nvar immediate = _dereq_(1);\n\n/* istanbul ignore next */\nfunction INTERNAL() {}\n\nvar handlers = {};\n\nvar REJECTED = ['REJECTED'];\nvar FULFILLED = ['FULFILLED'];\nvar PENDING = ['PENDING'];\n\nmodule.exports = exports = Promise;\n\nfunction Promise(resolver) {\n  if (typeof resolver !== 'function') {\n    throw new TypeError('resolver must be a function');\n  }\n  this.state = PENDING;\n  this.queue = [];\n  this.outcome = void 0;\n  if (resolver !== INTERNAL) {\n    safelyResolveThenable(this, resolver);\n  }\n}\n\nPromise.prototype[\"catch\"] = function (onRejected) {\n  return this.then(null, onRejected);\n};\nPromise.prototype.then = function (onFulfilled, onRejected) {\n  if (typeof onFulfilled !== 'function' && this.state === FULFILLED ||\n    typeof onRejected !== 'function' && this.state === REJECTED) {\n    return this;\n  }\n  var promise = new this.constructor(INTERNAL);\n  if (this.state !== PENDING) {\n    var resolver = this.state === FULFILLED ? onFulfilled : onRejected;\n    unwrap(promise, resolver, this.outcome);\n  } else {\n    this.queue.push(new QueueItem(promise, onFulfilled, onRejected));\n  }\n\n  return promise;\n};\nfunction QueueItem(promise, onFulfilled, onRejected) {\n  this.promise = promise;\n  if (typeof onFulfilled === 'function') {\n    this.onFulfilled = onFulfilled;\n    this.callFulfilled = this.otherCallFulfilled;\n  }\n  if (typeof onRejected === 'function') {\n    this.onRejected = onRejected;\n    this.callRejected = this.otherCallRejected;\n  }\n}\nQueueItem.prototype.callFulfilled = function (value) {\n  handlers.resolve(this.promise, value);\n};\nQueueItem.prototype.otherCallFulfilled = function (value) {\n  unwrap(this.promise, this.onFulfilled, value);\n};\nQueueItem.prototype.callRejected = function (value) {\n  handlers.reject(this.promise, value);\n};\nQueueItem.prototype.otherCallRejected = function (value) {\n  unwrap(this.promise, this.onRejected, value);\n};\n\nfunction unwrap(promise, func, value) {\n  immediate(function () {\n    var returnValue;\n    try {\n      returnValue = func(value);\n    } catch (e) {\n      return handlers.reject(promise, e);\n    }\n    if (returnValue === promise) {\n      handlers.reject(promise, new TypeError('Cannot resolve promise with itself'));\n    } else {\n      handlers.resolve(promise, returnValue);\n    }\n  });\n}\n\nhandlers.resolve = function (self, value) {\n  var result = tryCatch(getThen, value);\n  if (result.status === 'error') {\n    return handlers.reject(self, result.value);\n  }\n  var thenable = result.value;\n\n  if (thenable) {\n    safelyResolveThenable(self, thenable);\n  } else {\n    self.state = FULFILLED;\n    self.outcome = value;\n    var i = -1;\n    var len = self.queue.length;\n    while (++i < len) {\n      self.queue[i].callFulfilled(value);\n    }\n  }\n  return self;\n};\nhandlers.reject = function (self, error) {\n  self.state = REJECTED;\n  self.outcome = error;\n  var i = -1;\n  var len = self.queue.length;\n  while (++i < len) {\n    self.queue[i].callRejected(error);\n  }\n  return self;\n};\n\nfunction getThen(obj) {\n  // Make sure we only access the accessor once as required by the spec\n  var then = obj && obj.then;\n  if (obj && typeof obj === 'object' && typeof then === 'function') {\n    return function appyThen() {\n      then.apply(obj, arguments);\n    };\n  }\n}\n\nfunction safelyResolveThenable(self, thenable) {\n  // Either fulfill, reject or reject with error\n  var called = false;\n  function onError(value) {\n    if (called) {\n      return;\n    }\n    called = true;\n    handlers.reject(self, value);\n  }\n\n  function onSuccess(value) {\n    if (called) {\n      return;\n    }\n    called = true;\n    handlers.resolve(self, value);\n  }\n\n  function tryToUnwrap() {\n    thenable(onSuccess, onError);\n  }\n\n  var result = tryCatch(tryToUnwrap);\n  if (result.status === 'error') {\n    onError(result.value);\n  }\n}\n\nfunction tryCatch(func, value) {\n  var out = {};\n  try {\n    out.value = func(value);\n    out.status = 'success';\n  } catch (e) {\n    out.status = 'error';\n    out.value = e;\n  }\n  return out;\n}\n\nexports.resolve = resolve;\nfunction resolve(value) {\n  if (value instanceof this) {\n    return value;\n  }\n  return handlers.resolve(new this(INTERNAL), value);\n}\n\nexports.reject = reject;\nfunction reject(reason) {\n  var promise = new this(INTERNAL);\n  return handlers.reject(promise, reason);\n}\n\nexports.all = all;\nfunction all(iterable) {\n  var self = this;\n  if (Object.prototype.toString.call(iterable) !== '[object Array]') {\n    return this.reject(new TypeError('must be an array'));\n  }\n\n  var len = iterable.length;\n  var called = false;\n  if (!len) {\n    return this.resolve([]);\n  }\n\n  var values = new Array(len);\n  var resolved = 0;\n  var i = -1;\n  var promise = new this(INTERNAL);\n\n  while (++i < len) {\n    allResolver(iterable[i], i);\n  }\n  return promise;\n  function allResolver(value, i) {\n    self.resolve(value).then(resolveFromAll, function (error) {\n      if (!called) {\n        called = true;\n        handlers.reject(promise, error);\n      }\n    });\n    function resolveFromAll(outValue) {\n      values[i] = outValue;\n      if (++resolved === len && !called) {\n        called = true;\n        handlers.resolve(promise, values);\n      }\n    }\n  }\n}\n\nexports.race = race;\nfunction race(iterable) {\n  var self = this;\n  if (Object.prototype.toString.call(iterable) !== '[object Array]') {\n    return this.reject(new TypeError('must be an array'));\n  }\n\n  var len = iterable.length;\n  var called = false;\n  if (!len) {\n    return this.resolve([]);\n  }\n\n  var i = -1;\n  var promise = new this(INTERNAL);\n\n  while (++i < len) {\n    resolver(iterable[i]);\n  }\n  return promise;\n  function resolver(value) {\n    self.resolve(value).then(function (response) {\n      if (!called) {\n        called = true;\n        handlers.resolve(promise, response);\n      }\n    }, function (error) {\n      if (!called) {\n        called = true;\n        handlers.reject(promise, error);\n      }\n    });\n  }\n}\n\n},{\"1\":1}],3:[function(_dereq_,module,exports){\n(function (global){\n'use strict';\nif (typeof global.Promise !== 'function') {\n  global.Promise = _dereq_(2);\n}\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{\"2\":2}],4:[function(_dereq_,module,exports){\n'use strict';\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction getIDB() {\n    /* global indexedDB,webkitIndexedDB,mozIndexedDB,OIndexedDB,msIndexedDB */\n    try {\n        if (typeof indexedDB !== 'undefined') {\n            return indexedDB;\n        }\n        if (typeof webkitIndexedDB !== 'undefined') {\n            return webkitIndexedDB;\n        }\n        if (typeof mozIndexedDB !== 'undefined') {\n            return mozIndexedDB;\n        }\n        if (typeof OIndexedDB !== 'undefined') {\n            return OIndexedDB;\n        }\n        if (typeof msIndexedDB !== 'undefined') {\n            return msIndexedDB;\n        }\n    } catch (e) {}\n}\n\nvar idb = getIDB();\n\nfunction isIndexedDBValid() {\n    try {\n        // Initialize IndexedDB; fall back to vendor-prefixed versions\n        // if needed.\n        if (!idb) {\n            return false;\n        }\n        // We mimic PouchDB here;\n        //\n        // We test for openDatabase because IE Mobile identifies itself\n        // as Safari. Oh the lulz...\n        var isSafari = typeof openDatabase !== 'undefined' && /(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent) && !/Chrome/.test(navigator.userAgent) && !/BlackBerry/.test(navigator.platform);\n\n        var hasFetch = typeof fetch === 'function' && fetch.toString().indexOf('[native code') !== -1;\n\n        // Safari <10.1 does not meet our requirements for IDB support (#5572)\n        // since Safari 10.1 shipped with fetch, we can use that to detect it\n        return (!isSafari || hasFetch) && typeof indexedDB !== 'undefined' &&\n        // some outdated implementations of IDB that appear on Samsung\n        // and HTC Android devices <4.4 are missing IDBKeyRange\n        typeof IDBKeyRange !== 'undefined';\n    } catch (e) {\n        return false;\n    }\n}\n\nfunction isWebSQLValid() {\n    return typeof openDatabase === 'function';\n}\n\nfunction isLocalStorageValid() {\n    try {\n        return typeof localStorage !== 'undefined' && 'setItem' in localStorage && localStorage.setItem;\n    } catch (e) {\n        return false;\n    }\n}\n\n// Abstracts constructing a Blob object, so it also works in older\n// browsers that don't support the native Blob constructor. (i.e.\n// old QtWebKit versions, at least).\n// Abstracts constructing a Blob object, so it also works in older\n// browsers that don't support the native Blob constructor. (i.e.\n// old QtWebKit versions, at least).\nfunction createBlob(parts, properties) {\n    /* global BlobBuilder,MSBlobBuilder,MozBlobBuilder,WebKitBlobBuilder */\n    parts = parts || [];\n    properties = properties || {};\n    try {\n        return new Blob(parts, properties);\n    } catch (e) {\n        if (e.name !== 'TypeError') {\n            throw e;\n        }\n        var Builder = typeof BlobBuilder !== 'undefined' ? BlobBuilder : typeof MSBlobBuilder !== 'undefined' ? MSBlobBuilder : typeof MozBlobBuilder !== 'undefined' ? MozBlobBuilder : WebKitBlobBuilder;\n        var builder = new Builder();\n        for (var i = 0; i < parts.length; i += 1) {\n            builder.append(parts[i]);\n        }\n        return builder.getBlob(properties.type);\n    }\n}\n\n// This is CommonJS because lie is an external dependency, so Rollup\n// can just ignore it.\nif (typeof Promise === 'undefined') {\n    // In the \"nopromises\" build this will just throw if you don't have\n    // a global promise object, but it would throw anyway later.\n    _dereq_(3);\n}\nvar Promise$1 = Promise;\n\nfunction executeCallback(promise, callback) {\n    if (callback) {\n        promise.then(function (result) {\n            callback(null, result);\n        }, function (error) {\n            callback(error);\n        });\n    }\n}\n\nfunction executeTwoCallbacks(promise, callback, errorCallback) {\n    if (typeof callback === 'function') {\n        promise.then(callback);\n    }\n\n    if (typeof errorCallback === 'function') {\n        promise[\"catch\"](errorCallback);\n    }\n}\n\n// Some code originally from async_storage.js in\n// [Gaia](https://github.com/mozilla-b2g/gaia).\n\nvar DETECT_BLOB_SUPPORT_STORE = 'local-forage-detect-blob-support';\nvar supportsBlobs;\nvar dbContexts;\nvar toString = Object.prototype.toString;\n\n// Transform a binary string to an array buffer, because otherwise\n// weird stuff happens when you try to work with the binary string directly.\n// It is known.\n// From http://stackoverflow.com/questions/14967647/ (continues on next line)\n// encode-decode-image-with-base64-breaks-image (2013-04-21)\nfunction _binStringToArrayBuffer(bin) {\n    var length = bin.length;\n    var buf = new ArrayBuffer(length);\n    var arr = new Uint8Array(buf);\n    for (var i = 0; i < length; i++) {\n        arr[i] = bin.charCodeAt(i);\n    }\n    return buf;\n}\n\n//\n// Blobs are not supported in all versions of IndexedDB, notably\n// Chrome <37 and Android <5. In those versions, storing a blob will throw.\n//\n// Various other blob bugs exist in Chrome v37-42 (inclusive).\n// Detecting them is expensive and confusing to users, and Chrome 37-42\n// is at very low usage worldwide, so we do a hacky userAgent check instead.\n//\n// content-type bug: https://code.google.com/p/chromium/issues/detail?id=408120\n// 404 bug: https://code.google.com/p/chromium/issues/detail?id=447916\n// FileReader bug: https://code.google.com/p/chromium/issues/detail?id=447836\n//\n// Code borrowed from PouchDB. See:\n// https://github.com/pouchdb/pouchdb/blob/master/packages/node_modules/pouchdb-adapter-idb/src/blobSupport.js\n//\nfunction _checkBlobSupportWithoutCaching(idb) {\n    return new Promise$1(function (resolve) {\n        var txn = idb.transaction(DETECT_BLOB_SUPPORT_STORE, 'readwrite');\n        var blob = createBlob(['']);\n        txn.objectStore(DETECT_BLOB_SUPPORT_STORE).put(blob, 'key');\n\n        txn.onabort = function (e) {\n            // If the transaction aborts now its due to not being able to\n            // write to the database, likely due to the disk being full\n            e.preventDefault();\n            e.stopPropagation();\n            resolve(false);\n        };\n\n        txn.oncomplete = function () {\n            var matchedChrome = navigator.userAgent.match(/Chrome\\/(\\d+)/);\n            var matchedEdge = navigator.userAgent.match(/Edge\\//);\n            // MS Edge pretends to be Chrome 42:\n            // https://msdn.microsoft.com/en-us/library/hh869301%28v=vs.85%29.aspx\n            resolve(matchedEdge || !matchedChrome || parseInt(matchedChrome[1], 10) >= 43);\n        };\n    })[\"catch\"](function () {\n        return false; // error, so assume unsupported\n    });\n}\n\nfunction _checkBlobSupport(idb) {\n    if (typeof supportsBlobs === 'boolean') {\n        return Promise$1.resolve(supportsBlobs);\n    }\n    return _checkBlobSupportWithoutCaching(idb).then(function (value) {\n        supportsBlobs = value;\n        return supportsBlobs;\n    });\n}\n\nfunction _deferReadiness(dbInfo) {\n    var dbContext = dbContexts[dbInfo.name];\n\n    // Create a deferred object representing the current database operation.\n    var deferredOperation = {};\n\n    deferredOperation.promise = new Promise$1(function (resolve) {\n        deferredOperation.resolve = resolve;\n    });\n\n    // Enqueue the deferred operation.\n    dbContext.deferredOperations.push(deferredOperation);\n\n    // Chain its promise to the database readiness.\n    if (!dbContext.dbReady) {\n        dbContext.dbReady = deferredOperation.promise;\n    } else {\n        dbContext.dbReady = dbContext.dbReady.then(function () {\n            return deferredOperation.promise;\n        });\n    }\n}\n\nfunction _advanceReadiness(dbInfo) {\n    var dbContext = dbContexts[dbInfo.name];\n\n    // Dequeue a deferred operation.\n    var deferredOperation = dbContext.deferredOperations.pop();\n\n    // Resolve its promise (which is part of the database readiness\n    // chain of promises).\n    if (deferredOperation) {\n        deferredOperation.resolve();\n    }\n}\n\nfunction _getConnection(dbInfo, upgradeNeeded) {\n    return new Promise$1(function (resolve, reject) {\n\n        if (dbInfo.db) {\n            if (upgradeNeeded) {\n                _deferReadiness(dbInfo);\n                dbInfo.db.close();\n            } else {\n                return resolve(dbInfo.db);\n            }\n        }\n\n        var dbArgs = [dbInfo.name];\n\n        if (upgradeNeeded) {\n            dbArgs.push(dbInfo.version);\n        }\n\n        var openreq = idb.open.apply(idb, dbArgs);\n\n        if (upgradeNeeded) {\n            openreq.onupgradeneeded = function (e) {\n                var db = openreq.result;\n                try {\n                    db.createObjectStore(dbInfo.storeName);\n                    if (e.oldVersion <= 1) {\n                        // Added when support for blob shims was added\n                        db.createObjectStore(DETECT_BLOB_SUPPORT_STORE);\n                    }\n                } catch (ex) {\n                    if (ex.name === 'ConstraintError') {\n                        console.warn('The database \"' + dbInfo.name + '\"' + ' has been upgraded from version ' + e.oldVersion + ' to version ' + e.newVersion + ', but the storage \"' + dbInfo.storeName + '\" already exists.');\n                    } else {\n                        throw ex;\n                    }\n                }\n            };\n        }\n\n        openreq.onerror = function (e) {\n            e.preventDefault();\n            reject(openreq.error);\n        };\n\n        openreq.onsuccess = function () {\n            resolve(openreq.result);\n            _advanceReadiness(dbInfo);\n        };\n    });\n}\n\nfunction _getOriginalConnection(dbInfo) {\n    return _getConnection(dbInfo, false);\n}\n\nfunction _getUpgradedConnection(dbInfo) {\n    return _getConnection(dbInfo, true);\n}\n\nfunction _isUpgradeNeeded(dbInfo, defaultVersion) {\n    if (!dbInfo.db) {\n        return true;\n    }\n\n    var isNewStore = !dbInfo.db.objectStoreNames.contains(dbInfo.storeName);\n    var isDowngrade = dbInfo.version < dbInfo.db.version;\n    var isUpgrade = dbInfo.version > dbInfo.db.version;\n\n    if (isDowngrade) {\n        // If the version is not the default one\n        // then warn for impossible downgrade.\n        if (dbInfo.version !== defaultVersion) {\n            console.warn('The database \"' + dbInfo.name + '\"' + ' can\\'t be downgraded from version ' + dbInfo.db.version + ' to version ' + dbInfo.version + '.');\n        }\n        // Align the versions to prevent errors.\n        dbInfo.version = dbInfo.db.version;\n    }\n\n    if (isUpgrade || isNewStore) {\n        // If the store is new then increment the version (if needed).\n        // This will trigger an \"upgradeneeded\" event which is required\n        // for creating a store.\n        if (isNewStore) {\n            var incVersion = dbInfo.db.version + 1;\n            if (incVersion > dbInfo.version) {\n                dbInfo.version = incVersion;\n            }\n        }\n\n        return true;\n    }\n\n    return false;\n}\n\n// encode a blob for indexeddb engines that don't support blobs\nfunction _encodeBlob(blob) {\n    return new Promise$1(function (resolve, reject) {\n        var reader = new FileReader();\n        reader.onerror = reject;\n        reader.onloadend = function (e) {\n            var base64 = btoa(e.target.result || '');\n            resolve({\n                __local_forage_encoded_blob: true,\n                data: base64,\n                type: blob.type\n            });\n        };\n        reader.readAsBinaryString(blob);\n    });\n}\n\n// decode an encoded blob\nfunction _decodeBlob(encodedBlob) {\n    var arrayBuff = _binStringToArrayBuffer(atob(encodedBlob.data));\n    return createBlob([arrayBuff], { type: encodedBlob.type });\n}\n\n// is this one of our fancy encoded blobs?\nfunction _isEncodedBlob(value) {\n    return value && value.__local_forage_encoded_blob;\n}\n\n// Specialize the default `ready()` function by making it dependent\n// on the current database operations. Thus, the driver will be actually\n// ready when it's been initialized (default) *and* there are no pending\n// operations on the database (initiated by some other instances).\nfunction _fullyReady(callback) {\n    var self = this;\n\n    var promise = self._initReady().then(function () {\n        var dbContext = dbContexts[self._dbInfo.name];\n\n        if (dbContext && dbContext.dbReady) {\n            return dbContext.dbReady;\n        }\n    });\n\n    executeTwoCallbacks(promise, callback, callback);\n    return promise;\n}\n\n// Open the IndexedDB database (automatically creates one if one didn't\n// previously exist), using any options set in the config.\nfunction _initStorage(options) {\n    var self = this;\n    var dbInfo = {\n        db: null\n    };\n\n    if (options) {\n        for (var i in options) {\n            dbInfo[i] = options[i];\n        }\n    }\n\n    // Initialize a singleton container for all running localForages.\n    if (!dbContexts) {\n        dbContexts = {};\n    }\n\n    // Get the current context of the database;\n    var dbContext = dbContexts[dbInfo.name];\n\n    // ...or create a new context.\n    if (!dbContext) {\n        dbContext = {\n            // Running localForages sharing a database.\n            forages: [],\n            // Shared database.\n            db: null,\n            // Database readiness (promise).\n            dbReady: null,\n            // Deferred operations on the database.\n            deferredOperations: []\n        };\n        // Register the new context in the global container.\n        dbContexts[dbInfo.name] = dbContext;\n    }\n\n    // Register itself as a running localForage in the current context.\n    dbContext.forages.push(self);\n\n    // Replace the default `ready()` function with the specialized one.\n    if (!self._initReady) {\n        self._initReady = self.ready;\n        self.ready = _fullyReady;\n    }\n\n    // Create an array of initialization states of the related localForages.\n    var initPromises = [];\n\n    function ignoreErrors() {\n        // Don't handle errors here,\n        // just makes sure related localForages aren't pending.\n        return Promise$1.resolve();\n    }\n\n    for (var j = 0; j < dbContext.forages.length; j++) {\n        var forage = dbContext.forages[j];\n        if (forage !== self) {\n            // Don't wait for itself...\n            initPromises.push(forage._initReady()[\"catch\"](ignoreErrors));\n        }\n    }\n\n    // Take a snapshot of the related localForages.\n    var forages = dbContext.forages.slice(0);\n\n    // Initialize the connection process only when\n    // all the related localForages aren't pending.\n    return Promise$1.all(initPromises).then(function () {\n        dbInfo.db = dbContext.db;\n        // Get the connection or open a new one without upgrade.\n        return _getOriginalConnection(dbInfo);\n    }).then(function (db) {\n        dbInfo.db = db;\n        if (_isUpgradeNeeded(dbInfo, self._defaultConfig.version)) {\n            // Reopen the database for upgrading.\n            return _getUpgradedConnection(dbInfo);\n        }\n        return db;\n    }).then(function (db) {\n        dbInfo.db = dbContext.db = db;\n        self._dbInfo = dbInfo;\n        // Share the final connection amongst related localForages.\n        for (var k = 0; k < forages.length; k++) {\n            var forage = forages[k];\n            if (forage !== self) {\n                // Self is already up-to-date.\n                forage._dbInfo.db = dbInfo.db;\n                forage._dbInfo.version = dbInfo.version;\n            }\n        }\n    });\n}\n\nfunction getItem(key, callback) {\n    var self = this;\n\n    // Cast the key to a string, as that's all we can set as a key.\n    if (typeof key !== 'string') {\n        console.warn(key + ' used as a key, but it is not a string.');\n        key = String(key);\n    }\n\n    var promise = new Promise$1(function (resolve, reject) {\n        self.ready().then(function () {\n            var dbInfo = self._dbInfo;\n            var store = dbInfo.db.transaction(dbInfo.storeName, 'readonly').objectStore(dbInfo.storeName);\n            var req = store.get(key);\n\n            req.onsuccess = function () {\n                var value = req.result;\n                if (value === undefined) {\n                    value = null;\n                }\n                if (_isEncodedBlob(value)) {\n                    value = _decodeBlob(value);\n                }\n                resolve(value);\n            };\n\n            req.onerror = function () {\n                reject(req.error);\n            };\n        })[\"catch\"](reject);\n    });\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\n// Iterate over all items stored in database.\nfunction iterate(iterator, callback) {\n    var self = this;\n\n    var promise = new Promise$1(function (resolve, reject) {\n        self.ready().then(function () {\n            var dbInfo = self._dbInfo;\n            var store = dbInfo.db.transaction(dbInfo.storeName, 'readonly').objectStore(dbInfo.storeName);\n\n            var req = store.openCursor();\n            var iterationNumber = 1;\n\n            req.onsuccess = function () {\n                var cursor = req.result;\n\n                if (cursor) {\n                    var value = cursor.value;\n                    if (_isEncodedBlob(value)) {\n                        value = _decodeBlob(value);\n                    }\n                    var result = iterator(value, cursor.key, iterationNumber++);\n\n                    if (result !== void 0) {\n                        resolve(result);\n                    } else {\n                        cursor[\"continue\"]();\n                    }\n                } else {\n                    resolve();\n                }\n            };\n\n            req.onerror = function () {\n                reject(req.error);\n            };\n        })[\"catch\"](reject);\n    });\n\n    executeCallback(promise, callback);\n\n    return promise;\n}\n\nfunction setItem(key, value, callback) {\n    var self = this;\n\n    // Cast the key to a string, as that's all we can set as a key.\n    if (typeof key !== 'string') {\n        console.warn(key + ' used as a key, but it is not a string.');\n        key = String(key);\n    }\n\n    var promise = new Promise$1(function (resolve, reject) {\n        var dbInfo;\n        self.ready().then(function () {\n            dbInfo = self._dbInfo;\n            if (toString.call(value) === '[object Blob]') {\n                return _checkBlobSupport(dbInfo.db).then(function (blobSupport) {\n                    if (blobSupport) {\n                        return value;\n                    }\n                    return _encodeBlob(value);\n                });\n            }\n            return value;\n        }).then(function (value) {\n            var transaction = dbInfo.db.transaction(dbInfo.storeName, 'readwrite');\n            var store = transaction.objectStore(dbInfo.storeName);\n            var req = store.put(value, key);\n\n            // The reason we don't _save_ null is because IE 10 does\n            // not support saving the `null` type in IndexedDB. How\n            // ironic, given the bug below!\n            // See: https://github.com/mozilla/localForage/issues/161\n            if (value === null) {\n                value = undefined;\n            }\n\n            transaction.oncomplete = function () {\n                // Cast to undefined so the value passed to\n                // callback/promise is the same as what one would get out\n                // of `getItem()` later. This leads to some weirdness\n                // (setItem('foo', undefined) will return `null`), but\n                // it's not my fault localStorage is our baseline and that\n                // it's weird.\n                if (value === undefined) {\n                    value = null;\n                }\n\n                resolve(value);\n            };\n            transaction.onabort = transaction.onerror = function () {\n                var err = req.error ? req.error : req.transaction.error;\n                reject(err);\n            };\n        })[\"catch\"](reject);\n    });\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\nfunction removeItem(key, callback) {\n    var self = this;\n\n    // Cast the key to a string, as that's all we can set as a key.\n    if (typeof key !== 'string') {\n        console.warn(key + ' used as a key, but it is not a string.');\n        key = String(key);\n    }\n\n    var promise = new Promise$1(function (resolve, reject) {\n        self.ready().then(function () {\n            var dbInfo = self._dbInfo;\n            var transaction = dbInfo.db.transaction(dbInfo.storeName, 'readwrite');\n            var store = transaction.objectStore(dbInfo.storeName);\n\n            // We use a Grunt task to make this safe for IE and some\n            // versions of Android (including those used by Cordova).\n            // Normally IE won't like `.delete()` and will insist on\n            // using `['delete']()`, but we have a build step that\n            // fixes this for us now.\n            var req = store[\"delete\"](key);\n            transaction.oncomplete = function () {\n                resolve();\n            };\n\n            transaction.onerror = function () {\n                reject(req.error);\n            };\n\n            // The request will be also be aborted if we've exceeded our storage\n            // space.\n            transaction.onabort = function () {\n                var err = req.error ? req.error : req.transaction.error;\n                reject(err);\n            };\n        })[\"catch\"](reject);\n    });\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\nfunction clear(callback) {\n    var self = this;\n\n    var promise = new Promise$1(function (resolve, reject) {\n        self.ready().then(function () {\n            var dbInfo = self._dbInfo;\n            var transaction = dbInfo.db.transaction(dbInfo.storeName, 'readwrite');\n            var store = transaction.objectStore(dbInfo.storeName);\n            var req = store.clear();\n\n            transaction.oncomplete = function () {\n                resolve();\n            };\n\n            transaction.onabort = transaction.onerror = function () {\n                var err = req.error ? req.error : req.transaction.error;\n                reject(err);\n            };\n        })[\"catch\"](reject);\n    });\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\nfunction length(callback) {\n    var self = this;\n\n    var promise = new Promise$1(function (resolve, reject) {\n        self.ready().then(function () {\n            var dbInfo = self._dbInfo;\n            var store = dbInfo.db.transaction(dbInfo.storeName, 'readonly').objectStore(dbInfo.storeName);\n            var req = store.count();\n\n            req.onsuccess = function () {\n                resolve(req.result);\n            };\n\n            req.onerror = function () {\n                reject(req.error);\n            };\n        })[\"catch\"](reject);\n    });\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\nfunction key(n, callback) {\n    var self = this;\n\n    var promise = new Promise$1(function (resolve, reject) {\n        if (n < 0) {\n            resolve(null);\n\n            return;\n        }\n\n        self.ready().then(function () {\n            var dbInfo = self._dbInfo;\n            var store = dbInfo.db.transaction(dbInfo.storeName, 'readonly').objectStore(dbInfo.storeName);\n\n            var advanced = false;\n            var req = store.openCursor();\n            req.onsuccess = function () {\n                var cursor = req.result;\n                if (!cursor) {\n                    // this means there weren't enough keys\n                    resolve(null);\n\n                    return;\n                }\n\n                if (n === 0) {\n                    // We have the first key, return it if that's what they\n                    // wanted.\n                    resolve(cursor.key);\n                } else {\n                    if (!advanced) {\n                        // Otherwise, ask the cursor to skip ahead n\n                        // records.\n                        advanced = true;\n                        cursor.advance(n);\n                    } else {\n                        // When we get here, we've got the nth key.\n                        resolve(cursor.key);\n                    }\n                }\n            };\n\n            req.onerror = function () {\n                reject(req.error);\n            };\n        })[\"catch\"](reject);\n    });\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\nfunction keys(callback) {\n    var self = this;\n\n    var promise = new Promise$1(function (resolve, reject) {\n        self.ready().then(function () {\n            var dbInfo = self._dbInfo;\n            var store = dbInfo.db.transaction(dbInfo.storeName, 'readonly').objectStore(dbInfo.storeName);\n\n            var req = store.openCursor();\n            var keys = [];\n\n            req.onsuccess = function () {\n                var cursor = req.result;\n\n                if (!cursor) {\n                    resolve(keys);\n                    return;\n                }\n\n                keys.push(cursor.key);\n                cursor[\"continue\"]();\n            };\n\n            req.onerror = function () {\n                reject(req.error);\n            };\n        })[\"catch\"](reject);\n    });\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\nvar asyncStorage = {\n    _driver: 'asyncStorage',\n    _initStorage: _initStorage,\n    iterate: iterate,\n    getItem: getItem,\n    setItem: setItem,\n    removeItem: removeItem,\n    clear: clear,\n    length: length,\n    key: key,\n    keys: keys\n};\n\n// Sadly, the best way to save binary data in WebSQL/localStorage is serializing\n// it to Base64, so this is how we store it to prevent very strange errors with less\n// verbose ways of binary <-> string data storage.\nvar BASE_CHARS = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\n\nvar BLOB_TYPE_PREFIX = '~~local_forage_type~';\nvar BLOB_TYPE_PREFIX_REGEX = /^~~local_forage_type~([^~]+)~/;\n\nvar SERIALIZED_MARKER = '__lfsc__:';\nvar SERIALIZED_MARKER_LENGTH = SERIALIZED_MARKER.length;\n\n// OMG the serializations!\nvar TYPE_ARRAYBUFFER = 'arbf';\nvar TYPE_BLOB = 'blob';\nvar TYPE_INT8ARRAY = 'si08';\nvar TYPE_UINT8ARRAY = 'ui08';\nvar TYPE_UINT8CLAMPEDARRAY = 'uic8';\nvar TYPE_INT16ARRAY = 'si16';\nvar TYPE_INT32ARRAY = 'si32';\nvar TYPE_UINT16ARRAY = 'ur16';\nvar TYPE_UINT32ARRAY = 'ui32';\nvar TYPE_FLOAT32ARRAY = 'fl32';\nvar TYPE_FLOAT64ARRAY = 'fl64';\nvar TYPE_SERIALIZED_MARKER_LENGTH = SERIALIZED_MARKER_LENGTH + TYPE_ARRAYBUFFER.length;\n\nvar toString$1 = Object.prototype.toString;\n\nfunction stringToBuffer(serializedString) {\n    // Fill the string into a ArrayBuffer.\n    var bufferLength = serializedString.length * 0.75;\n    var len = serializedString.length;\n    var i;\n    var p = 0;\n    var encoded1, encoded2, encoded3, encoded4;\n\n    if (serializedString[serializedString.length - 1] === '=') {\n        bufferLength--;\n        if (serializedString[serializedString.length - 2] === '=') {\n            bufferLength--;\n        }\n    }\n\n    var buffer = new ArrayBuffer(bufferLength);\n    var bytes = new Uint8Array(buffer);\n\n    for (i = 0; i < len; i += 4) {\n        encoded1 = BASE_CHARS.indexOf(serializedString[i]);\n        encoded2 = BASE_CHARS.indexOf(serializedString[i + 1]);\n        encoded3 = BASE_CHARS.indexOf(serializedString[i + 2]);\n        encoded4 = BASE_CHARS.indexOf(serializedString[i + 3]);\n\n        /*jslint bitwise: true */\n        bytes[p++] = encoded1 << 2 | encoded2 >> 4;\n        bytes[p++] = (encoded2 & 15) << 4 | encoded3 >> 2;\n        bytes[p++] = (encoded3 & 3) << 6 | encoded4 & 63;\n    }\n    return buffer;\n}\n\n// Converts a buffer to a string to store, serialized, in the backend\n// storage library.\nfunction bufferToString(buffer) {\n    // base64-arraybuffer\n    var bytes = new Uint8Array(buffer);\n    var base64String = '';\n    var i;\n\n    for (i = 0; i < bytes.length; i += 3) {\n        /*jslint bitwise: true */\n        base64String += BASE_CHARS[bytes[i] >> 2];\n        base64String += BASE_CHARS[(bytes[i] & 3) << 4 | bytes[i + 1] >> 4];\n        base64String += BASE_CHARS[(bytes[i + 1] & 15) << 2 | bytes[i + 2] >> 6];\n        base64String += BASE_CHARS[bytes[i + 2] & 63];\n    }\n\n    if (bytes.length % 3 === 2) {\n        base64String = base64String.substring(0, base64String.length - 1) + '=';\n    } else if (bytes.length % 3 === 1) {\n        base64String = base64String.substring(0, base64String.length - 2) + '==';\n    }\n\n    return base64String;\n}\n\n// Serialize a value, afterwards executing a callback (which usually\n// instructs the `setItem()` callback/promise to be executed). This is how\n// we store binary data with localStorage.\nfunction serialize(value, callback) {\n    var valueType = '';\n    if (value) {\n        valueType = toString$1.call(value);\n    }\n\n    // Cannot use `value instanceof ArrayBuffer` or such here, as these\n    // checks fail when running the tests using casper.js...\n    //\n    // TODO: See why those tests fail and use a better solution.\n    if (value && (valueType === '[object ArrayBuffer]' || value.buffer && toString$1.call(value.buffer) === '[object ArrayBuffer]')) {\n        // Convert binary arrays to a string and prefix the string with\n        // a special marker.\n        var buffer;\n        var marker = SERIALIZED_MARKER;\n\n        if (value instanceof ArrayBuffer) {\n            buffer = value;\n            marker += TYPE_ARRAYBUFFER;\n        } else {\n            buffer = value.buffer;\n\n            if (valueType === '[object Int8Array]') {\n                marker += TYPE_INT8ARRAY;\n            } else if (valueType === '[object Uint8Array]') {\n                marker += TYPE_UINT8ARRAY;\n            } else if (valueType === '[object Uint8ClampedArray]') {\n                marker += TYPE_UINT8CLAMPEDARRAY;\n            } else if (valueType === '[object Int16Array]') {\n                marker += TYPE_INT16ARRAY;\n            } else if (valueType === '[object Uint16Array]') {\n                marker += TYPE_UINT16ARRAY;\n            } else if (valueType === '[object Int32Array]') {\n                marker += TYPE_INT32ARRAY;\n            } else if (valueType === '[object Uint32Array]') {\n                marker += TYPE_UINT32ARRAY;\n            } else if (valueType === '[object Float32Array]') {\n                marker += TYPE_FLOAT32ARRAY;\n            } else if (valueType === '[object Float64Array]') {\n                marker += TYPE_FLOAT64ARRAY;\n            } else {\n                callback(new Error('Failed to get type for BinaryArray'));\n            }\n        }\n\n        callback(marker + bufferToString(buffer));\n    } else if (valueType === '[object Blob]') {\n        // Conver the blob to a binaryArray and then to a string.\n        var fileReader = new FileReader();\n\n        fileReader.onload = function () {\n            // Backwards-compatible prefix for the blob type.\n            var str = BLOB_TYPE_PREFIX + value.type + '~' + bufferToString(this.result);\n\n            callback(SERIALIZED_MARKER + TYPE_BLOB + str);\n        };\n\n        fileReader.readAsArrayBuffer(value);\n    } else {\n        try {\n            callback(JSON.stringify(value));\n        } catch (e) {\n            console.error(\"Couldn't convert value into a JSON string: \", value);\n\n            callback(null, e);\n        }\n    }\n}\n\n// Deserialize data we've inserted into a value column/field. We place\n// special markers into our strings to mark them as encoded; this isn't\n// as nice as a meta field, but it's the only sane thing we can do whilst\n// keeping localStorage support intact.\n//\n// Oftentimes this will just deserialize JSON content, but if we have a\n// special marker (SERIALIZED_MARKER, defined above), we will extract\n// some kind of arraybuffer/binary data/typed array out of the string.\nfunction deserialize(value) {\n    // If we haven't marked this string as being specially serialized (i.e.\n    // something other than serialized JSON), we can just return it and be\n    // done with it.\n    if (value.substring(0, SERIALIZED_MARKER_LENGTH) !== SERIALIZED_MARKER) {\n        return JSON.parse(value);\n    }\n\n    // The following code deals with deserializing some kind of Blob or\n    // TypedArray. First we separate out the type of data we're dealing\n    // with from the data itself.\n    var serializedString = value.substring(TYPE_SERIALIZED_MARKER_LENGTH);\n    var type = value.substring(SERIALIZED_MARKER_LENGTH, TYPE_SERIALIZED_MARKER_LENGTH);\n\n    var blobType;\n    // Backwards-compatible blob type serialization strategy.\n    // DBs created with older versions of localForage will simply not have the blob type.\n    if (type === TYPE_BLOB && BLOB_TYPE_PREFIX_REGEX.test(serializedString)) {\n        var matcher = serializedString.match(BLOB_TYPE_PREFIX_REGEX);\n        blobType = matcher[1];\n        serializedString = serializedString.substring(matcher[0].length);\n    }\n    var buffer = stringToBuffer(serializedString);\n\n    // Return the right type based on the code/type set during\n    // serialization.\n    switch (type) {\n        case TYPE_ARRAYBUFFER:\n            return buffer;\n        case TYPE_BLOB:\n            return createBlob([buffer], { type: blobType });\n        case TYPE_INT8ARRAY:\n            return new Int8Array(buffer);\n        case TYPE_UINT8ARRAY:\n            return new Uint8Array(buffer);\n        case TYPE_UINT8CLAMPEDARRAY:\n            return new Uint8ClampedArray(buffer);\n        case TYPE_INT16ARRAY:\n            return new Int16Array(buffer);\n        case TYPE_UINT16ARRAY:\n            return new Uint16Array(buffer);\n        case TYPE_INT32ARRAY:\n            return new Int32Array(buffer);\n        case TYPE_UINT32ARRAY:\n            return new Uint32Array(buffer);\n        case TYPE_FLOAT32ARRAY:\n            return new Float32Array(buffer);\n        case TYPE_FLOAT64ARRAY:\n            return new Float64Array(buffer);\n        default:\n            throw new Error('Unkown type: ' + type);\n    }\n}\n\nvar localforageSerializer = {\n    serialize: serialize,\n    deserialize: deserialize,\n    stringToBuffer: stringToBuffer,\n    bufferToString: bufferToString\n};\n\n/*\n * Includes code from:\n *\n * base64-arraybuffer\n * https://github.com/niklasvh/base64-arraybuffer\n *\n * Copyright (c) 2012 Niklas von Hertzen\n * Licensed under the MIT license.\n */\n// Open the WebSQL database (automatically creates one if one didn't\n// previously exist), using any options set in the config.\nfunction _initStorage$1(options) {\n    var self = this;\n    var dbInfo = {\n        db: null\n    };\n\n    if (options) {\n        for (var i in options) {\n            dbInfo[i] = typeof options[i] !== 'string' ? options[i].toString() : options[i];\n        }\n    }\n\n    var dbInfoPromise = new Promise$1(function (resolve, reject) {\n        // Open the database; the openDatabase API will automatically\n        // create it for us if it doesn't exist.\n        try {\n            dbInfo.db = openDatabase(dbInfo.name, String(dbInfo.version), dbInfo.description, dbInfo.size);\n        } catch (e) {\n            return reject(e);\n        }\n\n        // Create our key/value table if it doesn't exist.\n        dbInfo.db.transaction(function (t) {\n            t.executeSql('CREATE TABLE IF NOT EXISTS ' + dbInfo.storeName + ' (id INTEGER PRIMARY KEY, key unique, value)', [], function () {\n                self._dbInfo = dbInfo;\n                resolve();\n            }, function (t, error) {\n                reject(error);\n            });\n        });\n    });\n\n    dbInfo.serializer = localforageSerializer;\n    return dbInfoPromise;\n}\n\nfunction getItem$1(key, callback) {\n    var self = this;\n\n    // Cast the key to a string, as that's all we can set as a key.\n    if (typeof key !== 'string') {\n        console.warn(key + ' used as a key, but it is not a string.');\n        key = String(key);\n    }\n\n    var promise = new Promise$1(function (resolve, reject) {\n        self.ready().then(function () {\n            var dbInfo = self._dbInfo;\n            dbInfo.db.transaction(function (t) {\n                t.executeSql('SELECT * FROM ' + dbInfo.storeName + ' WHERE key = ? LIMIT 1', [key], function (t, results) {\n                    var result = results.rows.length ? results.rows.item(0).value : null;\n\n                    // Check to see if this is serialized content we need to\n                    // unpack.\n                    if (result) {\n                        result = dbInfo.serializer.deserialize(result);\n                    }\n\n                    resolve(result);\n                }, function (t, error) {\n\n                    reject(error);\n                });\n            });\n        })[\"catch\"](reject);\n    });\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\nfunction iterate$1(iterator, callback) {\n    var self = this;\n\n    var promise = new Promise$1(function (resolve, reject) {\n        self.ready().then(function () {\n            var dbInfo = self._dbInfo;\n\n            dbInfo.db.transaction(function (t) {\n                t.executeSql('SELECT * FROM ' + dbInfo.storeName, [], function (t, results) {\n                    var rows = results.rows;\n                    var length = rows.length;\n\n                    for (var i = 0; i < length; i++) {\n                        var item = rows.item(i);\n                        var result = item.value;\n\n                        // Check to see if this is serialized content\n                        // we need to unpack.\n                        if (result) {\n                            result = dbInfo.serializer.deserialize(result);\n                        }\n\n                        result = iterator(result, item.key, i + 1);\n\n                        // void(0) prevents problems with redefinition\n                        // of `undefined`.\n                        if (result !== void 0) {\n                            resolve(result);\n                            return;\n                        }\n                    }\n\n                    resolve();\n                }, function (t, error) {\n                    reject(error);\n                });\n            });\n        })[\"catch\"](reject);\n    });\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\nfunction _setItem(key, value, callback, retriesLeft) {\n    var self = this;\n\n    // Cast the key to a string, as that's all we can set as a key.\n    if (typeof key !== 'string') {\n        console.warn(key + ' used as a key, but it is not a string.');\n        key = String(key);\n    }\n\n    var promise = new Promise$1(function (resolve, reject) {\n        self.ready().then(function () {\n            // The localStorage API doesn't return undefined values in an\n            // \"expected\" way, so undefined is always cast to null in all\n            // drivers. See: https://github.com/mozilla/localForage/pull/42\n            if (value === undefined) {\n                value = null;\n            }\n\n            // Save the original value to pass to the callback.\n            var originalValue = value;\n\n            var dbInfo = self._dbInfo;\n            dbInfo.serializer.serialize(value, function (value, error) {\n                if (error) {\n                    reject(error);\n                } else {\n                    dbInfo.db.transaction(function (t) {\n                        t.executeSql('INSERT OR REPLACE INTO ' + dbInfo.storeName + ' (key, value) VALUES (?, ?)', [key, value], function () {\n                            resolve(originalValue);\n                        }, function (t, error) {\n                            reject(error);\n                        });\n                    }, function (sqlError) {\n                        // The transaction failed; check\n                        // to see if it's a quota error.\n                        if (sqlError.code === sqlError.QUOTA_ERR) {\n                            // We reject the callback outright for now, but\n                            // it's worth trying to re-run the transaction.\n                            // Even if the user accepts the prompt to use\n                            // more storage on Safari, this error will\n                            // be called.\n                            //\n                            // Try to re-run the transaction.\n                            if (retriesLeft > 0) {\n                                resolve(_setItem.apply(self, [key, originalValue, callback, retriesLeft - 1]));\n                                return;\n                            }\n                            reject(sqlError);\n                        }\n                    });\n                }\n            });\n        })[\"catch\"](reject);\n    });\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\nfunction setItem$1(key, value, callback) {\n    return _setItem.apply(this, [key, value, callback, 1]);\n}\n\nfunction removeItem$1(key, callback) {\n    var self = this;\n\n    // Cast the key to a string, as that's all we can set as a key.\n    if (typeof key !== 'string') {\n        console.warn(key + ' used as a key, but it is not a string.');\n        key = String(key);\n    }\n\n    var promise = new Promise$1(function (resolve, reject) {\n        self.ready().then(function () {\n            var dbInfo = self._dbInfo;\n            dbInfo.db.transaction(function (t) {\n                t.executeSql('DELETE FROM ' + dbInfo.storeName + ' WHERE key = ?', [key], function () {\n                    resolve();\n                }, function (t, error) {\n\n                    reject(error);\n                });\n            });\n        })[\"catch\"](reject);\n    });\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\n// Deletes every item in the table.\n// TODO: Find out if this resets the AUTO_INCREMENT number.\nfunction clear$1(callback) {\n    var self = this;\n\n    var promise = new Promise$1(function (resolve, reject) {\n        self.ready().then(function () {\n            var dbInfo = self._dbInfo;\n            dbInfo.db.transaction(function (t) {\n                t.executeSql('DELETE FROM ' + dbInfo.storeName, [], function () {\n                    resolve();\n                }, function (t, error) {\n                    reject(error);\n                });\n            });\n        })[\"catch\"](reject);\n    });\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\n// Does a simple `COUNT(key)` to get the number of items stored in\n// localForage.\nfunction length$1(callback) {\n    var self = this;\n\n    var promise = new Promise$1(function (resolve, reject) {\n        self.ready().then(function () {\n            var dbInfo = self._dbInfo;\n            dbInfo.db.transaction(function (t) {\n                // Ahhh, SQL makes this one soooooo easy.\n                t.executeSql('SELECT COUNT(key) as c FROM ' + dbInfo.storeName, [], function (t, results) {\n                    var result = results.rows.item(0).c;\n\n                    resolve(result);\n                }, function (t, error) {\n\n                    reject(error);\n                });\n            });\n        })[\"catch\"](reject);\n    });\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\n// Return the key located at key index X; essentially gets the key from a\n// `WHERE id = ?`. This is the most efficient way I can think to implement\n// this rarely-used (in my experience) part of the API, but it can seem\n// inconsistent, because we do `INSERT OR REPLACE INTO` on `setItem()`, so\n// the ID of each key will change every time it's updated. Perhaps a stored\n// procedure for the `setItem()` SQL would solve this problem?\n// TODO: Don't change ID on `setItem()`.\nfunction key$1(n, callback) {\n    var self = this;\n\n    var promise = new Promise$1(function (resolve, reject) {\n        self.ready().then(function () {\n            var dbInfo = self._dbInfo;\n            dbInfo.db.transaction(function (t) {\n                t.executeSql('SELECT key FROM ' + dbInfo.storeName + ' WHERE id = ? LIMIT 1', [n + 1], function (t, results) {\n                    var result = results.rows.length ? results.rows.item(0).key : null;\n                    resolve(result);\n                }, function (t, error) {\n                    reject(error);\n                });\n            });\n        })[\"catch\"](reject);\n    });\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\nfunction keys$1(callback) {\n    var self = this;\n\n    var promise = new Promise$1(function (resolve, reject) {\n        self.ready().then(function () {\n            var dbInfo = self._dbInfo;\n            dbInfo.db.transaction(function (t) {\n                t.executeSql('SELECT key FROM ' + dbInfo.storeName, [], function (t, results) {\n                    var keys = [];\n\n                    for (var i = 0; i < results.rows.length; i++) {\n                        keys.push(results.rows.item(i).key);\n                    }\n\n                    resolve(keys);\n                }, function (t, error) {\n\n                    reject(error);\n                });\n            });\n        })[\"catch\"](reject);\n    });\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\nvar webSQLStorage = {\n    _driver: 'webSQLStorage',\n    _initStorage: _initStorage$1,\n    iterate: iterate$1,\n    getItem: getItem$1,\n    setItem: setItem$1,\n    removeItem: removeItem$1,\n    clear: clear$1,\n    length: length$1,\n    key: key$1,\n    keys: keys$1\n};\n\n// Config the localStorage backend, using options set in the config.\nfunction _initStorage$2(options) {\n    var self = this;\n    var dbInfo = {};\n    if (options) {\n        for (var i in options) {\n            dbInfo[i] = options[i];\n        }\n    }\n\n    dbInfo.keyPrefix = dbInfo.name + '/';\n\n    if (dbInfo.storeName !== self._defaultConfig.storeName) {\n        dbInfo.keyPrefix += dbInfo.storeName + '/';\n    }\n\n    self._dbInfo = dbInfo;\n    dbInfo.serializer = localforageSerializer;\n\n    return Promise$1.resolve();\n}\n\n// Remove all keys from the datastore, effectively destroying all data in\n// the app's key/value store!\nfunction clear$2(callback) {\n    var self = this;\n    var promise = self.ready().then(function () {\n        var keyPrefix = self._dbInfo.keyPrefix;\n\n        for (var i = localStorage.length - 1; i >= 0; i--) {\n            var key = localStorage.key(i);\n\n            if (key.indexOf(keyPrefix) === 0) {\n                localStorage.removeItem(key);\n            }\n        }\n    });\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\n// Retrieve an item from the store. Unlike the original async_storage\n// library in Gaia, we don't modify return values at all. If a key's value\n// is `undefined`, we pass that value to the callback function.\nfunction getItem$2(key, callback) {\n    var self = this;\n\n    // Cast the key to a string, as that's all we can set as a key.\n    if (typeof key !== 'string') {\n        console.warn(key + ' used as a key, but it is not a string.');\n        key = String(key);\n    }\n\n    var promise = self.ready().then(function () {\n        var dbInfo = self._dbInfo;\n        var result = localStorage.getItem(dbInfo.keyPrefix + key);\n\n        // If a result was found, parse it from the serialized\n        // string into a JS object. If result isn't truthy, the key\n        // is likely undefined and we'll pass it straight to the\n        // callback.\n        if (result) {\n            result = dbInfo.serializer.deserialize(result);\n        }\n\n        return result;\n    });\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\n// Iterate over all items in the store.\nfunction iterate$2(iterator, callback) {\n    var self = this;\n\n    var promise = self.ready().then(function () {\n        var dbInfo = self._dbInfo;\n        var keyPrefix = dbInfo.keyPrefix;\n        var keyPrefixLength = keyPrefix.length;\n        var length = localStorage.length;\n\n        // We use a dedicated iterator instead of the `i` variable below\n        // so other keys we fetch in localStorage aren't counted in\n        // the `iterationNumber` argument passed to the `iterate()`\n        // callback.\n        //\n        // See: github.com/mozilla/localForage/pull/435#discussion_r38061530\n        var iterationNumber = 1;\n\n        for (var i = 0; i < length; i++) {\n            var key = localStorage.key(i);\n            if (key.indexOf(keyPrefix) !== 0) {\n                continue;\n            }\n            var value = localStorage.getItem(key);\n\n            // If a result was found, parse it from the serialized\n            // string into a JS object. If result isn't truthy, the\n            // key is likely undefined and we'll pass it straight\n            // to the iterator.\n            if (value) {\n                value = dbInfo.serializer.deserialize(value);\n            }\n\n            value = iterator(value, key.substring(keyPrefixLength), iterationNumber++);\n\n            if (value !== void 0) {\n                return value;\n            }\n        }\n    });\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\n// Same as localStorage's key() method, except takes a callback.\nfunction key$2(n, callback) {\n    var self = this;\n    var promise = self.ready().then(function () {\n        var dbInfo = self._dbInfo;\n        var result;\n        try {\n            result = localStorage.key(n);\n        } catch (error) {\n            result = null;\n        }\n\n        // Remove the prefix from the key, if a key is found.\n        if (result) {\n            result = result.substring(dbInfo.keyPrefix.length);\n        }\n\n        return result;\n    });\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\nfunction keys$2(callback) {\n    var self = this;\n    var promise = self.ready().then(function () {\n        var dbInfo = self._dbInfo;\n        var length = localStorage.length;\n        var keys = [];\n\n        for (var i = 0; i < length; i++) {\n            if (localStorage.key(i).indexOf(dbInfo.keyPrefix) === 0) {\n                keys.push(localStorage.key(i).substring(dbInfo.keyPrefix.length));\n            }\n        }\n\n        return keys;\n    });\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\n// Supply the number of keys in the datastore to the callback function.\nfunction length$2(callback) {\n    var self = this;\n    var promise = self.keys().then(function (keys) {\n        return keys.length;\n    });\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\n// Remove an item from the store, nice and simple.\nfunction removeItem$2(key, callback) {\n    var self = this;\n\n    // Cast the key to a string, as that's all we can set as a key.\n    if (typeof key !== 'string') {\n        console.warn(key + ' used as a key, but it is not a string.');\n        key = String(key);\n    }\n\n    var promise = self.ready().then(function () {\n        var dbInfo = self._dbInfo;\n        localStorage.removeItem(dbInfo.keyPrefix + key);\n    });\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\n// Set a key's value and run an optional callback once the value is set.\n// Unlike Gaia's implementation, the callback function is passed the value,\n// in case you want to operate on that value only after you're sure it\n// saved, or something like that.\nfunction setItem$2(key, value, callback) {\n    var self = this;\n\n    // Cast the key to a string, as that's all we can set as a key.\n    if (typeof key !== 'string') {\n        console.warn(key + ' used as a key, but it is not a string.');\n        key = String(key);\n    }\n\n    var promise = self.ready().then(function () {\n        // Convert undefined values to null.\n        // https://github.com/mozilla/localForage/pull/42\n        if (value === undefined) {\n            value = null;\n        }\n\n        // Save the original value to pass to the callback.\n        var originalValue = value;\n\n        return new Promise$1(function (resolve, reject) {\n            var dbInfo = self._dbInfo;\n            dbInfo.serializer.serialize(value, function (value, error) {\n                if (error) {\n                    reject(error);\n                } else {\n                    try {\n                        localStorage.setItem(dbInfo.keyPrefix + key, value);\n                        resolve(originalValue);\n                    } catch (e) {\n                        // localStorage capacity exceeded.\n                        // TODO: Make this a specific error/event.\n                        if (e.name === 'QuotaExceededError' || e.name === 'NS_ERROR_DOM_QUOTA_REACHED') {\n                            reject(e);\n                        }\n                        reject(e);\n                    }\n                }\n            });\n        });\n    });\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\nvar localStorageWrapper = {\n    _driver: 'localStorageWrapper',\n    _initStorage: _initStorage$2,\n    // Default API, from Gaia/localStorage.\n    iterate: iterate$2,\n    getItem: getItem$2,\n    setItem: setItem$2,\n    removeItem: removeItem$2,\n    clear: clear$2,\n    length: length$2,\n    key: key$2,\n    keys: keys$2\n};\n\n// Custom drivers are stored here when `defineDriver()` is called.\n// They are shared across all instances of localForage.\nvar CustomDrivers = {};\n\nvar DriverType = {\n    INDEXEDDB: 'asyncStorage',\n    LOCALSTORAGE: 'localStorageWrapper',\n    WEBSQL: 'webSQLStorage'\n};\n\nvar DefaultDriverOrder = [DriverType.INDEXEDDB, DriverType.WEBSQL, DriverType.LOCALSTORAGE];\n\nvar LibraryMethods = ['clear', 'getItem', 'iterate', 'key', 'keys', 'length', 'removeItem', 'setItem'];\n\nvar DefaultConfig = {\n    description: '',\n    driver: DefaultDriverOrder.slice(),\n    name: 'localforage',\n    // Default DB size is _JUST UNDER_ 5MB, as it's the highest size\n    // we can use without a prompt.\n    size: 4980736,\n    storeName: 'keyvaluepairs',\n    version: 1.0\n};\n\nvar driverSupport = {};\n// Check to see if IndexedDB is available and if it is the latest\n// implementation; it's our preferred backend library. We use \"_spec_test\"\n// as the name of the database because it's not the one we'll operate on,\n// but it's useful to make sure its using the right spec.\n// See: https://github.com/mozilla/localForage/issues/128\ndriverSupport[DriverType.INDEXEDDB] = isIndexedDBValid();\n\ndriverSupport[DriverType.WEBSQL] = isWebSQLValid();\n\ndriverSupport[DriverType.LOCALSTORAGE] = isLocalStorageValid();\n\nvar isArray = Array.isArray || function (arg) {\n    return Object.prototype.toString.call(arg) === '[object Array]';\n};\n\nfunction callWhenReady(localForageInstance, libraryMethod) {\n    localForageInstance[libraryMethod] = function () {\n        var _args = arguments;\n        return localForageInstance.ready().then(function () {\n            return localForageInstance[libraryMethod].apply(localForageInstance, _args);\n        });\n    };\n}\n\nfunction extend() {\n    for (var i = 1; i < arguments.length; i++) {\n        var arg = arguments[i];\n\n        if (arg) {\n            for (var key in arg) {\n                if (arg.hasOwnProperty(key)) {\n                    if (isArray(arg[key])) {\n                        arguments[0][key] = arg[key].slice();\n                    } else {\n                        arguments[0][key] = arg[key];\n                    }\n                }\n            }\n        }\n    }\n\n    return arguments[0];\n}\n\nfunction isLibraryDriver(driverName) {\n    for (var driver in DriverType) {\n        if (DriverType.hasOwnProperty(driver) && DriverType[driver] === driverName) {\n            return true;\n        }\n    }\n\n    return false;\n}\n\nvar LocalForage = function () {\n    function LocalForage(options) {\n        _classCallCheck(this, LocalForage);\n\n        this.INDEXEDDB = DriverType.INDEXEDDB;\n        this.LOCALSTORAGE = DriverType.LOCALSTORAGE;\n        this.WEBSQL = DriverType.WEBSQL;\n\n        this._defaultConfig = extend({}, DefaultConfig);\n        this._config = extend({}, this._defaultConfig, options);\n        this._driverSet = null;\n        this._initDriver = null;\n        this._ready = false;\n        this._dbInfo = null;\n\n        this._wrapLibraryMethodsWithReady();\n        this.setDriver(this._config.driver)[\"catch\"](function () {});\n    }\n\n    // Set any config values for localForage; can be called anytime before\n    // the first API call (e.g. `getItem`, `setItem`).\n    // We loop through options so we don't overwrite existing config\n    // values.\n\n\n    LocalForage.prototype.config = function config(options) {\n        // If the options argument is an object, we use it to set values.\n        // Otherwise, we return either a specified config value or all\n        // config values.\n        if ((typeof options === 'undefined' ? 'undefined' : _typeof(options)) === 'object') {\n            // If localforage is ready and fully initialized, we can't set\n            // any new configuration values. Instead, we return an error.\n            if (this._ready) {\n                return new Error(\"Can't call config() after localforage \" + 'has been used.');\n            }\n\n            for (var i in options) {\n                if (i === 'storeName') {\n                    options[i] = options[i].replace(/\\W/g, '_');\n                }\n\n                if (i === 'version' && typeof options[i] !== 'number') {\n                    return new Error('Database version must be a number.');\n                }\n\n                this._config[i] = options[i];\n            }\n\n            // after all config options are set and\n            // the driver option is used, try setting it\n            if ('driver' in options && options.driver) {\n                return this.setDriver(this._config.driver);\n            }\n\n            return true;\n        } else if (typeof options === 'string') {\n            return this._config[options];\n        } else {\n            return this._config;\n        }\n    };\n\n    // Used to define a custom driver, shared across all instances of\n    // localForage.\n\n\n    LocalForage.prototype.defineDriver = function defineDriver(driverObject, callback, errorCallback) {\n        var promise = new Promise$1(function (resolve, reject) {\n            try {\n                var driverName = driverObject._driver;\n                var complianceError = new Error('Custom driver not compliant; see ' + 'https://mozilla.github.io/localForage/#definedriver');\n                var namingError = new Error('Custom driver name already in use: ' + driverObject._driver);\n\n                // A driver name should be defined and not overlap with the\n                // library-defined, default drivers.\n                if (!driverObject._driver) {\n                    reject(complianceError);\n                    return;\n                }\n                if (isLibraryDriver(driverObject._driver)) {\n                    reject(namingError);\n                    return;\n                }\n\n                var customDriverMethods = LibraryMethods.concat('_initStorage');\n                for (var i = 0; i < customDriverMethods.length; i++) {\n                    var customDriverMethod = customDriverMethods[i];\n                    if (!customDriverMethod || !driverObject[customDriverMethod] || typeof driverObject[customDriverMethod] !== 'function') {\n                        reject(complianceError);\n                        return;\n                    }\n                }\n\n                var supportPromise = Promise$1.resolve(true);\n                if ('_support' in driverObject) {\n                    if (driverObject._support && typeof driverObject._support === 'function') {\n                        supportPromise = driverObject._support();\n                    } else {\n                        supportPromise = Promise$1.resolve(!!driverObject._support);\n                    }\n                }\n\n                supportPromise.then(function (supportResult) {\n                    driverSupport[driverName] = supportResult;\n                    CustomDrivers[driverName] = driverObject;\n                    resolve();\n                }, reject);\n            } catch (e) {\n                reject(e);\n            }\n        });\n\n        executeTwoCallbacks(promise, callback, errorCallback);\n        return promise;\n    };\n\n    LocalForage.prototype.driver = function driver() {\n        return this._driver || null;\n    };\n\n    LocalForage.prototype.getDriver = function getDriver(driverName, callback, errorCallback) {\n        var self = this;\n        var getDriverPromise = Promise$1.resolve().then(function () {\n            if (isLibraryDriver(driverName)) {\n                switch (driverName) {\n                    case self.INDEXEDDB:\n                        return asyncStorage;\n                    case self.LOCALSTORAGE:\n                        return localStorageWrapper;\n                    case self.WEBSQL:\n                        return webSQLStorage;\n                }\n            } else if (CustomDrivers[driverName]) {\n                return CustomDrivers[driverName];\n            } else {\n                throw new Error('Driver not found.');\n            }\n        });\n        executeTwoCallbacks(getDriverPromise, callback, errorCallback);\n        return getDriverPromise;\n    };\n\n    LocalForage.prototype.getSerializer = function getSerializer(callback) {\n        var serializerPromise = Promise$1.resolve(localforageSerializer);\n        executeTwoCallbacks(serializerPromise, callback);\n        return serializerPromise;\n    };\n\n    LocalForage.prototype.ready = function ready(callback) {\n        var self = this;\n\n        var promise = self._driverSet.then(function () {\n            if (self._ready === null) {\n                self._ready = self._initDriver();\n            }\n\n            return self._ready;\n        });\n\n        executeTwoCallbacks(promise, callback, callback);\n        return promise;\n    };\n\n    LocalForage.prototype.setDriver = function setDriver(drivers, callback, errorCallback) {\n        var self = this;\n\n        if (!isArray(drivers)) {\n            drivers = [drivers];\n        }\n\n        var supportedDrivers = this._getSupportedDrivers(drivers);\n\n        function setDriverToConfig() {\n            self._config.driver = self.driver();\n        }\n\n        function extendSelfWithDriver(driver) {\n            self._extend(driver);\n            setDriverToConfig();\n\n            self._ready = self._initStorage(self._config);\n            return self._ready;\n        }\n\n        function initDriver(supportedDrivers) {\n            return function () {\n                var currentDriverIndex = 0;\n\n                function driverPromiseLoop() {\n                    while (currentDriverIndex < supportedDrivers.length) {\n                        var driverName = supportedDrivers[currentDriverIndex];\n                        currentDriverIndex++;\n\n                        self._dbInfo = null;\n                        self._ready = null;\n\n                        return self.getDriver(driverName).then(extendSelfWithDriver)[\"catch\"](driverPromiseLoop);\n                    }\n\n                    setDriverToConfig();\n                    var error = new Error('No available storage method found.');\n                    self._driverSet = Promise$1.reject(error);\n                    return self._driverSet;\n                }\n\n                return driverPromiseLoop();\n            };\n        }\n\n        // There might be a driver initialization in progress\n        // so wait for it to finish in order to avoid a possible\n        // race condition to set _dbInfo\n        var oldDriverSetDone = this._driverSet !== null ? this._driverSet[\"catch\"](function () {\n            return Promise$1.resolve();\n        }) : Promise$1.resolve();\n\n        this._driverSet = oldDriverSetDone.then(function () {\n            var driverName = supportedDrivers[0];\n            self._dbInfo = null;\n            self._ready = null;\n\n            return self.getDriver(driverName).then(function (driver) {\n                self._driver = driver._driver;\n                setDriverToConfig();\n                self._wrapLibraryMethodsWithReady();\n                self._initDriver = initDriver(supportedDrivers);\n            });\n        })[\"catch\"](function () {\n            setDriverToConfig();\n            var error = new Error('No available storage method found.');\n            self._driverSet = Promise$1.reject(error);\n            return self._driverSet;\n        });\n\n        executeTwoCallbacks(this._driverSet, callback, errorCallback);\n        return this._driverSet;\n    };\n\n    LocalForage.prototype.supports = function supports(driverName) {\n        return !!driverSupport[driverName];\n    };\n\n    LocalForage.prototype._extend = function _extend(libraryMethodsAndProperties) {\n        extend(this, libraryMethodsAndProperties);\n    };\n\n    LocalForage.prototype._getSupportedDrivers = function _getSupportedDrivers(drivers) {\n        var supportedDrivers = [];\n        for (var i = 0, len = drivers.length; i < len; i++) {\n            var driverName = drivers[i];\n            if (this.supports(driverName)) {\n                supportedDrivers.push(driverName);\n            }\n        }\n        return supportedDrivers;\n    };\n\n    LocalForage.prototype._wrapLibraryMethodsWithReady = function _wrapLibraryMethodsWithReady() {\n        // Add a stub for each driver API method that delays the call to the\n        // corresponding driver method until localForage is ready. These stubs\n        // will be replaced by the driver methods as soon as the driver is\n        // loaded, so there is no performance impact.\n        for (var i = 0; i < LibraryMethods.length; i++) {\n            callWhenReady(this, LibraryMethods[i]);\n        }\n    };\n\n    LocalForage.prototype.createInstance = function createInstance(options) {\n        return new LocalForage(options);\n    };\n\n    return LocalForage;\n}();\n\n// The actual localForage object that we expose as a module or via a\n// global. It's extended by pulling in one of our other libraries.\n\n\nvar localforage_js = new LocalForage();\n\nmodule.exports = localforage_js;\n\n},{\"3\":3}]},{},[4])(4)\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/localforage/dist/localforage.js\n// module id = 22C0\n// module chunks = 0","/*\nobject-assign\n(c) Sindre Sorhus\n@license MIT\n*/\n\n'use strict';\n/* eslint-disable no-unused-vars */\nvar getOwnPropertySymbols = Object.getOwnPropertySymbols;\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\nfunction toObject(val) {\n\tif (val === null || val === undefined) {\n\t\tthrow new TypeError('Object.assign cannot be called with null or undefined');\n\t}\n\n\treturn Object(val);\n}\n\nfunction shouldUseNative() {\n\ttry {\n\t\tif (!Object.assign) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Detect buggy property enumeration order in older V8 versions.\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=4118\n\t\tvar test1 = new String('abc');  // eslint-disable-line no-new-wrappers\n\t\ttest1[5] = 'de';\n\t\tif (Object.getOwnPropertyNames(test1)[0] === '5') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test2 = {};\n\t\tfor (var i = 0; i < 10; i++) {\n\t\t\ttest2['_' + String.fromCharCode(i)] = i;\n\t\t}\n\t\tvar order2 = Object.getOwnPropertyNames(test2).map(function (n) {\n\t\t\treturn test2[n];\n\t\t});\n\t\tif (order2.join('') !== '0123456789') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test3 = {};\n\t\t'abcdefghijklmnopqrst'.split('').forEach(function (letter) {\n\t\t\ttest3[letter] = letter;\n\t\t});\n\t\tif (Object.keys(Object.assign({}, test3)).join('') !==\n\t\t\t\t'abcdefghijklmnopqrst') {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t} catch (err) {\n\t\t// We don't expect any of the above to throw, but better to be safe.\n\t\treturn false;\n\t}\n}\n\nmodule.exports = shouldUseNative() ? Object.assign : function (target, source) {\n\tvar from;\n\tvar to = toObject(target);\n\tvar symbols;\n\n\tfor (var s = 1; s < arguments.length; s++) {\n\t\tfrom = Object(arguments[s]);\n\n\t\tfor (var key in from) {\n\t\t\tif (hasOwnProperty.call(from, key)) {\n\t\t\t\tto[key] = from[key];\n\t\t\t}\n\t\t}\n\n\t\tif (getOwnPropertySymbols) {\n\t\t\tsymbols = getOwnPropertySymbols(from);\n\t\t\tfor (var i = 0; i < symbols.length; i++) {\n\t\t\t\tif (propIsEnumerable.call(from, symbols[i])) {\n\t\t\t\t\tto[symbols[i]] = from[symbols[i]];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn to;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// /Users/kye/npm/lib/~/nwb/~/object-assign/index.js\n// module id = 82LK\n// module chunks = 0","function t(t){function o(e,o){if(\"function\"==typeof t)return t(o.store.state,e)}return function(t){return function(n){function r(t,e){var r=this;n.call(this,t,e),this.state=o(t,e),this.handleStoreUpdate=function(){r.updateAnimId=setTimeout(function(){r.setState(o(r.props,r.context))})},e.store.on('*',this.handleStoreUpdate)}return n&&(r.__proto__=n),r.prototype=Object.create(n&&n.prototype),r.prototype.constructor=r,r.prototype.componentWillUnmount=function(){window.clearTimeout(this.updateAnimId),this.context.store.off('*',this.handleStoreUpdate)},r.prototype.render=function(o, n){return e.h(t,Object.assign({},Object.assign({},o),n,{emit:this.context.store.emit}))},r}(e.Component)}}Object.defineProperty(exports,\"__esModule\",{value:!0});var e=require(\"preact\"),o=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getChildContext=function(){return{store:this.props.store}},e.prototype.render=function(t){return t.children[0]},e}(e.Component);exports.Provider=o,exports.connect=t;\n//# sourceMappingURL=preact-smitty.js.map\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/preact-smitty/dist/preact-smitty.js\n// module id = 97Jz\n// module chunks = 0","!function(global, factory) {\n    'object' == typeof exports && 'undefined' != typeof module ? factory(exports) : 'function' == typeof define && define.amd ? define([ 'exports' ], factory) : factory(global.preact = global.preact || {});\n}(this, function(exports) {\n    function VNode(nodeName, attributes, children) {\n        this.nodeName = nodeName;\n        this.attributes = attributes;\n        this.children = children;\n        this.key = attributes && attributes.key;\n    }\n    function h(nodeName, attributes) {\n        var children, lastSimple, child, simple, i;\n        for (i = arguments.length; i-- > 2; ) stack.push(arguments[i]);\n        if (attributes && attributes.children) {\n            if (!stack.length) stack.push(attributes.children);\n            delete attributes.children;\n        }\n        while (stack.length) if ((child = stack.pop()) instanceof Array) for (i = child.length; i--; ) stack.push(child[i]); else if (null != child && child !== !0 && child !== !1) {\n            if ('number' == typeof child) child = String(child);\n            simple = 'string' == typeof child;\n            if (simple && lastSimple) children[children.length - 1] += child; else {\n                (children || (children = [])).push(child);\n                lastSimple = simple;\n            }\n        }\n        var p = new VNode(nodeName, attributes || void 0, children || EMPTY_CHILDREN);\n        if (options.vnode) options.vnode(p);\n        return p;\n    }\n    function extend(obj, props) {\n        if (props) for (var i in props) obj[i] = props[i];\n        return obj;\n    }\n    function clone(obj) {\n        return extend({}, obj);\n    }\n    function delve(obj, key) {\n        for (var p = key.split('.'), i = 0; i < p.length && obj; i++) obj = obj[p[i]];\n        return obj;\n    }\n    function isFunction(obj) {\n        return 'function' == typeof obj;\n    }\n    function isString(obj) {\n        return 'string' == typeof obj;\n    }\n    function hashToClassName(c) {\n        var str = '';\n        for (var prop in c) if (c[prop]) {\n            if (str) str += ' ';\n            str += prop;\n        }\n        return str;\n    }\n    function cloneElement(vnode, props) {\n        return h(vnode.nodeName, extend(clone(vnode.attributes), props), arguments.length > 2 ? [].slice.call(arguments, 2) : vnode.children);\n    }\n    function createLinkedState(component, key, eventPath) {\n        var path = key.split('.');\n        return function(e) {\n            var t = e && e.target || this, state = {}, obj = state, v = isString(eventPath) ? delve(e, eventPath) : t.nodeName ? t.type.match(/^che|rad/) ? t.checked : t.value : e, i = 0;\n            for (;i < path.length - 1; i++) obj = obj[path[i]] || (obj[path[i]] = !i && component.state[path[i]] || {});\n            obj[path[i]] = v;\n            component.setState(state);\n        };\n    }\n    function enqueueRender(component) {\n        if (!component._dirty && (component._dirty = !0) && 1 == items.push(component)) (options.debounceRendering || defer)(rerender);\n    }\n    function rerender() {\n        var p, list = items;\n        items = [];\n        while (p = list.pop()) if (p._dirty) renderComponent(p);\n    }\n    function isFunctionalComponent(vnode) {\n        var nodeName = vnode && vnode.nodeName;\n        return nodeName && isFunction(nodeName) && !(nodeName.prototype && nodeName.prototype.render);\n    }\n    function buildFunctionalComponent(vnode, context) {\n        return vnode.nodeName(getNodeProps(vnode), context || EMPTY);\n    }\n    function isSameNodeType(node, vnode) {\n        if (isString(vnode)) return node instanceof Text;\n        if (isString(vnode.nodeName)) return !node._componentConstructor && isNamedNode(node, vnode.nodeName);\n        if (isFunction(vnode.nodeName)) return (node._componentConstructor ? node._componentConstructor === vnode.nodeName : !0) || isFunctionalComponent(vnode); else ;\n    }\n    function isNamedNode(node, nodeName) {\n        return node.normalizedNodeName === nodeName || toLowerCase(node.nodeName) === toLowerCase(nodeName);\n    }\n    function getNodeProps(vnode) {\n        var props = clone(vnode.attributes);\n        props.children = vnode.children;\n        var defaultProps = vnode.nodeName.defaultProps;\n        if (defaultProps) for (var i in defaultProps) if (void 0 === props[i]) props[i] = defaultProps[i];\n        return props;\n    }\n    function removeNode(node) {\n        var p = node.parentNode;\n        if (p) p.removeChild(node);\n    }\n    function setAccessor(node, name, old, value, isSvg) {\n        if ('className' === name) name = 'class';\n        if ('class' === name && value && 'object' == typeof value) value = hashToClassName(value);\n        if ('key' === name) ; else if ('class' === name && !isSvg) node.className = value || ''; else if ('style' === name) {\n            if (!value || isString(value) || isString(old)) node.style.cssText = value || '';\n            if (value && 'object' == typeof value) {\n                if (!isString(old)) for (var i in old) if (!(i in value)) node.style[i] = '';\n                for (var i in value) node.style[i] = 'number' == typeof value[i] && !NON_DIMENSION_PROPS[i] ? value[i] + 'px' : value[i];\n            }\n        } else if ('dangerouslySetInnerHTML' === name) {\n            if (value) node.innerHTML = value.__html || '';\n        } else if ('o' == name[0] && 'n' == name[1]) {\n            var l = node._listeners || (node._listeners = {});\n            name = toLowerCase(name.substring(2));\n            if (value) {\n                if (!l[name]) node.addEventListener(name, eventProxy, !!NON_BUBBLING_EVENTS[name]);\n            } else if (l[name]) node.removeEventListener(name, eventProxy, !!NON_BUBBLING_EVENTS[name]);\n            l[name] = value;\n        } else if ('list' !== name && 'type' !== name && !isSvg && name in node) {\n            setProperty(node, name, null == value ? '' : value);\n            if (null == value || value === !1) node.removeAttribute(name);\n        } else {\n            var ns = isSvg && name.match(/^xlink\\:?(.+)/);\n            if (null == value || value === !1) if (ns) node.removeAttributeNS('http://www.w3.org/1999/xlink', toLowerCase(ns[1])); else node.removeAttribute(name); else if ('object' != typeof value && !isFunction(value)) if (ns) node.setAttributeNS('http://www.w3.org/1999/xlink', toLowerCase(ns[1]), value); else node.setAttribute(name, value);\n        }\n    }\n    function setProperty(node, name, value) {\n        try {\n            node[name] = value;\n        } catch (e) {}\n    }\n    function eventProxy(e) {\n        return this._listeners[e.type](options.event && options.event(e) || e);\n    }\n    function collectNode(node) {\n        removeNode(node);\n        if (node instanceof Element) {\n            node._component = node._componentConstructor = null;\n            var _name = node.normalizedNodeName || toLowerCase(node.nodeName);\n            (nodes[_name] || (nodes[_name] = [])).push(node);\n        }\n    }\n    function createNode(nodeName, isSvg) {\n        var name = toLowerCase(nodeName), node = nodes[name] && nodes[name].pop() || (isSvg ? document.createElementNS('http://www.w3.org/2000/svg', nodeName) : document.createElement(nodeName));\n        node.normalizedNodeName = name;\n        return node;\n    }\n    function flushMounts() {\n        var c;\n        while (c = mounts.pop()) {\n            if (options.afterMount) options.afterMount(c);\n            if (c.componentDidMount) c.componentDidMount();\n        }\n    }\n    function diff(dom, vnode, context, mountAll, parent, componentRoot) {\n        if (!diffLevel++) {\n            isSvgMode = parent && 'undefined' != typeof parent.ownerSVGElement;\n            hydrating = dom && !(ATTR_KEY in dom);\n        }\n        var ret = idiff(dom, vnode, context, mountAll);\n        if (parent && ret.parentNode !== parent) parent.appendChild(ret);\n        if (!--diffLevel) {\n            hydrating = !1;\n            if (!componentRoot) flushMounts();\n        }\n        return ret;\n    }\n    function idiff(dom, vnode, context, mountAll) {\n        var ref = vnode && vnode.attributes && vnode.attributes.ref;\n        while (isFunctionalComponent(vnode)) vnode = buildFunctionalComponent(vnode, context);\n        if (null == vnode) vnode = '';\n        if (isString(vnode)) {\n            if (dom && dom instanceof Text && dom.parentNode) {\n                if (dom.nodeValue != vnode) dom.nodeValue = vnode;\n            } else {\n                if (dom) recollectNodeTree(dom);\n                dom = document.createTextNode(vnode);\n            }\n            return dom;\n        }\n        if (isFunction(vnode.nodeName)) return buildComponentFromVNode(dom, vnode, context, mountAll);\n        var out = dom, nodeName = String(vnode.nodeName), prevSvgMode = isSvgMode, vchildren = vnode.children;\n        isSvgMode = 'svg' === nodeName ? !0 : 'foreignObject' === nodeName ? !1 : isSvgMode;\n        if (!dom) out = createNode(nodeName, isSvgMode); else if (!isNamedNode(dom, nodeName)) {\n            out = createNode(nodeName, isSvgMode);\n            while (dom.firstChild) out.appendChild(dom.firstChild);\n            if (dom.parentNode) dom.parentNode.replaceChild(out, dom);\n            recollectNodeTree(dom);\n        }\n        var fc = out.firstChild, props = out[ATTR_KEY];\n        if (!props) {\n            out[ATTR_KEY] = props = {};\n            for (var a = out.attributes, i = a.length; i--; ) props[a[i].name] = a[i].value;\n        }\n        if (!hydrating && vchildren && 1 === vchildren.length && 'string' == typeof vchildren[0] && fc && fc instanceof Text && !fc.nextSibling) {\n            if (fc.nodeValue != vchildren[0]) fc.nodeValue = vchildren[0];\n        } else if (vchildren && vchildren.length || fc) innerDiffNode(out, vchildren, context, mountAll, !!props.dangerouslySetInnerHTML);\n        diffAttributes(out, vnode.attributes, props);\n        if (ref) (props.ref = ref)(out);\n        isSvgMode = prevSvgMode;\n        return out;\n    }\n    function innerDiffNode(dom, vchildren, context, mountAll, absorb) {\n        var j, c, vchild, child, originalChildren = dom.childNodes, children = [], keyed = {}, keyedLen = 0, min = 0, len = originalChildren.length, childrenLen = 0, vlen = vchildren && vchildren.length;\n        if (len) for (var i = 0; i < len; i++) {\n            var _child = originalChildren[i], props = _child[ATTR_KEY], key = vlen ? (c = _child._component) ? c.__key : props ? props.key : null : null;\n            if (null != key) {\n                keyedLen++;\n                keyed[key] = _child;\n            } else if (hydrating || absorb || props || _child instanceof Text) children[childrenLen++] = _child;\n        }\n        if (vlen) for (var i = 0; i < vlen; i++) {\n            vchild = vchildren[i];\n            child = null;\n            var key = vchild.key;\n            if (null != key) {\n                if (keyedLen && key in keyed) {\n                    child = keyed[key];\n                    keyed[key] = void 0;\n                    keyedLen--;\n                }\n            } else if (!child && min < childrenLen) for (j = min; j < childrenLen; j++) {\n                c = children[j];\n                if (c && isSameNodeType(c, vchild)) {\n                    child = c;\n                    children[j] = void 0;\n                    if (j === childrenLen - 1) childrenLen--;\n                    if (j === min) min++;\n                    break;\n                }\n            }\n            child = idiff(child, vchild, context, mountAll);\n            if (child && child !== dom) if (i >= len) dom.appendChild(child); else if (child !== originalChildren[i]) {\n                if (child === originalChildren[i + 1]) removeNode(originalChildren[i]);\n                dom.insertBefore(child, originalChildren[i] || null);\n            }\n        }\n        if (keyedLen) for (var i in keyed) if (keyed[i]) recollectNodeTree(keyed[i]);\n        while (min <= childrenLen) {\n            child = children[childrenLen--];\n            if (child) recollectNodeTree(child);\n        }\n    }\n    function recollectNodeTree(node, unmountOnly) {\n        var component = node._component;\n        if (component) unmountComponent(component, !unmountOnly); else {\n            if (node[ATTR_KEY] && node[ATTR_KEY].ref) node[ATTR_KEY].ref(null);\n            if (!unmountOnly) collectNode(node);\n            var c;\n            while (c = node.lastChild) recollectNodeTree(c, unmountOnly);\n        }\n    }\n    function diffAttributes(dom, attrs, old) {\n        var name;\n        for (name in old) if (!(attrs && name in attrs) && null != old[name]) setAccessor(dom, name, old[name], old[name] = void 0, isSvgMode);\n        if (attrs) for (name in attrs) if (!('children' === name || 'innerHTML' === name || name in old && attrs[name] === ('value' === name || 'checked' === name ? dom[name] : old[name]))) setAccessor(dom, name, old[name], old[name] = attrs[name], isSvgMode);\n    }\n    function collectComponent(component) {\n        var name = component.constructor.name, list = components[name];\n        if (list) list.push(component); else components[name] = [ component ];\n    }\n    function createComponent(Ctor, props, context) {\n        var inst = new Ctor(props, context), list = components[Ctor.name];\n        Component.call(inst, props, context);\n        if (list) for (var i = list.length; i--; ) if (list[i].constructor === Ctor) {\n            inst.nextBase = list[i].nextBase;\n            list.splice(i, 1);\n            break;\n        }\n        return inst;\n    }\n    function setComponentProps(component, props, opts, context, mountAll) {\n        if (!component._disable) {\n            component._disable = !0;\n            if (component.__ref = props.ref) delete props.ref;\n            if (component.__key = props.key) delete props.key;\n            if (!component.base || mountAll) {\n                if (component.componentWillMount) component.componentWillMount();\n            } else if (component.componentWillReceiveProps) component.componentWillReceiveProps(props, context);\n            if (context && context !== component.context) {\n                if (!component.prevContext) component.prevContext = component.context;\n                component.context = context;\n            }\n            if (!component.prevProps) component.prevProps = component.props;\n            component.props = props;\n            component._disable = !1;\n            if (0 !== opts) if (1 === opts || options.syncComponentUpdates !== !1 || !component.base) renderComponent(component, 1, mountAll); else enqueueRender(component);\n            if (component.__ref) component.__ref(component);\n        }\n    }\n    function renderComponent(component, opts, mountAll, isChild) {\n        if (!component._disable) {\n            var skip, rendered, inst, cbase, props = component.props, state = component.state, context = component.context, previousProps = component.prevProps || props, previousState = component.prevState || state, previousContext = component.prevContext || context, isUpdate = component.base, nextBase = component.nextBase, initialBase = isUpdate || nextBase, initialChildComponent = component._component;\n            if (isUpdate) {\n                component.props = previousProps;\n                component.state = previousState;\n                component.context = previousContext;\n                if (2 !== opts && component.shouldComponentUpdate && component.shouldComponentUpdate(props, state, context) === !1) skip = !0; else if (component.componentWillUpdate) component.componentWillUpdate(props, state, context);\n                component.props = props;\n                component.state = state;\n                component.context = context;\n            }\n            component.prevProps = component.prevState = component.prevContext = component.nextBase = null;\n            component._dirty = !1;\n            if (!skip) {\n                if (component.render) rendered = component.render(props, state, context);\n                if (component.getChildContext) context = extend(clone(context), component.getChildContext());\n                while (isFunctionalComponent(rendered)) rendered = buildFunctionalComponent(rendered, context);\n                var toUnmount, base, childComponent = rendered && rendered.nodeName;\n                if (isFunction(childComponent)) {\n                    var childProps = getNodeProps(rendered);\n                    inst = initialChildComponent;\n                    if (inst && inst.constructor === childComponent && childProps.key == inst.__key) setComponentProps(inst, childProps, 1, context); else {\n                        toUnmount = inst;\n                        inst = createComponent(childComponent, childProps, context);\n                        inst.nextBase = inst.nextBase || nextBase;\n                        inst._parentComponent = component;\n                        component._component = inst;\n                        setComponentProps(inst, childProps, 0, context);\n                        renderComponent(inst, 1, mountAll, !0);\n                    }\n                    base = inst.base;\n                } else {\n                    cbase = initialBase;\n                    toUnmount = initialChildComponent;\n                    if (toUnmount) cbase = component._component = null;\n                    if (initialBase || 1 === opts) {\n                        if (cbase) cbase._component = null;\n                        base = diff(cbase, rendered, context, mountAll || !isUpdate, initialBase && initialBase.parentNode, !0);\n                    }\n                }\n                if (initialBase && base !== initialBase && inst !== initialChildComponent) {\n                    var baseParent = initialBase.parentNode;\n                    if (baseParent && base !== baseParent) {\n                        baseParent.replaceChild(base, initialBase);\n                        if (!toUnmount) {\n                            initialBase._component = null;\n                            recollectNodeTree(initialBase);\n                        }\n                    }\n                }\n                if (toUnmount) unmountComponent(toUnmount, base !== initialBase);\n                component.base = base;\n                if (base && !isChild) {\n                    var componentRef = component, t = component;\n                    while (t = t._parentComponent) (componentRef = t).base = base;\n                    base._component = componentRef;\n                    base._componentConstructor = componentRef.constructor;\n                }\n            }\n            if (!isUpdate || mountAll) mounts.unshift(component); else if (!skip) {\n                if (component.componentDidUpdate) component.componentDidUpdate(previousProps, previousState, previousContext);\n                if (options.afterUpdate) options.afterUpdate(component);\n            }\n            var fn, cb = component._renderCallbacks;\n            if (cb) while (fn = cb.pop()) fn.call(component);\n            if (!diffLevel && !isChild) flushMounts();\n        }\n    }\n    function buildComponentFromVNode(dom, vnode, context, mountAll) {\n        var c = dom && dom._component, originalComponent = c, oldDom = dom, isDirectOwner = c && dom._componentConstructor === vnode.nodeName, isOwner = isDirectOwner, props = getNodeProps(vnode);\n        while (c && !isOwner && (c = c._parentComponent)) isOwner = c.constructor === vnode.nodeName;\n        if (c && isOwner && (!mountAll || c._component)) {\n            setComponentProps(c, props, 3, context, mountAll);\n            dom = c.base;\n        } else {\n            if (originalComponent && !isDirectOwner) {\n                unmountComponent(originalComponent, !0);\n                dom = oldDom = null;\n            }\n            c = createComponent(vnode.nodeName, props, context);\n            if (dom && !c.nextBase) {\n                c.nextBase = dom;\n                oldDom = null;\n            }\n            setComponentProps(c, props, 1, context, mountAll);\n            dom = c.base;\n            if (oldDom && dom !== oldDom) {\n                oldDom._component = null;\n                recollectNodeTree(oldDom);\n            }\n        }\n        return dom;\n    }\n    function unmountComponent(component, remove) {\n        if (options.beforeUnmount) options.beforeUnmount(component);\n        var base = component.base;\n        component._disable = !0;\n        if (component.componentWillUnmount) component.componentWillUnmount();\n        component.base = null;\n        var inner = component._component;\n        if (inner) unmountComponent(inner, remove); else if (base) {\n            if (base[ATTR_KEY] && base[ATTR_KEY].ref) base[ATTR_KEY].ref(null);\n            component.nextBase = base;\n            if (remove) {\n                removeNode(base);\n                collectComponent(component);\n            }\n            var c;\n            while (c = base.lastChild) recollectNodeTree(c, !remove);\n        }\n        if (component.__ref) component.__ref(null);\n        if (component.componentDidUnmount) component.componentDidUnmount();\n    }\n    function Component(props, context) {\n        this._dirty = !0;\n        this.context = context;\n        this.props = props;\n        if (!this.state) this.state = {};\n    }\n    function render(vnode, parent, merge) {\n        return diff(merge, vnode, {}, !1, parent);\n    }\n    var options = {};\n    var stack = [];\n    var EMPTY_CHILDREN = [];\n    var lcCache = {};\n    var toLowerCase = function(s) {\n        return lcCache[s] || (lcCache[s] = s.toLowerCase());\n    };\n    var resolved = 'undefined' != typeof Promise && Promise.resolve();\n    var defer = resolved ? function(f) {\n        resolved.then(f);\n    } : setTimeout;\n    var EMPTY = {};\n    var ATTR_KEY = 'undefined' != typeof Symbol ? Symbol.for('preactattr') : '__preactattr_';\n    var NON_DIMENSION_PROPS = {\n        boxFlex: 1,\n        boxFlexGroup: 1,\n        columnCount: 1,\n        fillOpacity: 1,\n        flex: 1,\n        flexGrow: 1,\n        flexPositive: 1,\n        flexShrink: 1,\n        flexNegative: 1,\n        fontWeight: 1,\n        lineClamp: 1,\n        lineHeight: 1,\n        opacity: 1,\n        order: 1,\n        orphans: 1,\n        strokeOpacity: 1,\n        widows: 1,\n        zIndex: 1,\n        zoom: 1\n    };\n    var NON_BUBBLING_EVENTS = {\n        blur: 1,\n        error: 1,\n        focus: 1,\n        load: 1,\n        resize: 1,\n        scroll: 1\n    };\n    var items = [];\n    var nodes = {};\n    var mounts = [];\n    var diffLevel = 0;\n    var isSvgMode = !1;\n    var hydrating = !1;\n    var components = {};\n    extend(Component.prototype, {\n        linkState: function(key, eventPath) {\n            var c = this._linkedStates || (this._linkedStates = {});\n            return c[key + eventPath] || (c[key + eventPath] = createLinkedState(this, key, eventPath));\n        },\n        setState: function(state, callback) {\n            var s = this.state;\n            if (!this.prevState) this.prevState = clone(s);\n            extend(s, isFunction(state) ? state(s, this.props) : state);\n            if (callback) (this._renderCallbacks = this._renderCallbacks || []).push(callback);\n            enqueueRender(this);\n        },\n        forceUpdate: function() {\n            renderComponent(this, 2);\n        },\n        render: function() {}\n    });\n    exports.h = h;\n    exports.cloneElement = cloneElement;\n    exports.Component = Component;\n    exports.render = render;\n    exports.rerender = rerender;\n    exports.options = options;\n});\n//# sourceMappingURL=preact.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/preact/dist/preact.js\n// module id = EF6w\n// module chunks = 0","\"use strict\";\n\n// Use the fastest means possible to execute a task in its own turn, with\n// priority over other events including IO, animation, reflow, and redraw\n// events in browsers.\n//\n// An exception thrown by a task will permanently interrupt the processing of\n// subsequent tasks. The higher level `asap` function ensures that if an\n// exception is thrown by a task, that the task queue will continue flushing as\n// soon as possible, but if you use `rawAsap` directly, you are responsible to\n// either ensure that no exceptions are thrown from your task, or to manually\n// call `rawAsap.requestFlush` if an exception is thrown.\nmodule.exports = rawAsap;\nfunction rawAsap(task) {\n    if (!queue.length) {\n        requestFlush();\n        flushing = true;\n    }\n    // Equivalent to push, but avoids a function call.\n    queue[queue.length] = task;\n}\n\nvar queue = [];\n// Once a flush has been requested, no further calls to `requestFlush` are\n// necessary until the next `flush` completes.\nvar flushing = false;\n// `requestFlush` is an implementation-specific method that attempts to kick\n// off a `flush` event as quickly as possible. `flush` will attempt to exhaust\n// the event queue before yielding to the browser's own event loop.\nvar requestFlush;\n// The position of the next task to execute in the task queue. This is\n// preserved between calls to `flush` so that it can be resumed if\n// a task throws an exception.\nvar index = 0;\n// If a task schedules additional tasks recursively, the task queue can grow\n// unbounded. To prevent memory exhaustion, the task queue will periodically\n// truncate already-completed tasks.\nvar capacity = 1024;\n\n// The flush function processes all tasks that have been scheduled with\n// `rawAsap` unless and until one of those tasks throws an exception.\n// If a task throws an exception, `flush` ensures that its state will remain\n// consistent and will resume where it left off when called again.\n// However, `flush` does not make any arrangements to be called again if an\n// exception is thrown.\nfunction flush() {\n    while (index < queue.length) {\n        var currentIndex = index;\n        // Advance the index before calling the task. This ensures that we will\n        // begin flushing on the next task the task throws an error.\n        index = index + 1;\n        queue[currentIndex].call();\n        // Prevent leaking memory for long chains of recursive calls to `asap`.\n        // If we call `asap` within tasks scheduled by `asap`, the queue will\n        // grow, but to avoid an O(n) walk for every task we execute, we don't\n        // shift tasks off the queue after they have been executed.\n        // Instead, we periodically shift 1024 tasks off the queue.\n        if (index > capacity) {\n            // Manually shift all values starting at the index back to the\n            // beginning of the queue.\n            for (var scan = 0, newLength = queue.length - index; scan < newLength; scan++) {\n                queue[scan] = queue[scan + index];\n            }\n            queue.length -= index;\n            index = 0;\n        }\n    }\n    queue.length = 0;\n    index = 0;\n    flushing = false;\n}\n\n// `requestFlush` is implemented using a strategy based on data collected from\n// every available SauceLabs Selenium web driver worker at time of writing.\n// https://docs.google.com/spreadsheets/d/1mG-5UYGup5qxGdEMWkhP6BWCz053NUb2E1QoUTU16uA/edit#gid=783724593\n\n// Safari 6 and 6.1 for desktop, iPad, and iPhone are the only browsers that\n// have WebKitMutationObserver but not un-prefixed MutationObserver.\n// Must use `global` or `self` instead of `window` to work in both frames and web\n// workers. `global` is a provision of Browserify, Mr, Mrs, or Mop.\n\n/* globals self */\nvar scope = typeof global !== \"undefined\" ? global : self;\nvar BrowserMutationObserver = scope.MutationObserver || scope.WebKitMutationObserver;\n\n// MutationObservers are desirable because they have high priority and work\n// reliably everywhere they are implemented.\n// They are implemented in all modern browsers.\n//\n// - Android 4-4.3\n// - Chrome 26-34\n// - Firefox 14-29\n// - Internet Explorer 11\n// - iPad Safari 6-7.1\n// - iPhone Safari 7-7.1\n// - Safari 6-7\nif (typeof BrowserMutationObserver === \"function\") {\n    requestFlush = makeRequestCallFromMutationObserver(flush);\n\n// MessageChannels are desirable because they give direct access to the HTML\n// task queue, are implemented in Internet Explorer 10, Safari 5.0-1, and Opera\n// 11-12, and in web workers in many engines.\n// Although message channels yield to any queued rendering and IO tasks, they\n// would be better than imposing the 4ms delay of timers.\n// However, they do not work reliably in Internet Explorer or Safari.\n\n// Internet Explorer 10 is the only browser that has setImmediate but does\n// not have MutationObservers.\n// Although setImmediate yields to the browser's renderer, it would be\n// preferrable to falling back to setTimeout since it does not have\n// the minimum 4ms penalty.\n// Unfortunately there appears to be a bug in Internet Explorer 10 Mobile (and\n// Desktop to a lesser extent) that renders both setImmediate and\n// MessageChannel useless for the purposes of ASAP.\n// https://github.com/kriskowal/q/issues/396\n\n// Timers are implemented universally.\n// We fall back to timers in workers in most engines, and in foreground\n// contexts in the following browsers.\n// However, note that even this simple case requires nuances to operate in a\n// broad spectrum of browsers.\n//\n// - Firefox 3-13\n// - Internet Explorer 6-9\n// - iPad Safari 4.3\n// - Lynx 2.8.7\n} else {\n    requestFlush = makeRequestCallFromTimer(flush);\n}\n\n// `requestFlush` requests that the high priority event queue be flushed as\n// soon as possible.\n// This is useful to prevent an error thrown in a task from stalling the event\n// queue if the exception handled by Node.jss\n// `process.on(\"uncaughtException\")` or by a domain.\nrawAsap.requestFlush = requestFlush;\n\n// To request a high priority event, we induce a mutation observer by toggling\n// the text of a text node between \"1\" and \"-1\".\nfunction makeRequestCallFromMutationObserver(callback) {\n    var toggle = 1;\n    var observer = new BrowserMutationObserver(callback);\n    var node = document.createTextNode(\"\");\n    observer.observe(node, {characterData: true});\n    return function requestCall() {\n        toggle = -toggle;\n        node.data = toggle;\n    };\n}\n\n// The message channel technique was discovered by Malte Ubl and was the\n// original foundation for this library.\n// http://www.nonblocking.io/2011/06/windownexttick.html\n\n// Safari 6.0.5 (at least) intermittently fails to create message ports on a\n// page's first load. Thankfully, this version of Safari supports\n// MutationObservers, so we don't need to fall back in that case.\n\n// function makeRequestCallFromMessageChannel(callback) {\n//     var channel = new MessageChannel();\n//     channel.port1.onmessage = callback;\n//     return function requestCall() {\n//         channel.port2.postMessage(0);\n//     };\n// }\n\n// For reasons explained above, we are also unable to use `setImmediate`\n// under any circumstances.\n// Even if we were, there is another bug in Internet Explorer 10.\n// It is not sufficient to assign `setImmediate` to `requestFlush` because\n// `setImmediate` must be called *by name* and therefore must be wrapped in a\n// closure.\n// Never forget.\n\n// function makeRequestCallFromSetImmediate(callback) {\n//     return function requestCall() {\n//         setImmediate(callback);\n//     };\n// }\n\n// Safari 6.0 has a problem where timers will get lost while the user is\n// scrolling. This problem does not impact ASAP because Safari 6.0 supports\n// mutation observers, so that implementation is used instead.\n// However, if we ever elect to use timers in Safari, the prevalent work-around\n// is to add a scroll event listener that calls for a flush.\n\n// `setTimeout` does not call the passed callback if the delay is less than\n// approximately 7 in web workers in Firefox 8 through 18, and sometimes not\n// even then.\n\nfunction makeRequestCallFromTimer(callback) {\n    return function requestCall() {\n        // We dispatch a timeout with a specified delay of 0 for engines that\n        // can reliably accommodate that request. This will usually be snapped\n        // to a 4 milisecond delay, but once we're flushing, there's no delay\n        // between events.\n        var timeoutHandle = setTimeout(handleTimer, 0);\n        // However, since this timer gets frequently dropped in Firefox\n        // workers, we enlist an interval handle that will try to fire\n        // an event 20 times per second until it succeeds.\n        var intervalHandle = setInterval(handleTimer, 50);\n\n        function handleTimer() {\n            // Whichever timer succeeds will cancel both timers and\n            // execute the callback.\n            clearTimeout(timeoutHandle);\n            clearInterval(intervalHandle);\n            callback();\n        }\n    };\n}\n\n// This is for `asap.js` only.\n// Its name will be periodically randomized to break any code that depends on\n// its existence.\nrawAsap.makeRequestCallFromTimer = makeRequestCallFromTimer;\n\n// ASAP was originally a nextTick shim included in Q. This was factored out\n// into this ASAP package. It was later adapted to RSVP which made further\n// amendments. These decisions, particularly to marginalize MessageChannel and\n// to capture the MutationObserver implementation in a closure, were integrated\n// back into ASAP proper.\n// https://github.com/tildeio/rsvp.js/blob/cddf7232546a9cf858524b75cde6f9edf72620a7/lib/rsvp/asap.js\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// /Users/kye/npm/lib/~/nwb/~/asap/browser-raw.js\n// module id = N5z5\n// module chunks = 0","'use strict';\n\nvar asap = require('asap/raw');\n\nfunction noop() {}\n\n// States:\n//\n// 0 - pending\n// 1 - fulfilled with _value\n// 2 - rejected with _value\n// 3 - adopted the state of another promise, _value\n//\n// once the state is no longer pending (0) it is immutable\n\n// All `_` prefixed properties will be reduced to `_{random number}`\n// at build time to obfuscate them and discourage their use.\n// We don't use symbols or Object.defineProperty to fully hide them\n// because the performance isn't good enough.\n\n\n// to avoid using try/catch inside critical functions, we\n// extract them to here.\nvar LAST_ERROR = null;\nvar IS_ERROR = {};\nfunction getThen(obj) {\n  try {\n    return obj.then;\n  } catch (ex) {\n    LAST_ERROR = ex;\n    return IS_ERROR;\n  }\n}\n\nfunction tryCallOne(fn, a) {\n  try {\n    return fn(a);\n  } catch (ex) {\n    LAST_ERROR = ex;\n    return IS_ERROR;\n  }\n}\nfunction tryCallTwo(fn, a, b) {\n  try {\n    fn(a, b);\n  } catch (ex) {\n    LAST_ERROR = ex;\n    return IS_ERROR;\n  }\n}\n\nmodule.exports = Promise;\n\nfunction Promise(fn) {\n  if (typeof this !== 'object') {\n    throw new TypeError('Promises must be constructed via new');\n  }\n  if (typeof fn !== 'function') {\n    throw new TypeError('not a function');\n  }\n  this._45 = 0;\n  this._81 = 0;\n  this._65 = null;\n  this._54 = null;\n  if (fn === noop) return;\n  doResolve(fn, this);\n}\nPromise._10 = null;\nPromise._97 = null;\nPromise._61 = noop;\n\nPromise.prototype.then = function(onFulfilled, onRejected) {\n  if (this.constructor !== Promise) {\n    return safeThen(this, onFulfilled, onRejected);\n  }\n  var res = new Promise(noop);\n  handle(this, new Handler(onFulfilled, onRejected, res));\n  return res;\n};\n\nfunction safeThen(self, onFulfilled, onRejected) {\n  return new self.constructor(function (resolve, reject) {\n    var res = new Promise(noop);\n    res.then(resolve, reject);\n    handle(self, new Handler(onFulfilled, onRejected, res));\n  });\n};\nfunction handle(self, deferred) {\n  while (self._81 === 3) {\n    self = self._65;\n  }\n  if (Promise._10) {\n    Promise._10(self);\n  }\n  if (self._81 === 0) {\n    if (self._45 === 0) {\n      self._45 = 1;\n      self._54 = deferred;\n      return;\n    }\n    if (self._45 === 1) {\n      self._45 = 2;\n      self._54 = [self._54, deferred];\n      return;\n    }\n    self._54.push(deferred);\n    return;\n  }\n  handleResolved(self, deferred);\n}\n\nfunction handleResolved(self, deferred) {\n  asap(function() {\n    var cb = self._81 === 1 ? deferred.onFulfilled : deferred.onRejected;\n    if (cb === null) {\n      if (self._81 === 1) {\n        resolve(deferred.promise, self._65);\n      } else {\n        reject(deferred.promise, self._65);\n      }\n      return;\n    }\n    var ret = tryCallOne(cb, self._65);\n    if (ret === IS_ERROR) {\n      reject(deferred.promise, LAST_ERROR);\n    } else {\n      resolve(deferred.promise, ret);\n    }\n  });\n}\nfunction resolve(self, newValue) {\n  // Promise Resolution Procedure: https://github.com/promises-aplus/promises-spec#the-promise-resolution-procedure\n  if (newValue === self) {\n    return reject(\n      self,\n      new TypeError('A promise cannot be resolved with itself.')\n    );\n  }\n  if (\n    newValue &&\n    (typeof newValue === 'object' || typeof newValue === 'function')\n  ) {\n    var then = getThen(newValue);\n    if (then === IS_ERROR) {\n      return reject(self, LAST_ERROR);\n    }\n    if (\n      then === self.then &&\n      newValue instanceof Promise\n    ) {\n      self._81 = 3;\n      self._65 = newValue;\n      finale(self);\n      return;\n    } else if (typeof then === 'function') {\n      doResolve(then.bind(newValue), self);\n      return;\n    }\n  }\n  self._81 = 1;\n  self._65 = newValue;\n  finale(self);\n}\n\nfunction reject(self, newValue) {\n  self._81 = 2;\n  self._65 = newValue;\n  if (Promise._97) {\n    Promise._97(self, newValue);\n  }\n  finale(self);\n}\nfunction finale(self) {\n  if (self._45 === 1) {\n    handle(self, self._54);\n    self._54 = null;\n  }\n  if (self._45 === 2) {\n    for (var i = 0; i < self._54.length; i++) {\n      handle(self, self._54[i]);\n    }\n    self._54 = null;\n  }\n}\n\nfunction Handler(onFulfilled, onRejected, promise){\n  this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;\n  this.onRejected = typeof onRejected === 'function' ? onRejected : null;\n  this.promise = promise;\n}\n\n/**\n * Take a potentially misbehaving resolver function and make sure\n * onFulfilled and onRejected are only called once.\n *\n * Makes no guarantees about asynchrony.\n */\nfunction doResolve(fn, promise) {\n  var done = false;\n  var res = tryCallTwo(fn, function (value) {\n    if (done) return;\n    done = true;\n    resolve(promise, value);\n  }, function (reason) {\n    if (done) return;\n    done = true;\n    reject(promise, reason);\n  })\n  if (!done && res === IS_ERROR) {\n    done = true;\n    reject(promise, LAST_ERROR);\n  }\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// /Users/kye/npm/lib/~/nwb/~/promise/lib/core.js\n// module id = UPH/\n// module chunks = 0","var g;\r\n\r\n// This works in non-strict mode\r\ng = (function() {\r\n\treturn this;\r\n})();\r\n\r\ntry {\r\n\t// This works if eval is allowed (see CSP)\r\n\tg = g || Function(\"return this\")() || (1,eval)(\"this\");\r\n} catch(e) {\r\n\t// This works if the window reference is available\r\n\tif(typeof window === \"object\")\r\n\t\tg = window;\r\n}\r\n\r\n// g can still be undefined, but nothing to do about it...\r\n// We return undefined, instead of nothing here, so it's\r\n// easier to handle this case. if(!global) { ...}\r\n\r\nmodule.exports = g;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// (webpack)/buildin/global.js\n// module id = b+29\n// module chunks = 0","// eslint-disable-next-line no-unused-vars\n/** @jsx h */\nimport { render, h } from 'preact'\n\nlet root\nfunction run () {\n  const Root = require('./App').default\n  root = render(<Root test={'foo'}/>, document.querySelector('#demo'), root)\n}\n\nrun()\n\nif (module.hot) {\n  // Whenever a new version of App.js is available\n  module.hot.accept('./App', function () {\n    // Require the new version and render it instead\n    run()\n  })\n}\n\n\n\n// WEBPACK FOOTER //\n// ./demo/src/index.js","'use strict';\n\n//This file contains the ES6 extensions to the core Promises/A+ API\n\nvar Promise = require('./core.js');\n\nmodule.exports = Promise;\n\n/* Static Functions */\n\nvar TRUE = valuePromise(true);\nvar FALSE = valuePromise(false);\nvar NULL = valuePromise(null);\nvar UNDEFINED = valuePromise(undefined);\nvar ZERO = valuePromise(0);\nvar EMPTYSTRING = valuePromise('');\n\nfunction valuePromise(value) {\n  var p = new Promise(Promise._61);\n  p._81 = 1;\n  p._65 = value;\n  return p;\n}\nPromise.resolve = function (value) {\n  if (value instanceof Promise) return value;\n\n  if (value === null) return NULL;\n  if (value === undefined) return UNDEFINED;\n  if (value === true) return TRUE;\n  if (value === false) return FALSE;\n  if (value === 0) return ZERO;\n  if (value === '') return EMPTYSTRING;\n\n  if (typeof value === 'object' || typeof value === 'function') {\n    try {\n      var then = value.then;\n      if (typeof then === 'function') {\n        return new Promise(then.bind(value));\n      }\n    } catch (ex) {\n      return new Promise(function (resolve, reject) {\n        reject(ex);\n      });\n    }\n  }\n  return valuePromise(value);\n};\n\nPromise.all = function (arr) {\n  var args = Array.prototype.slice.call(arr);\n\n  return new Promise(function (resolve, reject) {\n    if (args.length === 0) return resolve([]);\n    var remaining = args.length;\n    function res(i, val) {\n      if (val && (typeof val === 'object' || typeof val === 'function')) {\n        if (val instanceof Promise && val.then === Promise.prototype.then) {\n          while (val._81 === 3) {\n            val = val._65;\n          }\n          if (val._81 === 1) return res(i, val._65);\n          if (val._81 === 2) reject(val._65);\n          val.then(function (val) {\n            res(i, val);\n          }, reject);\n          return;\n        } else {\n          var then = val.then;\n          if (typeof then === 'function') {\n            var p = new Promise(then.bind(val));\n            p.then(function (val) {\n              res(i, val);\n            }, reject);\n            return;\n          }\n        }\n      }\n      args[i] = val;\n      if (--remaining === 0) {\n        resolve(args);\n      }\n    }\n    for (var i = 0; i < args.length; i++) {\n      res(i, args[i]);\n    }\n  });\n};\n\nPromise.reject = function (value) {\n  return new Promise(function (resolve, reject) {\n    reject(value);\n  });\n};\n\nPromise.race = function (values) {\n  return new Promise(function (resolve, reject) {\n    values.forEach(function(value){\n      Promise.resolve(value).then(resolve, reject);\n    });\n  });\n};\n\n/* Prototype Methods */\n\nPromise.prototype['catch'] = function (onRejected) {\n  return this.then(null, onRejected);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// /Users/kye/npm/lib/~/nwb/~/promise/lib/es6-extensions.js\n// module id = e2MQ\n// module chunks = 0","// Ensure polyfill compatibility between create-react-app and zero-config nwb apps.\n// This is from https://github.com/facebookincubator/create-react-app/blob/master/config/polyfills.js\n\nif (typeof Promise === 'undefined') {\n  // Rejection tracking prevents a common issue where React gets into an\n  // inconsistent state due to an error, but it gets swallowed by a Promise,\n  // and the user has no idea what causes React's erratic future behaviour.\n  require('promise/lib/rejection-tracking').enable()\n  window.Promise = require('promise/lib/es6-extensions.js')\n}\n\n// fetch() polyfill for making API calls\nrequire('whatwg-fetch')\n\n// Object.assign() is commonly used with React.\n// It will use the native implementation if it's present and isn't buggy.\nObject.assign = require('object-assign')\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// /Users/kye/npm/lib/~/nwb/polyfills.js\n// module id = fWmM\n// module chunks = 0","/** @jsx h */\nimport './style.css'\nimport { render, h, Component } from 'preact'\nimport { Provider, connect } from 'preact-smitty'\nimport { createStore } from '../../src'\nimport source from 'raw-loader!./App.js'\nimport localforage from 'localforage'\n\nlocalforage.config({ name: 'smitty_photo_booth' })\n\nconst pp = obj => JSON.stringify(obj, null, 2)\nconst getId = () => new Date().toString()\n\nconst store = createStore({\n  camera: {\n    recording: false,\n    stream: new window.MediaStream(),\n    images: []\n  },\n  ui: {\n    selectedImageId: null\n  }\n})\n\nstore.createActions({\n  startMediaStream: constraints =>\n    async store => {\n      try {\n        const stream = await navigator.mediaDevices.getUserMedia(constraints)\n        store.actions.mediaStreamSuccess(stream)\n      } catch (err) {\n        store.actions.mediaStreamError(err)\n      }\n    },\n  mediaStreamSuccess: 'camera/STREAM_SUCCESS',\n  mediaStreamError: 'camera/STREAM_ERROR',\n  addImages: 'camera/ADD_IMAGES',\n  saveImage: url =>\n    store => {\n      const id = getId()\n      const image = { id, url }\n      store.actions.addImages([image])\n\n      localforage\n        .getItem('images')\n        .then(images => {\n          images.push(image)\n          localforage.setItem('images', images)\n        })\n        .catch(err => console.log('Could not save image to db', err))\n    },\n  selectImage: (id) => store => {\n    store.actions.setSelectedImageById(id)\n    window.history.pushState({}, '', id || '/')\n  },\n  setSelectedImageById: 'ui/SELECT_IMAGE'\n})\n\nstore.handleActions({\n  [store.actions.mediaStreamSuccess]: (state, stream) => {\n    state.camera.stream = stream\n  },\n  [store.actions.mediaStreamError]: (state, error) => {\n    state.camera.streamError = error\n  },\n  [store.actions.addImages]: (state, images) => {\n    state.camera.images = state.camera.images.concat(images)\n  },\n  [store.actions.setSelectedImageById]: (state, imageId) => {\n    state.ui.selectedImageId = imageId\n  }\n})\n\nlocalforage.getItem('images').then(images => {\n  if (images) {\n    store.actions.addImages(images)\n  } else {\n    localforage.setItem('images', [])\n  }\n})\n\n\nif (window.location.pathname !== '/') {\n  store.actions.setSelectedImageById(decodeURI(window.location.pathname).split('/')[1])\n}\n\nwindow.onpopstate = function (event) {\n  store.actions.setSelectedImageById(decodeURI(window.location.pathname).split('/')[1])\n}\n\nconst Camera = connect(state => ({\n  stream: state.camera.stream,\n  streamError: state.camera.streamError\n}))(\n  class Camera extends Component {\n    video = null;\n    canvas = null;\n\n    componentDidMount () {\n      this.context.store.actions.startMediaStream({\n        audio: false,\n        video: true\n      })\n    }\n\n    render ({ streamError }) {\n      return (\n        <div\n          style={{\n            paddingTop: 16,\n            paddingRight: 16,\n            paddingBottom: 16,\n            paddingLeft: 16\n          }}\n        >\n          <h3\n            style={{\n              height: streamError ? 24 : 0,\n              lineHeight: '1.2',\n              marginBottom: 16,\n              textAlign: 'center',\n              color: '#ff6b6b',\n              opacity: streamError ? 1 : 0,\n              transition: 'all 250ms ease-in-out'\n            }}\n          >\n            {streamError ? streamError.name : ''}\n          </h3>\n          <video\n            ref={node => {\n              this.video = node\n            }}\n            style={{\n              width: '100%',\n              maxHeight: 'calc(50vh - 16px)',\n              background: '#212529',\n              cursor: 'pointer'\n            }}\n            src={\n              window.URL\n                ? window.URL.createObjectURL(this.props.stream)\n                : this.props.stream\n            }\n            autoplay\n            muted\n            onClick={this.handleClick}\n          />\n          <canvas\n            ref={node => {\n              this.canvas = node\n            }}\n            style={{ display: 'none' }}\n          />\n          <div\n            style={{\n              display: 'flex',\n              alignItems: 'center',\n              justifyContent: 'center',\n              width: '100%',\n              marginTop: 16,\n              marginBottom: 16\n            }}\n          >\n            <button\n              style={{\n                paddingTop: 8,\n                paddingRight: 16,\n                paddingBottom: 8,\n                paddingLeft: 16,\n                margin: '0 auto',\n                fontSize: 20,\n                lineHeight: '1.6',\n                color: '#adb5bd',\n                background: '#343a40',\n                border: 'none',\n                outline: 'none',\n                boxShadow: 'none',\n                borderRadius: 5,\n                cursor: 'pointer',\n                opacity: streamError ? 0 : 1,\n                transition: 'all 250ms ease-in-out'\n              }}\n              disabled={streamError}\n              type={'button'}\n              onClick={this.handleClick}\n            >\n              Take Picture\n            </button>\n          </div>\n\n        </div>\n      )\n    }\n\n    handleClick = () => {\n      const canvas = this.canvas\n      const ctx = canvas.getContext('2d')\n      const width = this.video.videoWidth\n      const height = this.video.videoHeight\n      canvas.width = width\n      canvas.height = height\n      ctx.fillRect(0, 0, width, height)\n      ctx.drawImage(this.video, 0, 0, width, height)\n\n      this.context.store.actions.saveImage(canvas.toDataURL('image/webp'))\n    };\n  }\n)\n\nconst ImageList = connect(state => ({\n  images: state.camera.images,\n  selectedImageId: state.ui.selectedImageId\n}))(function ImageList ({ images, selectedImageId }, { store }) {\n  return (\n    <div\n      style={{\n        display: 'flex',\n        flexFlow: 'wrap'\n      }}\n    >\n      {images.map((image, i) => {\n        return (\n          <Image\n            key={image.id}\n            image={image}\n            index={i}\n            selected={image.id === selectedImageId}\n            onClick={() => {\n              store.actions.selectImage(image.id === selectedImageId ? null : image.id)\n            }}\n          />\n        )\n      })}\n    </div>\n  )\n})\n\nfunction Image ({ image, index, onClick, selected }) {\n  const wrapperStyles = selected\n    ? {\n      position: 'fixed',\n      top: 0,\n      left: 0,\n      right: 0,\n      bottom: 0,\n      width: '100%',\n      height: '100%',\n      display: 'flex',\n      alignItems: 'center',\n      justifyContent: 'center',\n      background: '#f8f9fa',\n      zIndex: 10\n    }\n    : {\n      position: 'relative',\n      flex: '0 1 auto',\n      width: 'calc(33% - 4px)',\n      order: index * -1,\n      paddingTop: 2,\n      paddingRight: 2,\n      paddingBottom: 0,\n      paddingLeft: 2\n    }\n\n  const imgStyles = selected ? { width: '90%', maxHeight: '90%', borderRadius: 8 } : { width: '100%', borderRadius: 4 }\n\n  return (\n    <a\n      style={wrapperStyles}\n      href={image.url}\n      target={'_blank'}\n      onClick={e => {\n        e.preventDefault()\n        onClick()\n      }}\n    >\n      <img src={image.url} style={imgStyles} />\n    </a>\n  )\n}\n\nfunction GithubRibbon () {\n  return (\n    <iframe\n      src='https://ghbtns.com/github-btn.html?user=tkh44&amp;repo=smitty&amp;type=star&amp;count=true&amp;size=large'\n      frameborder='0'\n      scrolling='0'\n      width='160px'\n      height='30px'\n      style={{ marginLeft: 'auto' }}\n    />\n  )\n}\n\nconst App = connect(state => state)(props => (\n  <div style={{ display: 'flex' }}>\n    <div\n      style={{\n        flex: '1 0 50%',\n        height: '100vh',\n        background: '#212529',\n        overflow: 'auto',\n        WebkitOverflowScrolling: 'touch',\n        background: props.camera.streamError ? '#f8f9fa' : '#212529',\n        cursor: 'pointer',\n        transition: 'all 250ms ease-in-out'\n      }}\n    >\n      <Camera />\n    </div>\n\n    <div\n      style={{\n        flex: '1 0 50%',\n        height: '100vh',\n        background: '#f8f9fa',\n        borderLeft: '1px solid #dee2e6',\n        overflow: 'auto',\n        WebkitOverflowScrolling: 'touch'\n      }}\n    >\n      <div\n        style={{\n          display: 'flex',\n          alignItems: 'center',\n          borderBottom: '1px solid #dee2e6',\n          paddingRight: 8,\n          paddingLeft: 8\n        }}\n      >\n        <h2>Smitty Photo Booth Demo</h2>\n        <a\n          href={'https://github.com/tkh44/smitty/tree/master/demo/src'}\n          style={{ fontSize: '1rem', color: '#329af0', marginLeft: 8 }}\n          target={'_blank'}\n        >\n          source\n        </a>\n        <GithubRibbon />\n      </div>\n      <ImageList />\n    </div>\n  </div>\n))\n\nconst Root = function (props) {\n  return (\n    <Provider store={store}>\n      <App />\n    </Provider>\n  )\n}\n\nexport default Root\n\n\n\n// WEBPACK FOOTER //\n// ./demo/src/App.js","import mitt from 'mitt'\n\nfunction Store (initialState) {\n  let _state = initialState\n  this.actions = {}\n  this.events = mitt()\n  this.on = this.events.on\n  this.off = this.events.off\n  this.emit = this.emit.bind(this)\n  this.handleActions = this.handleActions.bind(this)\n\n  Object.defineProperty(this, 'state', {\n    get: function () {\n      return _state\n    },\n    set: function (value) {\n      _state = value\n    }\n  })\n}\n\nObject.assign(Store.prototype, {\n  emit (type, payload) {\n    if (typeof type === 'function') return type(this)\n    this.events.emit(type, payload)\n  },\n\n  createActions (actionMap) {\n    for (let creatorName in actionMap) {\n      const type = actionMap[creatorName]\n      let actionCreator\n      if (typeof type === 'function') {\n        actionCreator = payload => this.emit(type(payload))\n      } else {\n        actionCreator = payload => this.emit(type, payload)\n        actionCreator.toString = () => type.toString()\n      }\n      this.actions[creatorName] = actionCreator\n    }\n  },\n\n  handleActions (handlerMap) {\n    for (let type in handlerMap) {\n      let handler = (eventType, e) => {\n        if (eventType.substring(0, 8) === '$$store:') return\n        this.state = handlerMap[type](this.state, e, eventType) || this.state\n        this.events.emit('$$store:state:change', this.state)\n      }\n      if (type !== '*') {\n        handler = handler.bind(null, type)\n      }\n      this.events.on(type, handler)\n    }\n  }\n})\n\nexport function createStore (initialState) {\n  return new Store(initialState)\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","(function(self) {\n  'use strict';\n\n  if (self.fetch) {\n    return\n  }\n\n  var support = {\n    searchParams: 'URLSearchParams' in self,\n    iterable: 'Symbol' in self && 'iterator' in Symbol,\n    blob: 'FileReader' in self && 'Blob' in self && (function() {\n      try {\n        new Blob()\n        return true\n      } catch(e) {\n        return false\n      }\n    })(),\n    formData: 'FormData' in self,\n    arrayBuffer: 'ArrayBuffer' in self\n  }\n\n  if (support.arrayBuffer) {\n    var viewClasses = [\n      '[object Int8Array]',\n      '[object Uint8Array]',\n      '[object Uint8ClampedArray]',\n      '[object Int16Array]',\n      '[object Uint16Array]',\n      '[object Int32Array]',\n      '[object Uint32Array]',\n      '[object Float32Array]',\n      '[object Float64Array]'\n    ]\n\n    var isDataView = function(obj) {\n      return obj && DataView.prototype.isPrototypeOf(obj)\n    }\n\n    var isArrayBufferView = ArrayBuffer.isView || function(obj) {\n      return obj && viewClasses.indexOf(Object.prototype.toString.call(obj)) > -1\n    }\n  }\n\n  function normalizeName(name) {\n    if (typeof name !== 'string') {\n      name = String(name)\n    }\n    if (/[^a-z0-9\\-#$%&'*+.\\^_`|~]/i.test(name)) {\n      throw new TypeError('Invalid character in header field name')\n    }\n    return name.toLowerCase()\n  }\n\n  function normalizeValue(value) {\n    if (typeof value !== 'string') {\n      value = String(value)\n    }\n    return value\n  }\n\n  // Build a destructive iterator for the value list\n  function iteratorFor(items) {\n    var iterator = {\n      next: function() {\n        var value = items.shift()\n        return {done: value === undefined, value: value}\n      }\n    }\n\n    if (support.iterable) {\n      iterator[Symbol.iterator] = function() {\n        return iterator\n      }\n    }\n\n    return iterator\n  }\n\n  function Headers(headers) {\n    this.map = {}\n\n    if (headers instanceof Headers) {\n      headers.forEach(function(value, name) {\n        this.append(name, value)\n      }, this)\n\n    } else if (headers) {\n      Object.getOwnPropertyNames(headers).forEach(function(name) {\n        this.append(name, headers[name])\n      }, this)\n    }\n  }\n\n  Headers.prototype.append = function(name, value) {\n    name = normalizeName(name)\n    value = normalizeValue(value)\n    var oldValue = this.map[name]\n    this.map[name] = oldValue ? oldValue+','+value : value\n  }\n\n  Headers.prototype['delete'] = function(name) {\n    delete this.map[normalizeName(name)]\n  }\n\n  Headers.prototype.get = function(name) {\n    name = normalizeName(name)\n    return this.has(name) ? this.map[name] : null\n  }\n\n  Headers.prototype.has = function(name) {\n    return this.map.hasOwnProperty(normalizeName(name))\n  }\n\n  Headers.prototype.set = function(name, value) {\n    this.map[normalizeName(name)] = normalizeValue(value)\n  }\n\n  Headers.prototype.forEach = function(callback, thisArg) {\n    for (var name in this.map) {\n      if (this.map.hasOwnProperty(name)) {\n        callback.call(thisArg, this.map[name], name, this)\n      }\n    }\n  }\n\n  Headers.prototype.keys = function() {\n    var items = []\n    this.forEach(function(value, name) { items.push(name) })\n    return iteratorFor(items)\n  }\n\n  Headers.prototype.values = function() {\n    var items = []\n    this.forEach(function(value) { items.push(value) })\n    return iteratorFor(items)\n  }\n\n  Headers.prototype.entries = function() {\n    var items = []\n    this.forEach(function(value, name) { items.push([name, value]) })\n    return iteratorFor(items)\n  }\n\n  if (support.iterable) {\n    Headers.prototype[Symbol.iterator] = Headers.prototype.entries\n  }\n\n  function consumed(body) {\n    if (body.bodyUsed) {\n      return Promise.reject(new TypeError('Already read'))\n    }\n    body.bodyUsed = true\n  }\n\n  function fileReaderReady(reader) {\n    return new Promise(function(resolve, reject) {\n      reader.onload = function() {\n        resolve(reader.result)\n      }\n      reader.onerror = function() {\n        reject(reader.error)\n      }\n    })\n  }\n\n  function readBlobAsArrayBuffer(blob) {\n    var reader = new FileReader()\n    var promise = fileReaderReady(reader)\n    reader.readAsArrayBuffer(blob)\n    return promise\n  }\n\n  function readBlobAsText(blob) {\n    var reader = new FileReader()\n    var promise = fileReaderReady(reader)\n    reader.readAsText(blob)\n    return promise\n  }\n\n  function readArrayBufferAsText(buf) {\n    var view = new Uint8Array(buf)\n    var chars = new Array(view.length)\n\n    for (var i = 0; i < view.length; i++) {\n      chars[i] = String.fromCharCode(view[i])\n    }\n    return chars.join('')\n  }\n\n  function bufferClone(buf) {\n    if (buf.slice) {\n      return buf.slice(0)\n    } else {\n      var view = new Uint8Array(buf.byteLength)\n      view.set(new Uint8Array(buf))\n      return view.buffer\n    }\n  }\n\n  function Body() {\n    this.bodyUsed = false\n\n    this._initBody = function(body) {\n      this._bodyInit = body\n      if (!body) {\n        this._bodyText = ''\n      } else if (typeof body === 'string') {\n        this._bodyText = body\n      } else if (support.blob && Blob.prototype.isPrototypeOf(body)) {\n        this._bodyBlob = body\n      } else if (support.formData && FormData.prototype.isPrototypeOf(body)) {\n        this._bodyFormData = body\n      } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n        this._bodyText = body.toString()\n      } else if (support.arrayBuffer && support.blob && isDataView(body)) {\n        this._bodyArrayBuffer = bufferClone(body.buffer)\n        // IE 10-11 can't handle a DataView body.\n        this._bodyInit = new Blob([this._bodyArrayBuffer])\n      } else if (support.arrayBuffer && (ArrayBuffer.prototype.isPrototypeOf(body) || isArrayBufferView(body))) {\n        this._bodyArrayBuffer = bufferClone(body)\n      } else {\n        throw new Error('unsupported BodyInit type')\n      }\n\n      if (!this.headers.get('content-type')) {\n        if (typeof body === 'string') {\n          this.headers.set('content-type', 'text/plain;charset=UTF-8')\n        } else if (this._bodyBlob && this._bodyBlob.type) {\n          this.headers.set('content-type', this._bodyBlob.type)\n        } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n          this.headers.set('content-type', 'application/x-www-form-urlencoded;charset=UTF-8')\n        }\n      }\n    }\n\n    if (support.blob) {\n      this.blob = function() {\n        var rejected = consumed(this)\n        if (rejected) {\n          return rejected\n        }\n\n        if (this._bodyBlob) {\n          return Promise.resolve(this._bodyBlob)\n        } else if (this._bodyArrayBuffer) {\n          return Promise.resolve(new Blob([this._bodyArrayBuffer]))\n        } else if (this._bodyFormData) {\n          throw new Error('could not read FormData body as blob')\n        } else {\n          return Promise.resolve(new Blob([this._bodyText]))\n        }\n      }\n\n      this.arrayBuffer = function() {\n        if (this._bodyArrayBuffer) {\n          return consumed(this) || Promise.resolve(this._bodyArrayBuffer)\n        } else {\n          return this.blob().then(readBlobAsArrayBuffer)\n        }\n      }\n    }\n\n    this.text = function() {\n      var rejected = consumed(this)\n      if (rejected) {\n        return rejected\n      }\n\n      if (this._bodyBlob) {\n        return readBlobAsText(this._bodyBlob)\n      } else if (this._bodyArrayBuffer) {\n        return Promise.resolve(readArrayBufferAsText(this._bodyArrayBuffer))\n      } else if (this._bodyFormData) {\n        throw new Error('could not read FormData body as text')\n      } else {\n        return Promise.resolve(this._bodyText)\n      }\n    }\n\n    if (support.formData) {\n      this.formData = function() {\n        return this.text().then(decode)\n      }\n    }\n\n    this.json = function() {\n      return this.text().then(JSON.parse)\n    }\n\n    return this\n  }\n\n  // HTTP methods whose capitalization should be normalized\n  var methods = ['DELETE', 'GET', 'HEAD', 'OPTIONS', 'POST', 'PUT']\n\n  function normalizeMethod(method) {\n    var upcased = method.toUpperCase()\n    return (methods.indexOf(upcased) > -1) ? upcased : method\n  }\n\n  function Request(input, options) {\n    options = options || {}\n    var body = options.body\n\n    if (input instanceof Request) {\n      if (input.bodyUsed) {\n        throw new TypeError('Already read')\n      }\n      this.url = input.url\n      this.credentials = input.credentials\n      if (!options.headers) {\n        this.headers = new Headers(input.headers)\n      }\n      this.method = input.method\n      this.mode = input.mode\n      if (!body && input._bodyInit != null) {\n        body = input._bodyInit\n        input.bodyUsed = true\n      }\n    } else {\n      this.url = String(input)\n    }\n\n    this.credentials = options.credentials || this.credentials || 'omit'\n    if (options.headers || !this.headers) {\n      this.headers = new Headers(options.headers)\n    }\n    this.method = normalizeMethod(options.method || this.method || 'GET')\n    this.mode = options.mode || this.mode || null\n    this.referrer = null\n\n    if ((this.method === 'GET' || this.method === 'HEAD') && body) {\n      throw new TypeError('Body not allowed for GET or HEAD requests')\n    }\n    this._initBody(body)\n  }\n\n  Request.prototype.clone = function() {\n    return new Request(this, { body: this._bodyInit })\n  }\n\n  function decode(body) {\n    var form = new FormData()\n    body.trim().split('&').forEach(function(bytes) {\n      if (bytes) {\n        var split = bytes.split('=')\n        var name = split.shift().replace(/\\+/g, ' ')\n        var value = split.join('=').replace(/\\+/g, ' ')\n        form.append(decodeURIComponent(name), decodeURIComponent(value))\n      }\n    })\n    return form\n  }\n\n  function parseHeaders(rawHeaders) {\n    var headers = new Headers()\n    rawHeaders.split(/\\r?\\n/).forEach(function(line) {\n      var parts = line.split(':')\n      var key = parts.shift().trim()\n      if (key) {\n        var value = parts.join(':').trim()\n        headers.append(key, value)\n      }\n    })\n    return headers\n  }\n\n  Body.call(Request.prototype)\n\n  function Response(bodyInit, options) {\n    if (!options) {\n      options = {}\n    }\n\n    this.type = 'default'\n    this.status = 'status' in options ? options.status : 200\n    this.ok = this.status >= 200 && this.status < 300\n    this.statusText = 'statusText' in options ? options.statusText : 'OK'\n    this.headers = new Headers(options.headers)\n    this.url = options.url || ''\n    this._initBody(bodyInit)\n  }\n\n  Body.call(Response.prototype)\n\n  Response.prototype.clone = function() {\n    return new Response(this._bodyInit, {\n      status: this.status,\n      statusText: this.statusText,\n      headers: new Headers(this.headers),\n      url: this.url\n    })\n  }\n\n  Response.error = function() {\n    var response = new Response(null, {status: 0, statusText: ''})\n    response.type = 'error'\n    return response\n  }\n\n  var redirectStatuses = [301, 302, 303, 307, 308]\n\n  Response.redirect = function(url, status) {\n    if (redirectStatuses.indexOf(status) === -1) {\n      throw new RangeError('Invalid status code')\n    }\n\n    return new Response(null, {status: status, headers: {location: url}})\n  }\n\n  self.Headers = Headers\n  self.Request = Request\n  self.Response = Response\n\n  self.fetch = function(input, init) {\n    return new Promise(function(resolve, reject) {\n      var request = new Request(input, init)\n      var xhr = new XMLHttpRequest()\n\n      xhr.onload = function() {\n        var options = {\n          status: xhr.status,\n          statusText: xhr.statusText,\n          headers: parseHeaders(xhr.getAllResponseHeaders() || '')\n        }\n        options.url = 'responseURL' in xhr ? xhr.responseURL : options.headers.get('X-Request-URL')\n        var body = 'response' in xhr ? xhr.response : xhr.responseText\n        resolve(new Response(body, options))\n      }\n\n      xhr.onerror = function() {\n        reject(new TypeError('Network request failed'))\n      }\n\n      xhr.ontimeout = function() {\n        reject(new TypeError('Network request failed'))\n      }\n\n      xhr.open(request.method, request.url, true)\n\n      if (request.credentials === 'include') {\n        xhr.withCredentials = true\n      }\n\n      if ('responseType' in xhr && support.blob) {\n        xhr.responseType = 'blob'\n      }\n\n      request.headers.forEach(function(value, name) {\n        xhr.setRequestHeader(name, value)\n      })\n\n      xhr.send(typeof request._bodyInit === 'undefined' ? null : request._bodyInit)\n    })\n  }\n  self.fetch.polyfill = true\n})(typeof self !== 'undefined' ? self : this);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// /Users/kye/npm/lib/~/nwb/~/whatwg-fetch/fetch.js\n// module id = loAf\n// module chunks = 0","'use strict';\n\nvar Promise = require('./core');\n\nvar DEFAULT_WHITELIST = [\n  ReferenceError,\n  TypeError,\n  RangeError\n];\n\nvar enabled = false;\nexports.disable = disable;\nfunction disable() {\n  enabled = false;\n  Promise._10 = null;\n  Promise._97 = null;\n}\n\nexports.enable = enable;\nfunction enable(options) {\n  options = options || {};\n  if (enabled) disable();\n  enabled = true;\n  var id = 0;\n  var displayId = 0;\n  var rejections = {};\n  Promise._10 = function (promise) {\n    if (\n      promise._81 === 2 && // IS REJECTED\n      rejections[promise._72]\n    ) {\n      if (rejections[promise._72].logged) {\n        onHandled(promise._72);\n      } else {\n        clearTimeout(rejections[promise._72].timeout);\n      }\n      delete rejections[promise._72];\n    }\n  };\n  Promise._97 = function (promise, err) {\n    if (promise._45 === 0) { // not yet handled\n      promise._72 = id++;\n      rejections[promise._72] = {\n        displayId: null,\n        error: err,\n        timeout: setTimeout(\n          onUnhandled.bind(null, promise._72),\n          // For reference errors and type errors, this almost always\n          // means the programmer made a mistake, so log them after just\n          // 100ms\n          // otherwise, wait 2 seconds to see if they get handled\n          matchWhitelist(err, DEFAULT_WHITELIST)\n            ? 100\n            : 2000\n        ),\n        logged: false\n      };\n    }\n  };\n  function onUnhandled(id) {\n    if (\n      options.allRejections ||\n      matchWhitelist(\n        rejections[id].error,\n        options.whitelist || DEFAULT_WHITELIST\n      )\n    ) {\n      rejections[id].displayId = displayId++;\n      if (options.onUnhandled) {\n        rejections[id].logged = true;\n        options.onUnhandled(\n          rejections[id].displayId,\n          rejections[id].error\n        );\n      } else {\n        rejections[id].logged = true;\n        logError(\n          rejections[id].displayId,\n          rejections[id].error\n        );\n      }\n    }\n  }\n  function onHandled(id) {\n    if (rejections[id].logged) {\n      if (options.onHandled) {\n        options.onHandled(rejections[id].displayId, rejections[id].error);\n      } else if (!rejections[id].onUnhandled) {\n        console.warn(\n          'Promise Rejection Handled (id: ' + rejections[id].displayId + '):'\n        );\n        console.warn(\n          '  This means you can ignore any previous messages of the form \"Possible Unhandled Promise Rejection\" with id ' +\n          rejections[id].displayId + '.'\n        );\n      }\n    }\n  }\n}\n\nfunction logError(id, error) {\n  console.warn('Possible Unhandled Promise Rejection (id: ' + id + '):');\n  var errStr = (error && (error.stack || error)) + '';\n  errStr.split('\\n').forEach(function (line) {\n    console.warn('  ' + line);\n  });\n}\n\nfunction matchWhitelist(error, list) {\n  return list.some(function (cls) {\n    return error instanceof cls;\n  });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// /Users/kye/npm/lib/~/nwb/~/promise/lib/rejection-tracking.js\n// module id = qd0F\n// module chunks = 0","function n(n){return n=n||Object.create(null),{on:function(t,o){(n[t]||(n[t]=[])).push(o)},off:function(t,o){var u=n[t]||(n[t]=[]);u.splice(u.indexOf(o)>>>0,1)},emit:function(t,o){(n[t]||[]).map(function(n){n(o)}),(n[\"*\"]||[]).map(function(n){n(t,o)})}}}module.exports=n;\n//# sourceMappingURL=mitt.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/mitt/dist/mitt.js\n// module id = tNdy\n// module chunks = 0"],"sourceRoot":""}